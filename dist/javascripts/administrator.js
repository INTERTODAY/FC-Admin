"use strict";window.requirejs(["common"],function(n){n.initDataTable(window.$("#table_admin"),{buttons:[{text:'<i class="fa fa-copy"></i> 복사',extend:"copy",className:"btn-sm btn-default",exportOptions:{columns:[0,1,2,3]}},{text:'<i class="fa fa-download"></i> 엑셀',extend:"excel",className:"btn-sm btn-default",exportOptions:{columns:[0,1,2,3]}}]});var t=window.$(".select-branch-list"),a=[],i=window.$(".btn-assign-branch"),e=window.$("#draggablePanelList"),r=window.$(".btn-assign-branch-submit"),o=null;window.$("#table_admin").on("click",".btn-delete-admin",function(){if(!window.confirm("삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?"))return!1;var n={id:window.$(void 0).data("user-id")};window.axios.delete("/administrator",{params:n}).then(function(n){n.data.success?window.alert("관리자를 삭제하였습니다."):window.alert("관리자를 삭제하지 못했습니다."),window.location.reload()}).catch(function(n){console.log(n)})}),window.administrator={removeElement:function(n){return $(n).parent().parent().remove(),a=l(),!1}},window.$(".btn-modify-admininfo").bind("click",function(n){var t=window.$(n.currentTarget),a=t.attr("data-user-name"),i=t.attr("data-user-email"),e=t.attr("data-user-role"),r=t.attr("data-url"),d=window.$("#frm_modify_admin");o=t.attr("data-user-id"),d.find("#name").val(a),d.find("#email").val(i),d.find(".employee_id").val(o),d.find("#select_authority").val(e),d.attr("action",r)}),window.$(".btn-modify-role").bind("click",function(n){var t=window.$(n.currentTarget),a=t.attr("data-user-role"),i=window.$("#frm_change_admin_role");o=t.attr("data-user-id"),i.find(".user_id").val(o),i.find("#select_authority").val(a)}),window.$(".btn-add-branch").bind("click",function(n){var t=window.$(n.currentTarget),i=window.$("#frm_assign_branch");o=t.attr("data-user-id"),i.find(".user_id").val(o),window.axios({method:"get",url:"/administrator/branch/"+o}).then(function(n){n.data.success?(a=[],e.empty(),n.data.list.forEach(function(n){var t=d(n.id,n.name);e.append(t),a.push([o,n.id])})):window.alert("알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.")})}),i.bind("click",function(){var n=t.find("option:selected").text().trim(),i=t.find("option:selected").val().trim();if(!c(i)){var r=d(i,n);e.append(r),a.push([o,i])}});var d=function(n,t){return'<li class="list-group-item" data-branch-id="'+n+'"><div class="course">'+t+'<a href="#" class="btn-delete-course" onclick="administrator.removeElement(this);"> <i class="fa fa-remove text-red"></i></a> </div></li>'},s=window.$("#draggablePanelList");s.sortable({handle:".course",update:function(){a=l()}});var c=function(n){for(var t=0,i=a.length;t<i;t++)if(a[t][1]===n)return!0;return!1},l=function(){var n=[];return window.$(".list-group-item",s).each(function(t,a){var i=[o,window.$(a).attr("data-branch-id")];n.push(i)}),n};r.bind("click",function(n){if(n.preventDefault(),a.length<=0)return void window.alert("지점을 추가하세요.");window.axios({method:"post",url:"/administrator/assign/branch",data:{user_id:o,branch_list:a}}).then(function(n){n.data.success?window.alert("지점을 배정하였습니다."):(console.log(n.data.msg),window.alert("알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.")),window.location.reload()})})});
//# sourceMappingURL=../maps/administrator.js.map
