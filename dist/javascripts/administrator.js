"use strict";window.requirejs(["common"],function(n){var a=this;n.initDataTable($("#table_administrator"));var t=window.$(".select-branch-list"),i=[],r=window.$(".btn-assign-branch"),e=window.$("#draggablePanelList"),d=window.$(".btn-assign-branch-submit"),o=null;window.$("#table_administrator").on("click",".btn-delete-admin",function(){if(!window.confirm("삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?"))return!1;var n={id:window.$(a).data("user-id")};window.axios.delete("/administrator",{params:n}).then(function(n){n.data.success?window.alert("관리자를 삭제하였습니다."):window.alert("관리자를 삭제하지 못했습니다."),window.location.reload()}).catch(function(n){console.log(n)})}),window.administrator={removeElement:function(n){return $(n).parent().parent().remove(),i=w(),!1}},window.$(".btn-modify-admininfo").bind("click",function(n){var a=window.$(n.currentTarget),t=a.attr("data-user-name"),i=a.attr("data-user-email"),r=a.attr("data-user-role"),e=a.attr("data-url"),d=window.$("#frm_modify_admin");o=a.attr("data-user-id"),d.find("#name").val(t),d.find("#email").val(i),d.find(".employee_id").val(o),d.find("#select_authority").val(r),d.attr("action",e)}),window.$(".btn-modify-role").bind("click",function(n){var a=window.$(n.currentTarget),t=a.attr("data-user-role"),i=window.$("#frm_change_admin_role");o=a.attr("data-user-id"),i.find(".user_id").val(o),i.find("#select_authority").val(t)}),window.$(".btn-add-branch").bind("click",function(n){var a=window.$(n.currentTarget),t=window.$("#frm_assign_branch");o=a.attr("data-user-id"),t.find(".user_id").val(o),window.axios({method:"get",url:"/administrator/branch/"+o}).then(function(n){n.data.success?(i=[],e.empty(),n.data.list.forEach(function(n){var a=c(n.id,n.name);e.append(a),i.push([o,n.id])})):window.alert("알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.")})}),r.bind("click",function(){var n=t.find("option:selected").text().trim(),a=t.find("option:selected").val().trim();if(!l(a)){var r=c(a,n);e.append(r),i.push([o,a])}});var c=function(n,a){return'<li class="list-group-item" data-branch-id="'+n+'"><div class="course">'+a+'<a href="#" class="btn-delete-course" onclick="administrator.removeElement(this);"> <i class="fa fa-remove text-red"></i></a> </div></li>'},s=window.$("#draggablePanelList");s.sortable({handle:".course",update:function(){i=w()}});var l=function(n){for(var a=0,t=i.length;a<t;a++)if(i[a][1]===n)return!0;return!1},w=function(){var n=[];return window.$(".list-group-item",s).each(function(a,t){var i=[o,window.$(t).attr("data-branch-id")];n.push(i)}),n};d.bind("click",function(n){if(n.preventDefault(),i.length<=0)return void window.alert("지점을 추가하세요.");window.axios({method:"post",url:"/administrator/assign/branch",data:{user_id:o,branch_list:i}}).then(function(n){n.data.success?window.alert("지점을 배정하였습니다."):(console.log(n.data.msg),window.alert("알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.")),window.location.reload()})})});
//# sourceMappingURL=../maps/administrator.js.map
