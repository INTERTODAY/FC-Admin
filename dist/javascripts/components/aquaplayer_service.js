"use strict";window.define(["common","text!../../../nplayer_wrapper.html","axplugin","nplayer","nplayer_ui","cdnproxy","nplayer_conf"],function(e,t,n){function i(e){l=this,l.extendOptions(e),l.init()}var o,a,l=null,r=r||window.$;return i.prototype={options:{},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},extendOptions:function(e){this.options=this.extend({},this.options),this.extend(this.options,e)},init:function(){l.getEncodedParam()},initPlayer:function(){l.resize(),l.options.html?l.initPlayerHTML():"ActiveXObject"in window&&l.initPlayerWindow()},initPlayerHTML:function(){a=new window.NPlayer("video",{controlBox:"nplayer_control.html",visible:!1,mode:"html5"}),window.player=a,window.initNPlayerUI(a),a.bindEvent("Ready",function(){l.reportMessage("ready"),window.proxy_init(function(){window.setPlayerStart(!0),window.setNPlayer(a),window.mygentAuthCall(function(e){window.setMediaInfo(l.options.fileUrl,e);var t=window.getMediaURL(!1);a.open({URL:window.encodeURI(t)})},o)},window.indicateInstall,window.indicateUpdate)}),a.bindEvent("OpenStateChanged",function(e){switch(l.reportMessage("OpenStateChanged"),e){case window.NPlayer.OpenState.Opened:a.setVisible(!0),window.starthtml5State();break;case window.NPlayer.OpenState.Closed:window.Stophtml5State(window.NPlayer.OpenState.Closed)}}),a.bindEvent("PlayStateChanged",function(e){switch(l.reportMessage("PlayStateChanged"),e){case window.NPlayer.PlayState.Playing:a.setVisible(!0);break;case window.NPlayer.PlayState.Stopped:a.setVisible(!1);break;case window.NPlayer.PlayState.Paused:a.setVisible(!0)}}),a.bindEvent("GuardCallback",function(e,t){l.reportMessage("GuardCallback - "+e+" : "+t)}),a.bindEvent("Error",function(e){l.reportMessage("Error - "+e)})},initPlayerWindow:function(){a=new window.NPlayer("video",{controlBox:"nplayer_control.html",visible:!1});var e=!1;window.player=a,l.testWatermark(),window.initNPlayerUI(a),a.bindEvent("Ready",function(){l.reportMessage("Ready"),n.loadAquaAxPlugin()&&(a.setCDNAuthParam(o),a.addContextMenu("SystemInfo","sysinfo"),console.log(window.encodeURI(l.options.fileUrl)),a.open({URL:window.encodeURI(l.options.fileUrl)}),e=n.setAquaAxPlugin(this.options.fileUrl,o))}),a.bindEvent("OpenStateChanged",function(e){switch(l.reportMessage("OpenStateChanged"),e){case window.NPlayer.OpenState.Opened:a.setVisible(!0);break;case window.NPlayer.OpenState.Closed:}}),a.bindEvent("PlayStateChanged",function(t){switch(l.reportMessage("PlayStateChanged"),t){case window.NPlayer.PlayState.Playing:a.setVisible(!0),!0===e&&(window.AquaAxPlugin.PlayState=window.NPlayer.PlayState.Playing,window.AquaAxPlugin.OpenStateChange());break;case window.NPlayer.PlayState.Stopped:a.setVisible(!1);break;case window.NPlayer.PlayState.Paused:a.setVisible(!0),!0===e&&(window.AquaAxPlugin.PlayState=window.NPlayer.PlayState.Paused,window.AquaAxPlugin.OpenStateChange())}}),a.bindEvent("GuardCallback",function(t,n){!0===e&&window.AquaAxPlugin.SendPVLog(t,n)}),a.bindEvent("Error",function(e){console.log("err",e),r("#video").css("background-image","none")}),a.bindEvent("ContextMenu",function(t){"sysinfo"===t&&!0===e&&(window.AquaAxPlugin.LoadSystemInfomation(),window.alert("CPU 정보 : "+window.AquaAxPlugin.DeviceCPU+"\nMEM 정보 : "+window.AquaAxPlugin.DeviceMem+"\nGPU 정보 : "+window.AquaAxPlugin.DeviceGPU+"\n\nIP 정보 : "+window.AquaAxPlugin.DeviceIP+"\nMac 정보 : "+window.AquaAxPlugin.DeviceMac+"\nOS 정보 : "+window.AquaAxPlugin.DeviceOSDesc+"\n해상도 정보 : "+window.AquaAxPlugin.DeviceMonitor+"\nIE 버전 : "+window.AquaAxPlugin.DeviceIE+"\n"))}),window.onunload=function(){!0===e&&window.AquaAxPlugin.FinalizeAuth()}},getEncodedParam:function(){window.axios.get("/api/v1/player/encparam").then(function(e){o=e.data.encparam,l.reportMessage(o),l.initPlayer()}).catch(function(e){l.reportError(e)})},reportMessage:function(e){console.log("aquaservice : "+e)},reportError:function(e){console.log("aquaservice : "+e)},resize:function(){r(window).resize(function(){window.player&&!window.player.getFullscreen()?r("#video").height(r(window).height()):r("#video").height(r(window).height()-r(".wrapper_foot").height())})},testWatermark:function(){window.player.setWatermarkText("Watermark"),window.player.setWatermarkSize(15),window.player.setWatermarkColor(255,0,0,.5),window.player.setWatermarkInterval(5),window.player.setWatermarkLocation(22)},testSubtitle:function(){l.testSubtitle1()},testSubtitle1:function(){window.setTimeout(function(){window.player.setSubtitleFont("궁서",25),window.player.setSubtitleColor(255,0,0,.5),window.player.setSubtitlePosition(100,100),window.player.setSubtitleText("Hello, World - 테스트 1"),l.testSubtitle2()},1e3)},testSubtitle2:function(){window.setTimeout(function(){window.player.setSubtitleFont("Malgun Gothic",15),window.player.setSubtitleColor(0,255,0,1),window.player.setSubtitlePosition(200,50),window.player.setSubtitleText("Hello, World - 테스트 2"),l.testSubtitle3()},1e3)},testSubtitle3:function(){window.setTimeout(function(){window.player.setSubtitleFont("굴림",35),window.player.setSubtitleColor(0,0,255,.7),window.player.setSubtitlePosition(50,200),window.player.setSubtitleText("Hello, World - 테스트 3"),l.testSubtitle1()},1e3)}},i});
//# sourceMappingURL=../../maps/components/aquaplayer_service.js.map
