"use strict";window.define(["jquery","axios","jquery.iframe-transport","jquery-ui/ui/widget","jquery.fileupload"],function(o,t){function n(o){e=this,e.extendOptions(o),e.init()}var e;return n.prototype={options:{},extend:function(o,t){for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return o},extendOptions:function(o){this.options=this.extend({},this.options),this.extend(this.options,o)},init:function(){e.getUploadInfo(),o("#cancel-button").attr("disabled",!0)},getUploadInfo:function(){t.get("/api/v1/fineuploader/token").then(function(o){var t=o.data.uploadInfo;t&&(e.options.uploadUrl=t.uploadUrl.replace("v4","cdnovp"),e.options.uploadCancelUrl=t.uploadCancelUrl,e.options.token=t.token,e.setJqueryFileUploader())})},cancelUpload:function(){t.post(e.options.uploadCancelUrl+"?token="+e.options.token,{token:e.options.token}).then(function(t){window.alert("업로드 취소"),o("#upload-button").attr("disabled",!1),o("#cancel-button").attr("disabled",!0)}).catch(function(o){console.log(o)})},setJqueryFileUploader:function(){var t;o("#fileupload").attr("data-url",e.options.uploadUrl+"?token="+e.options.token),o("#fileupload").fileupload({dataType:"json",singleFileUploads:!0,autoUpload:!1,acceptFileTypes:/(\.|\/)(mp4|avi)$/i,formData:{token:e.options.token,folder:2004661,pkg:1006241,target_path:e.options.uploadFolder},replaceFileInput:!1,add:function(n,e){o("#upload-button").off("click").on("click",function(){o("#upload-button").attr("disabled",!0),o("#cancel-button").attr("disabled",!1),t=e.submit()})},done:function(t,n){var a=n.jqXHR.responseJSON;"None"===a.uploadInfo.errorInfo.errorCode?(window.alert("업로드 성공"),o("#fineUploader").modal("hide"),e.options.callback(n)):window.alert(a.uploadInfo.errorInfo.errorMessage),o("#upload-button").attr("disabled",!1),o("#cancel-button").attr("disabled",!0)},progressall:function(t,n){var e=parseInt(n.loaded/n.total*100,10);o("#progress-value").html(e+"%"),o("#progress .jquery-file-progress-bar").css("width",e+"%")}}),o("#fileupload").bind("fileuploadadd",function(n,e){o.each(e.files,function(t,n){o("#aqua-video-code").val("onm_"+n.name)}),o("#cancel-button").on("click",function(o){t.abort()})}),o("#fileupload").bind("fileuploadfail",function(o,t){"abort"===t.errorThrown&&e.cancelUpload()})}},n});
//# sourceMappingURL=../../maps/components/jquery_uploader_service.js.map
