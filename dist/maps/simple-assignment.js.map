{"version":3,"sources":["simple-assignment.js"],"names":["window","requirejs","activatedStep","sessionTemplate","setEmployeeIds","employeeIds","filter","nodes","map","val","$","response","newData","data","courses","pointTotal","checked","find","children","parseInt","table","rows","add","columns","adjust","draw","catch","error","console","getSessionList","tableEmployee","this","get","join","$selectedPanel","parent","selectedCourseId","prop","text","refresh","undefined","sessionLoaded","axios","then","res","getCourseList","html","getSessionView","eduId","session_list","sortable","start","edu_course_list","attr","append","getCourseView","index","update","e","ui","removeAttr","changeSessionOrder","err","log","empty","eduInfo","education","tinymce","activeEditor","setContent","last","connectWith","can_replay","id","sumPoint","changeCourseOrder","disableSelection","getEduInfo","name","desc","point_complete","point_quiz","point_final","point_reeltime","point_repetition","point_speed","tableCheckAll","search","modal","preventDefault","$target","activateStep","step","currSelector","nextSelector","removeClass","trigger","btnSaveSimpleAssign","assignmentId","saveStep1Data","formData","FormData","format","document","getElementById","files","post","success","logBindUserId","alert","message","saveStep2Data","deleteAssignment","confirm","getContent","log_bind_user_id","edu_id","reeltime_point","speed_point","delete","params","finish_dt","assigment_id","href","training_edu_id","validateStep1","trainingEduId","location","currentTabId","validateStep2","$eduName","$eduDescription","length","pointIsValid","focus","input","execCommand","each","sum","point","title","session","sessionView","makeSessionOrderChangeRequest","method","url","course_list_id","promises","items","push","all","results","forEach","$panelGroup","makeCourseOrderChangeRequest","course","addCourse","$modal","course_name","course_desc","teacher_name","updateProgress","course_id","course_rate","target","parents","closest","onModifyCourseModalOpen","relatedTarget","submit","updateCourse","toggleIcon","on","teacher_rate","put","replaceWith","courseId","Util","createWindowPopup","end","navListItems","allWells","_","modalAddCourses","tableCheckCourseAll","initDataTable","defaultContent","lengthMenu","buttons","btnDeleteSimpleAssign","className","btnSendMessage","btnApplyEdu","visible","messageInput","courseView","tableEducations","getCoursesToAdd","btnAttachCourses","checkedCourses","Handlebars","compile","courseTemplate","initDateTimePicker","tableCourses","row","click","startDt","numberToadd","course_ids","$btnChangeEduPeriod","moment","i","winpop_listener","$item","addClass","show","bind","activatedPanel","hasClass","hide","toString","debounce","course_list_type","courselistType","windowOption","$self","dataVideoId","dataType","courseListId","checklist_group_id","quizGroupId","dataTitle","remove","videoId","dataQuizGroupId","dataChecklistGroupId","dataCourseId","dataCourseListId","checkedEmployeeIds","msg","trim","phones"],"mappings":"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","file":"simple-assignment.js","sourcesContent":["'use strict';\n\nwindow.requirejs([\n  'common',\n  'text!../course.template.html',\n  'text!../session.template.html'\n], function (Util, courseTemplate, sessionTemplate) {\n  var $ = undefined || window.$;\n  var _ = undefined || window._;\n  var assignmentId = $('#assignment_id').val();\n  var activatedStep = $('#activated_step').val();\n  var navListItems = $('ul.setup-panel li a');\n  var allWells = $('.setup-content');\n\n  var modalAddCourses = $('#addCourse');\n\n  var tableCheckAll = $('#check-all');\n  var tableCheckCourseAll = $('#js--formAddCourse').find('#check-all');\n  // var tableCourse = Util.initDataTable($('#table_course'));\n  var tableEmployee = Util.initDataTable($('#table_employee'), {\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ]\n  });\n  var tableCourses = Util.initDataTable($('#js--formAddCourse').find('#table_courses'), {\n    'columns': [\n      { 'data': null, defaultContent: '<input type=\"checkbox\",value=\"\">' },\n      { 'data': 'course_name', className: 'center' },\n      { 'data': 'teacher_name', className: 'center' },\n      { 'data': 'course_id', className: 'center', visible: false }\n    ],\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ],\n    buttons: []\n  });\n  var tableEducations = Util.initDataTable($('#js--formAddEdu').find('#table_edu'), {\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ],\n    buttons: []\n  });\n  var btnDeleteSimpleAssign = $('#js-delete-simple-assign');\n  var btnSaveSimpleAssign = $('#js-save-simple-assign');\n  var btnSendMessage = $('.btn-send-message');\n  var btnApplyEdu = $('#btnApplyEdu');\n  var btnAttachCourses = $('#btnAttachCourses');\n\n  var messageInput = $('.message');\n  var courseView = window.Handlebars.compile(courseTemplate);\n  var sessionView = window.Handlebars.compile(sessionTemplate);\n  var windowOption = 'scrollbars=yes, toolbar=no, location=no, status=no, menubar=no, resizable=yes, width=1040, height=760, left=0, top=0';\n\n  $(function () {\n    allWells.hide();\n\n    // DateTimePicker 설정\n    Util.initDateTimePicker(\n      $('.date#start_dt'),\n      $('.date#end_dt')\n    );\n\n    modalAddCourses.on('show.bs.modal', function (e) {\n      getCoursesToAdd();\n    });\n\n    btnAttachCourses.on('click', function () {\n      var checkedCourses =\n        $(':checkbox:checked', tableCourses.rows({filter: 'applied'}).nodes()).map(\n          function () {\n            return tableCourses.row(window.$(this).parents('tr')).data()['course_id'];\n          }\n        ).get().join(', ');\n\n      if (checkedCourses === '') {\n        window.alert('강의를 선택하세요.');\n        return false;\n      }\n      if (!window.confirm('강의를 추가하시겠습니까?')) return false;\n\n      btnAttachCourses.prop('disabled', true);\n\n      window.axios.post('/simple_assignment/courses', {\n        edu_id: $('#edu_id').val(),\n        course_ids: checkedCourses\n      })\n      .then(function (res) {\n        if (res.data) {\n          btnAttachCourses.prop('disabled', false);\n          if (res.data.success !== false) {\n            window.alert('강의를 추가하였습니다.');\n\n            // 강의목록 새로고침\n            getCourseList();\n\n            // 모달창 종료\n            $('#addCourse').modal('hide');\n          } else {\n            window.alert('강의를 추가하지 못하였습니다.');\n            console.log(res.data.message);\n          }\n        }\n      });\n    });\n\n    $('.education-period').click(function () {\n      var $btnChangeEduPeriod = $(this);\n      var startDt = $('input[name=\\'start_dt\\']').val();\n      var numberToadd = $('#education-add-number').val();\n\n      if (numberToadd === '') return false;\n\n      switch ($btnChangeEduPeriod.data('period')) {\n      case 'hour':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'h').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'day':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'd').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'week':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'w').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'month':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'M').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'year':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'y').format('YYYY-MM-DD HH:mm'));\n        break;\n\n      default:\n        break;\n      }\n    });\n\n    $('#deselect-point-items').click(function () {\n      $('.point-item').each(function () {\n        $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n        $(this).val(0);\n        $(this).prop('disabled', true);\n      });\n      sumPoint();\n    });\n\n    $('#select-point-items').click(function () {\n      $('.point-item').each(function () {\n        $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', true);\n        // $(this).val(0);\n        $(this).prop('disabled', false);\n      });\n      sumPoint();\n    });\n\n    $('ul.setup-panel li').map(function () {\n      let $item = $(this);\n\n      for (var i = 2; i <= activatedStep; i++) {\n        if (i === $item.index() + 1) {\n          activateStep(i);\n        }\n      }\n    });\n\n    if ($('#edu_id').val()) {\n      getCourseList();\n      $('#btnGetEdu').prop('disabled', true);\n    }\n\n    // 교육대상자 id 조회\n    setEmployeeIds();\n\n    // 포인트 합계 계산\n    sumPoint();\n  });\n\n  // 간편배정 시 추가할 강의목록 (현재 매칭된 교육과정 외 강의목록을 불러온다.)\n  function getCoursesToAdd () {\n    window.axios.get('/simple_assignment/courses', {\n      params: {\n        edu_id: $('#edu_id').val()\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.courses;\n      // console.log(newData);\n\n      if (newData.length > 0) {\n        // btnSaveAdminOffices.prop('disabled', false);\n        var table = $('#js--formAddCourse').find('#table_courses').DataTable();\n\n        table.clear().draw();\n        table.rows.add(newData);\n        table.columns.adjust().draw();\n      } else {\n        // btnSaveOfficeBranches.prop('disabled', true);\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  }\n\n  // 교육대상자 id 조회\n  function setEmployeeIds () {\n    var employeeIds = $(':checkbox:checked', tableEmployee.rows({\n      filter: 'applied'\n    }).nodes()).map(function () {\n      return $(this).data('id');\n    }).get().join(', ');\n    $('input[name=\\'upload_employee_ids\\']').val(employeeIds);\n  }\n\n  function sumPoint () {\n    var pointTotal = 0;\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      if (checked && $(this).val() !== '') {\n        pointTotal += parseInt($(this).val());\n      }\n    });\n\n    $('.badge').text(pointTotal);\n    return pointTotal;\n  }\n\n  /**\n   * 윈도우 팝업창에서의 저장 작업 완료 시 호출된다.\n   * @data: 갱신여부를 반환한다. true 일 경우 세션정보를 갱신한다.\n   */\n  window.winpop_listener = function (data) {\n    getSessionList(data);\n  };\n\n  /**\n   * 세션목록 조회\n   * 처음 강의를 열었을 때와 세션정보가 변경되는 경우만 세션 정보를 갱신한다.\n   */\n  function getSessionList (refresh) {\n    var selectedCourseId = $('.panel-group').data('selected-course-id');\n    var $selectedPanel = $('.panel[data-id=' + selectedCourseId + ']');\n\n    if ($selectedPanel.data('metadata').sessionLoaded === undefined || refresh) {\n      window.axios.get('/course/' + selectedCourseId)\n        .then(function (res) {\n          if (res.data) {\n            $selectedPanel.find('.session-content').html(getSessionView({\n              session_list: res.data.session_list\n            }));\n            $selectedPanel.data('metadata').sessionLoaded = true;\n\n            $('.list-group').sortable({\n              connectWith: '.list-group-item',\n              start: function (e, ui) {\n                $(this).attr('data-previndex', ui.item.index());\n              },\n              update: function (e, ui) {\n                // var newIndex = ui.item.index();\n                // var oldIndex = window.$(this).attr('data-previndex');\n                // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n                $(this).removeAttr('data-previndex');\n                changeSessionOrder();\n              }\n            }).disableSelection();\n          }\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    }\n  }\n\n  /**\n   * 강의목록 조회\n   */\n  function getCourseList () {\n    var eduId = $('#edu_id').val();\n\n    $('#course-list').empty();\n\n    window.axios.get('/education/' + eduId + '/courses')\n      .then(function (res) {\n        if (res.data) {\n          $.each(res.data.edu_course_list, function (index, data) {\n            $('#course-list').append(getCourseView(data));\n            $('.panel').last().data('metadata', data);\n          });\n\n          $('#course-list').sortable({\n            connectWith: '.panel',\n            start: function (e, ui) {\n              $(this).attr('data-previndex', ui.item.index());\n            },\n            update: function (e, ui) {\n              // var newIndex = ui.item.index();\n              // var oldIndex = window.$(this).attr('data-previndex');\n              // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n              $(this).removeAttr('data-previndex');\n              changeCourseOrder();\n            }\n          }).disableSelection();\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  function getEduInfo (eduId) {\n    window.axios.get('/education/' + eduId + '/pointweight')\n      .then(function (res) {\n        if (res.data) {\n          const eduInfo = res.data.education[0];\n\n          $('input[name=\\'course_name\\']').val(eduInfo.name);\n          window.tinymce.activeEditor.setContent('');\n          window.tinymce.get('input-course-desc').setContent(eduInfo.desc);\n          $('input[name=\\'complete_point\\']').val(eduInfo.point_complete);\n          $('input[name=\\'quiz_point\\']').val(eduInfo.point_quiz);\n          $('input[name=\\'test_point\\']').val(eduInfo.point_final);\n          $('input[name=\\'reeltime_point\\']').val(eduInfo.point_reeltime);\n          $('input[name=\\'reps_point\\']').val(eduInfo.point_repetition);\n          $('input[name=\\'speed_point\\']').val(eduInfo.point_speed);\n          $('#can-replay').prop('checked', eduInfo.can_replay === 1);\n\n          $('#edu_id').val(eduInfo.id);\n          $('#edu_id').data('existed', 'Y');\n\n          // 포인트 합계 계산\n          sumPoint();\n          // 강의 목록 조회\n          getCourseList();\n          // 모달창 종료\n          $('#addEdu').modal('hide');\n\n          // $(function () {\n          //   $('#js--formAddEdu').modal('hide');\n          // });\n\n          // 'name': $('input[name=\\'course_name\\']').val(),\n          // 'desc': window.tinymce.activeEditor.getContent({format: 'raw'}),\n          // 'complete_point': $('input[name=\\'complete_point\\']').val(),\n          // 'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n          // 'test_point': $('input[name=\\'test_point\\']').val(),\n          // 'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n          // 'speed_point': $('input[name=\\'speed_point\\']').val(),\n          // 'reps_point': $('input[name=\\'reps_point\\']').val(),\n          // 'start_dt': $('input[name=\\'start_dt\\']').val(),\n          // 'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n          // 'assigment_id': assignmentId,\n          // 'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n          // 'edu_id': $('#edu_id').val(),\n          // 'log_bind_user_id': $('#log_bind_user_id').val(),\n          // 'training_edu_id': $('#training_edu_id').val(),\n          // 'can_replay': $('#can-replay').prop('checked') ? 1 : 0\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  tableCheckAll.bind('click', function () {\n    $(':checkbox', tableEmployee.rows({\n      search: 'applied'\n    }).nodes()).prop('checked', this.checked);\n  });\n\n  tableCheckCourseAll.bind('click', function () {\n    $(':checkbox', tableCourses.rows({\n      search: 'applied'\n    }).nodes()).prop('checked', this.checked);\n  });\n\n  btnApplyEdu.bind('click', function (e) {\n    e.preventDefault();\n\n    var eduId = $('input:first:checked', tableEducations.rows({\n      search: 'applied'\n    }).nodes()).data('id');\n    if (eduId !== undefined) {\n      if (window.confirm('적용하시겠습니까?')) {\n        getEduInfo(eduId);\n      }\n    } else {\n      window.alert('교육과정을 선택하세요.');\n    }\n  });\n\n  navListItems.click(function (e) {\n    e.preventDefault();\n    var $target = $($(this).attr('href'));\n    var $item = $(this).closest('li');\n\n    if (!$item.hasClass('disabled')) {\n      navListItems.closest('li').removeClass('active');\n      $item.addClass('active');\n      allWells.hide();\n      $target.show();\n    }\n  });\n\n  if (activatedStep > 1) {\n    var activatedPanel = 'ul.setup-panel li a:eq(' + (activatedStep - 1).toString() + ')';\n    $(activatedPanel).click();\n  } else {\n    $('ul.setup-panel li.active a').trigger('click');\n  }\n\n  function activateStep (step) {\n    var currSelector = 'ul.setup-panel li:eq(' + (parseInt(step) - 1) + ')';\n    var nextSelector = 'ul.setup-panel li a[href=\"#step-' + step + '\"]';\n\n    $(currSelector).removeClass('disabled');\n    $(nextSelector).trigger('click');\n\n    // updateProgress(step);\n  }\n\n  // 1. 교육생 설정\n  $('.step1 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    if (validateStep1()) {\n      if ($('#edu_id').val()) {\n        if (!window.confirm('엑셀 업로드 시 이전 배정내역은 모두 취소되며,\\n배정을 취소하는 경우 학습이력이 모두 초기화 됩니다.\\n그래도 계속 하시겠습니까?')) return false;\n      } else {\n        if (!window.confirm('저장하시겠습니까?')) return false;\n      }\n      activateStep(2);\n      saveStep1Data();\n    }\n  });\n  $('.step2 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(1);\n  });\n  // 2. 교육과정 개설\n  $('.step2 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    if (validateStep2()) {\n      if (!window.confirm('저장하시겠습니까?')) return false;\n      saveStep2Data();\n      activateStep(3);\n    }\n  });\n  $('.step3 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(2);\n  });\n  // 3. 강의 개설\n  $('.step3 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(4);\n    // updateProgress(3);\n  });\n  $('.step4 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(3);\n  });\n\n  $('.panel-collapse').on('hide.bs.collapse', function () {\n    $('.panel-collapse-clickable').find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\n  });\n\n  $('.panel-collapse').on('show.bs.collapse', function () {\n    $('.panel-collapse-clickable').find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\n  });\n\n  btnDeleteSimpleAssign.on('click', deleteAssignment);\n  btnSaveSimpleAssign.on('click', function () {\n    // updateProgress($('ul.setup-panel li.active').index() + 1);\n    var step = $('ul.setup-panel li.active').index() + 1;\n\n    $('.step' + step + ' > .next > a').trigger('click');\n    // if (!window.confirm('저장하시겠습니까?')) return false;\n    // switch (step) {\n    // case 1:\n    //   if (validateStep1()) {\n    //     saveStep1Data();\n    //   }\n    //   break;\n    // case 2:\n    //   if (validateStep2()) {\n    //     saveStep2Data();\n    //   }\n    //   break;\n    // default:\n    //   break;\n    // }\n  });\n\n  function updateProgress (step) {\n    window.axios.post('/simple_assignment/progress', {\n      step: step,\n      id: assignmentId\n    })\n      .then(function (response) {\n        activatedStep(step);\n        return true;\n      })\n      .catch(function (error) {\n        console.log(error);\n        return false;\n      });\n  }\n\n  /**\n   * 교육 대상자를 저장한다.\n   */\n  function saveStep1Data () {\n    btnSaveSimpleAssign.prop('disabled', true);\n\n    var formData = new window.FormData();\n    formData.append('upload_type', $('input[name=\\'upload_type\\']').val());\n    formData.append('upload_employee_ids', $('input[name=\\'upload_employee_ids\\']').val());\n    formData.append('file-excel', document.getElementById('UploadExcelFile').files[0]);\n    formData.append('group_name', '간편배정');\n    formData.append('redirect', false);\n    formData.append('id', assignmentId);\n    formData.append('log_bind_user_id', $('#log_bind_user_id').val());\n    formData.append('edu_id', $('#edu_id').val());\n    formData.append('start_dt', $('input[name=\\'start_dt\\']').val());\n    formData.append('finish_dt', $('input[name=\\'finish_dt\\']').val());\n    formData.append('training_edu_id', $('#training_edu_id').val());\n\n    window.axios.post('/assignment/upload', formData)\n      .then(function (res) {\n        if (res.data) {\n          btnSaveSimpleAssign.prop('disabled', false);\n\n          if (res.data.success !== false) {\n            $('#log_bind_user_id').val(res.data.logBindUserId);\n            window.alert('교육생을 저장하였습니다.');\n          } else {\n            window.alert('교육생을 저장하지 못하였습니다.');\n            console.log(res.data.message);\n          }\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 교육과정 정보, 포인트 및 교육기간 정보를 저장한다.\n   */\n  function saveStep2Data () {\n    var data = {\n      'name': $('input[name=\\'course_name\\']').val(),\n      'desc': window.tinymce.activeEditor.getContent({\n        format: 'raw'\n      }),\n      'complete_point': $('input[name=\\'complete_point\\']').val(),\n      'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n      'test_point': $('input[name=\\'test_point\\']').val(),\n      'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n      'speed_point': $('input[name=\\'speed_point\\']').val(),\n      'reps_point': $('input[name=\\'reps_point\\']').val(),\n      'start_dt': $('input[name=\\'start_dt\\']').val(),\n      'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n      'assigment_id': assignmentId,\n      'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n      'edu_id': $('#edu_id').val(),\n      'is_existed_edu': $('#edu_id').data('existed'),\n      'log_bind_user_id': $('#log_bind_user_id').val(),\n      'training_edu_id': $('#training_edu_id').val(),\n      'can_replay': $('#can-replay').prop('checked') ? 1 : 0,\n      'can_advance': $('#can-advance').prop('checked') ? 1 : 0\n    };\n\n    // console.log(data);\n    // return false;\n\n    window.axios.post('/education', data)\n      .then(function (res) {\n        // console.log(res);\n        if (res.data) {\n          $('#training_edu_id').val(res.data.trainingEduId);\n          $('#edu_id').val(res.data.eduId);\n          window.alert('교육과정을 저장하였습니다.');\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  function deleteAssignment () {\n    if (!window.confirm('정말 삭제하시겠습니까?')) return false;\n\n    var params = {\n      id: assignmentId,\n      log_bind_user_id: $('#log_bind_user_id').val(),\n      edu_id: $('#edu_id').val()\n    };\n\n    window.axios.delete('/simple_assignment', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('배정내역을 삭제하지 못하였습니다.');\n        } else {\n          window.alert('교육과정을 삭제하였습니다.');\n          window.location.href = '/simple_assignment';\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 1. 교육 대상자 선택\n   */\n  function validateStep1 () {\n    var currentTabId = $('ul.select-employee li.active').children().attr('id');\n    var data = null;\n\n    $('input[name=\\'upload_type\\']').val(currentTabId);\n\n    switch (currentTabId) {\n    case 'employee': // 등록된 직원\n      data = $(':checkbox:checked', tableEmployee.rows({\n        filter: 'applied'\n      }).nodes()).map(function () {\n        return $(this).data('id');\n      }).get().join(', ');\n\n      if (!data) {\n        window.alert('직원을 선택하세요.');\n        return false;\n      }\n\n      $('input[name=\\'upload_employee_ids\\']').val(data);\n      break;\n\n    case 'excel': // 파일업로드\n      if (document.getElementById('UploadExcelFile').files.length === 0) {\n        $('#UploadExcelFile').focus();\n        window.alert('파일을 선택하세요.');\n        return false;\n      }\n      break;\n\n    default:\n      break;\n    }\n\n    return true;\n  }\n\n  /**\n   * 2. 교육과정 입력\n   */\n  function validateStep2 () {\n    var $eduName = $('input[name=\\'course_name\\']');\n    var $eduDescription = $('#input-course-desc').val(); // window.tinymce.activeEditor.getContent();\n\n    if ($eduName.val() === '') {\n      window.alert('교육과정명을 입력하세요.');\n      $eduName.focus();\n      return false;\n    }\n\n    if ($eduDescription === '') {\n      window.alert('교육과정에 대한 설명을 입력하세요.');\n      window.tinymce.execCommand('mceFocus', false, 'input-course-desc');\n      return false;\n    }\n\n    var pointIsValid = true;\n    var pointTotal = 0;\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      // console.log('$(this).val()', checked, $(this).val());\n      if (checked) {\n        if ($(this).val() === '') {\n          window.alert($(this).prop('placeholder') + ' 포인트 점수를 입력하세요.');\n          $(this).focus();\n          pointIsValid = false;\n          return false;\n        } else {\n          pointTotal += parseInt($(this).val());\n        }\n      }\n    });\n\n    // console.log('pointTotal', pointTotal, pointIsValid);\n    if (!pointIsValid) return false;\n    if (pointTotal !== 100) {\n      window.alert('포인트의 합계는 100점이 되어야 합니다.');\n      return false;\n    }\n\n    return true;\n  }\n\n  $('.input-group-addon').children('input:checkbox').on('change', function () {\n    var input = $(this).parent().parent().find('.point-item');\n\n    input.prop('disabled', !$(this).prop('checked'));\n\n    if ($(this).prop('checked')) {\n      input.focus();\n    };\n  });\n\n  $('.point-item').on('keyup', _.debounce(function () {\n    var sum = 0;\n\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      if (checked && $(this).val() !== '' && $(this).val() !== '0') {\n        var point = parseInt($(this).val());\n        sum += point;\n      } else {\n        // $(this).prop('disabled', true);\n        // $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n      }\n    });\n\n    if (sum > 0) {\n      $('.badge').text(sum);\n    }\n\n    if (sum > 100) {\n      window.alert('100점을 초과하였습니다.');\n      return false;\n    }\n  }, 300));\n\n  function getCourseView (data) {\n    return courseView(data);\n  }\n\n  function getSessionView (data) {\n    return sessionView(data);\n  }\n\n  /**\n   * 세션관련정보를 삭제한다.\n   * 주의사항:\n   * 세션과 관련된 일체를 실제 삭제하는 기능이므로, 꼭 필요한 경우에만 사용하도록 할 필요가 있다.\n   * 1. 세션정보(course_list) 삭제\n   * 2. 퀴즈 보기(quiz_option) 삭제\n   * 3. 퀴즈(quiz) 를 삭제한다.\n   * 4. 퀴즈 보기 그룹(quiz_group) 삭제\n   */\n  function deleteSession (params) {\n    window.axios.delete('/course/courselist', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.');\n        } else {\n          window.alert('세션을 삭제하였습니다.');\n          window.location.reload();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * DB 에서 세션 순서를 변경한다.\n   */\n  function makeSessionOrderChangeRequest (session) {\n    return window.axios({\n      method: 'put',\n      url: '/course/courselist',\n      data: {\n        title: session.children('a').data('title'),\n        course_list_id: session.children('a').data('id'),\n        course_list_order: session.index()\n      }\n    });\n  }\n\n  /**\n   * 세션순서를 변경한다.\n   */\n  function changeSessionOrder () {\n    var promises = [];\n    var items = window.$('.session-content > .list-group-item');\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeSessionOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises).then(function (results) {\n      results.forEach(function (response) {\n        console.log(response);\n      });\n    });\n  }\n\n  /**\n   * DB 에서 강의 순서를 변경한다.\n   */\n  function makeCourseOrderChangeRequest (course) {\n    return window.axios({\n      method: 'put',\n      url: '/education/coursegroup',\n      data: {\n        id: course.data('group-id'), // course_group 의 id\n        order: course.index()\n      }\n    });\n  }\n\n  /**\n   * 강의순서를 변경한다.\n   */\n  function changeCourseOrder () {\n    var promises = [];\n    var items = $('#course-list > .panel');\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeCourseOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises).then(function (results) {\n      // results.forEach(function (response) {\n      //   console.log(response);\n      // });\n    });\n  }\n\n  function toggleIcon (e) {\n    $(e.target)\n      .prev('.panel-heading')\n      .find('.more-less')\n      .toggleClass('glyphicon-plus glyphicon-minus');\n\n    // panel-group 에 현재 편집중인 강의 id 를 입력한다.\n    var $panelGroup = $(e.target).parents().find('.panel-group');\n    var selectedCourseId = $(e.target).parents().closest('.panel').data('id');\n\n    if ($panelGroup.data('selected-course-id') !== selectedCourseId) {\n      $panelGroup.data('selected-course-id', selectedCourseId);\n      getSessionList();\n    }\n  }\n\n  function addCourse () {\n    var $modal = $('#registerCourse');\n    var data = {\n      course_name: $modal.find('input[name=\\'course_name\\']').val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find('input[name=\\'teacher_name\\']').val(),\n      edu_id: $('#edu_id').val()\n    };\n\n    window.axios.post('/course', data)\n      .then(function (res) {\n        if (res.data) {\n          if ($('#course-list').children().length === 0) {\n            var currSelector = 'ul.setup-panel li:eq(3)'; // 4. 메세지\n            $(currSelector).removeClass('disabled');\n            updateProgress(4);\n          }\n          $('#course-list').append(getCourseView(res.data));\n          $('.panel').last().data('metadata', res.data);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function updateCourse () {\n    var $modal = $('#modifyCourse');\n    var selectedCourseId = $('.panel-group').data('selected-course-id');\n    var data = {\n      course_id: selectedCourseId,\n      course_name: $modal.find('input[name=\\'course_name\\']').val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find('input[name=\\'teacher_name\\']').val(),\n      course_rate: 0,\n      teacher_rate: 0\n    };\n\n    window.axios.put('/course', data)\n      .then(function (res) {\n        if (res.data) {\n          // console.log(res.data);\n          $('.panel[data-id=' + res.data.course_id + ']').replaceWith(getCourseView(res.data));\n          $('.panel[data-id=' + res.data.course_id + ']').data('metadata', res.data);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function onModifyCourseModalOpen (e) {\n    var data = $(e.relatedTarget).parents().find('.panel').data('metadata');\n    var $modal = $(this);\n\n    $modal.find('input').val('').end();\n    window.tinymce.activeEditor.setContent('');\n    $modal.find('input[name=\\'course_name\\']').val(data.course_name);\n    $modal.find('input[name=\\'teacher_name\\']').val(data.teacher_name);\n    window.tinymce.get('course_desc').setContent(data.course_desc);\n    $modal.find('[autofocus]').focus();\n  }\n\n  $('#registerCourse').submit(function (e) {\n    e.preventDefault();\n\n    addCourse();\n\n    window.tinymce.execCommand('mceFocus', false, 'course_desc');\n    $(this).modal('toggle');\n  });\n  $('#modifyCourse').submit(function (e) {\n    e.preventDefault();\n\n    updateCourse();\n\n    window.tinymce.execCommand('mceFocus', false, 'course_desc');\n    $(this).modal('toggle');\n  });\n\n  $('.panel-group').on('hidden.bs.collapse', toggleIcon);\n  $('.panel-group').on('shown.bs.collapse', toggleIcon);\n  $('#registerCourse').on('hidden.bs.modal', function () {\n    $(this).find('input').val('').end();\n    window.tinymce.activeEditor.setContent('');\n  });\n  $('#registerCourse').on('shown.bs.modal', function () {\n    $(this).find('[autofocus]').focus();\n  });\n  $('#modifyCourse').on('shown.bs.modal', onModifyCourseModalOpen);\n  // $('#modifyCourse').on('hidden.bs.modal', onModifyCourseModalClose);\n\n  // 비디오 생성하기\n  $('.panel-group').on('click', '.btn-create-video', function (e) {\n    e.preventDefault();\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/video?course_id=' + courseId, 'Video', windowOption);\n  });\n  // 퀴즈 생성하기\n  $('.panel-group').on('click', '.btn-create-quiz', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/quiz?course_id=' + courseId + '&type=QUIZ', 'Quiz', windowOption);\n  });\n  // 파이널테스트 생성하기\n  $('.panel-group').on('click', '.btn-create-final', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/quiz?course_id=' + courseId + '&type=FINAL', 'Final', windowOption);\n  });\n  // 파이널테스트 생성하기\n  $('.panel-group').on('click', '.btn-create-checklist', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/checklist?course_id=' + courseId + '&type=CHECK', 'Checklist', windowOption);\n  });\n  // 세션을 삭제한다.\n  $('.panel-group').on('click', '.btn-delete-session', function (e) {\n    e.preventDefault();\n\n    if (!window.confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var $self = $(this);\n    var params = {};\n    params.course_list_id = $(this).parent('span').data('course-list-id');\n    params.course_list_type = $(this).parent('span').data('type');\n\n    var courselistType = $(this).parent('span').data('type');\n    switch (courselistType) {\n    case 'QUIZ':\n    case 'FINAL':\n      params.quiz_group_id = $(this).data('quiz-group');\n      break;\n    case 'VIDEO':\n      params.video_id = $(this).data('video-id');\n      break;\n    case 'CHECKLIST':\n      params.checklist_group_id = $(this).data('checklist-group');\n      break;\n    default:\n      break;\n    }\n\n    window.axios.delete('/course/courselist', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.');\n        } else {\n          window.alert('세션을 삭제하였습니다.');\n          $self.parents('li').remove();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n\n  // 세션 수정하기\n  $('.panel-group').on('click', '.btn-modify-session', function (e) {\n    e.preventDefault();\n\n    var dataCourseId = $(this).parent('span').data('course-id');\n    var dataCourseListId = $(this).parent('span').data('course-list-id');\n    var dataVideoId = $(this).data('video-id');\n    var dataQuizGroupId = $(this).data('quiz-group');\n    var dataChecklistGroupId = $(this).data('checklist-group');\n    var dataType = $(this).parent('span').data('type'); // VIDEO/QUIZ/FINAL\n\n    if (dataType === 'VIDEO') {\n      Util.createWindowPopup('/course/modify/video?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&video_id=' + dataVideoId, 'Video', windowOption);\n    } else if (dataType === 'QUIZ' || dataType === 'FINAL') {\n      Util.createWindowPopup('/course/modify/quiz?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&type=' + dataType + '&quiz_group_id=' + dataQuizGroupId, 'Quiz', windowOption);\n    } else if (dataType === 'CHECKLIST') {\n      Util.createWindowPopup('/course/modify/checklist?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&type=' + dataType + '&checklist_group_id=' + dataChecklistGroupId, 'Checklist', windowOption);\n    }\n  });\n\n  // 체크리스트 보기\n  $('.panel-group').on('click', '.btn-preview-checklist', function (e) {\n    e.preventDefault();\n    var courseListId = window.$(this).parent('span').data('course-list-id');\n    if (!courseListId) {\n      courseListId = window.$(this).data('id');\n    }\n    Util.createWindowPopup('/course/checklist?course_list_id=' + courseListId, 'Checklist', windowOption);\n  });\n\n  // 퀴즈 풀어보기\n  $('.panel-group').on('click', '.btn-solve-quiz', function (e) {\n    e.preventDefault();\n\n    var quizGroupId = window.$(this).attr('data-quiz-group');\n    var dataTitle = window.$(this).attr('data-title');\n    var dataType = window.$(this).attr('data-type');\n\n    Util.createWindowPopup('/course/quiz?id=' + quizGroupId + '&title=' + dataTitle + '&type=' + dataType, 'Quiz', windowOption);\n  });\n\n  // 비디오 보기\n  $('.panel-group').on('click', '.btn-watch-video', function (e) {\n    e.preventDefault();\n\n    // 비디오 아이디를 추출\n    var videoId = window.$(this).attr('data-video-id');\n    Util.createWindowPopup('/course/video?id=' + videoId, 'Video', windowOption);\n  });\n\n  $('.panel-group').on('click', '.btn-delete-course', function () {\n    if (window.confirm('선택하신 강의를 삭제하시겠습니까?')) {\n      var selectedCourseId = $('.panel-group').data('selected-course-id');\n\n      window.axios.delete('/course/deactivate', {\n        params: {\n          id: selectedCourseId\n        }\n      })\n        .then(function (res) {\n          if (res.data.success) {\n            $('.panel[data-id=' + selectedCourseId + ']').remove();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  });\n\n  btnSendMessage.on('click', function (e) {\n    e.preventDefault();\n\n    var currentTabId = $('ul.select-employee li.active').children().attr('id');\n    var checkedEmployeeIds;\n    switch (currentTabId) {\n    case 'employee':\n      checkedEmployeeIds = window.$(':checkbox:checked',\n          tableEmployee.rows({\n            filter: 'applied'\n          }).nodes()).map(\n          function () {\n            return tableEmployee.row(window.$(this).parents('tr')).data()[4];\n          }\n        ).get().join(',');\n      break;\n    case 'employee-assigned':\n        // checkedEmployeeIds = window.$(':checkbox:checked',\n        //   tableAssignedEmployee.rows({filter: 'applied'}).nodes()).map(\n        //     function () {\n        //       return tableAssignedEmployee.row(window.$(this).parents('tr')).data()['user_phone'];\n        //     }\n        //   ).get().join(',');\n      break;\n    default:\n      break;\n    }\n\n    if (!checkedEmployeeIds) {\n      window.alert('직원을 선택하세요.');\n      return false;\n    }\n\n    var message = messageInput.val().trim();\n    if (message === '') {\n      window.alert('메세지를 입력하세요.');\n      messageInput.focus();\n      return false;\n    }\n\n    if (!window.confirm('메세지를 보내시겠습니까?')) {\n      return false;\n    }\n\n    window.axios({\n      method: 'post',\n      url: '/api/v1/sms/send',\n      data: {\n        phones: checkedEmployeeIds,\n        msg: message\n      }\n    })\n      .then(\n        function (res) {\n          if (res.data.success === true) {\n            window.alert('메세지를 전송하였습니다.');\n          } else {\n            window.alert('알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.');\n          }\n        });\n  });\n});\n"],"sourceRoot":"/source/"}