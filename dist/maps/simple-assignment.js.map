{"version":3,"sources":["simple-assignment.js"],"names":["window","requirejs","activatedStep","sessionTemplate","setEmployeeIds","employeeIds","filter","nodes","map","val","$","response","newData","data","courses","pointTotal","checked","find","children","parseInt","table","rows","add","columns","adjust","draw","catch","error","console","getSessionList","tableEmployee","this","get","join","$selectedPanel","parent","selectedCourseId","prop","text","refresh","undefined","sessionLoaded","axios","then","res","getCourseList","html","getSessionView","eduId","session_list","sortable","start","edu_course_list","attr","append","getCourseView","index","update","e","ui","removeAttr","changeSessionOrder","err","log","empty","eduInfo","education","tinymce","activeEditor","setContent","last","connectWith","can_replay","id","sumPoint","changeCourseOrder","getEduInfo","modal","name","desc","point_complete","point_quiz","point_final","point_reeltime","point_repetition","point_speed","key","tags","tagit","search","preventDefault","$target","activateStep","step","currSelector","nextSelector","removeClass","trigger","btnSaveSimpleAssign","assignmentId","saveStep1Data","formData","FormData","format","document","getElementById","files","post","success","logBindUserId","alert","message","saveStep2Data","deleteAssignment","getContent","confirm","complete_point","log_bind_user_id","edu_id","speed_point","reps_point","delete","params","assigment_id","upload_employee_ids","edu_tags","href","training_edu_id","validateStep1","trainingEduId","location","currentTabId","validateStep2","$eduName","$eduDescription","length","pointIsValid","focus","input","execCommand","each","sum","point","title","session","sessionView","makeSessionOrderChangeRequest","method","url","course_list_id","promises","acct","items","push","all","spread","perms","$panelGroup","course","order","addCourse","course_desc","teacher_name","course_rate","teacher_rate","toggleClass","target","parents","closest","$modal","onModifyCourseModalOpen","course_name","updateProgress","submit","updateCourse","course_id","toggleIcon","on","put","replaceWith","courseId","end","Util","createWindowPopup","navListItems","allWells","_","modalAddCourses","tableCheckAll","tableCourse","initDataTable","tableCheckCourseAll","tableCourses","defaultContent","lengthMenu","buttons","btnDeleteSimpleAssign","className","btnSendMessage","btnApplyEdu","visible","messageInput","courseView","tableEducations","beforeTagAdded","tagLabel","messageBytes","remain","btnAttachCourses","Handlebars","compile","courseTemplate","windowOption","hide","event","checkedCourses","getBytes","initDateTimePicker","row","click","startDt","numberToadd","course_ids","$btnChangeEduPeriod","moment","i","winpop_listener","$item","addClass","show","bind","activatedPanel","hasClass","toString","debounce","$self","course_list_type","courselistType","quiz_group_id","video_id","dataCourseId","dataCourseListId","dataChecklistGroupId","dataType","courseListId","checklist_group_id","remove","dataVideoId","dataQuizGroupId","checkedEmployeeIds","quizGroupId","dataTitle","trim","videoId","phones","msg","currentTarget","cutBytes"],"mappings":"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","file":"simple-assignment.js","sourcesContent":["'use strict';\n\nwindow.requirejs([\n  'common',\n  'text!../course.template.html',\n  'text!../session.template.html'\n], function (Util, courseTemplate, sessionTemplate) {\n  var $ = undefined || window.$;\n  var _ = undefined || window._;\n  var assignmentId = $('#assignment_id').val();\n  var activatedStep = $('#activated_step').val();\n  var navListItems = $('ul.setup-panel li a');\n  var allWells = $('.setup-content');\n\n  var modalAddCourses = $('#addCourse');\n\n  var tableCheckAll = $('#check-all');\n  var tableCheckCourseAll = $('#js--formAddCourse').find('#check-all');\n  var tableCourse = Util.initDataTable($('#table_course'));\n  var tableEmployee = Util.initDataTable($('#table_employee'), {\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ]\n  });\n  var tableCourses = Util.initDataTable($('#js--formAddCourse').find('#table_courses'), {\n    'columns': [\n      { 'data': null, defaultContent: '<input type=\"checkbox\",value=\"\">' },\n      { 'data': 'course_name', className: 'center' },\n      { 'data': 'teacher_name', className: 'center' },\n      { 'data': 'course_id', className: 'center', visible: false }\n    ],\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ],\n    buttons: []\n  });\n  var tableEducations = Util.initDataTable($('#js--formAddEdu').find('#table_edu'), {\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ],\n    buttons: []\n  });\n  var btnDeleteSimpleAssign = $('#js-delete-simple-assign');\n  var btnSaveSimpleAssign = $('#js-save-simple-assign');\n  var btnSendMessage = $('.btn-send-message');\n  var btnApplyEdu = $('#btnApplyEdu');\n  var btnAttachCourses = $('#btnAttachCourses');\n\n  var messageInput = $('.message');\n  var courseView = window.Handlebars.compile(courseTemplate);\n  var sessionView = window.Handlebars.compile(sessionTemplate);\n  var windowOption = 'scrollbars=yes, toolbar=no, location=no, status=no, menubar=no, resizable=yes, width=1040, height=760, left=0, top=0';\n\n  $(function () {\n    allWells.hide();\n\n    // window.tinymce.setActive('input-course-desc', true);\n    // window.tinymce.execCommand('mceFocus', false, 'input-course-desc');\n\n    $('#eduTags').tagit({\n      beforeTagAdded: function (event, ui) {\n        var message = ui.tagLabel;\n        var messageBytes = Util.getBytes(message);\n        var remain = 20 - messageBytes;\n\n        if (remain < 0) {\n          console.log(remain, ui.tagLabel);\n          return false;\n        }\n      }\n    });\n\n    // DateTimePicker 설정\n    Util.initDateTimePicker(\n      $('.date#start_dt'),\n      $('.date#end_dt')\n    );\n\n    modalAddCourses.on('show.bs.modal', function (e) {\n      getCoursesToAdd();\n    });\n\n    btnAttachCourses.on('click', function () {\n      var checkedCourses =\n        $(':checkbox:checked', tableCourses.rows({filter: 'applied'}).nodes()).map(\n          function () {\n            return tableCourses.row(window.$(this).parents('tr')).data()['course_id'];\n          }\n        ).get().join(', ');\n\n      if (checkedCourses === '') {\n        window.alert('강의를 선택하세요.');\n        return false;\n      }\n      if (!window.confirm('강의를 추가하시겠습니까?')) return false;\n\n      btnAttachCourses.prop('disabled', true);\n\n      window.axios.post('/simple_assignment/courses', {\n        edu_id: $('#edu_id').val(),\n        course_ids: checkedCourses\n      })\n      .then(function (res) {\n        if (res.data) {\n          btnAttachCourses.prop('disabled', false);\n          if (res.data.success !== false) {\n            window.alert('강의를 추가하였습니다.');\n\n            // 강의목록 새로고침\n            getCourseList();\n\n            // 모달창 종료\n            $('#addCourse').modal('hide');\n          } else {\n            window.alert('강의를 추가하지 못하였습니다.');\n            console.log(res.data.message);\n          }\n        }\n      });\n    });\n\n    $('.education-period').click(function () {\n      var $btnChangeEduPeriod = $(this);\n      var startDt = $('input[name=\\'start_dt\\']').val();\n      var numberToadd = $('#education-add-number').val();\n\n      if (numberToadd === '') return false;\n\n      switch ($btnChangeEduPeriod.data('period')) {\n      case 'hour':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'h').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'day':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'd').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'week':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'w').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'month':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'M').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'year':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'y').format('YYYY-MM-DD HH:mm'));\n        break;\n\n      default:\n        break;\n      }\n    });\n\n    $('#deselect-point-items').click(function () {\n      if (!window.confirm('점수를 초기화하시겠습니까?')) return false;\n      $('.point-item').each(function () {\n        $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n        $(this).val(0);\n        $(this).prop('disabled', true);\n      });\n      sumPoint();\n    });\n\n    $('#select-point-items').click(function () {\n      $('.point-item').each(function () {\n        $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', true);\n        // $(this).val(0);\n        $(this).prop('disabled', false);\n      });\n      sumPoint();\n    });\n\n    $('ul.setup-panel li').map(function () {\n      let $item = $(this);\n\n      for (var i = 2; i <= activatedStep; i++) {\n        if (i === $item.index() + 1) {\n          activateStep(i);\n        }\n      }\n    });\n\n    if ($('#edu_id').val()) {\n      getCourseList();\n      $('#btnGetEdu').prop('disabled', true);\n    }\n\n    // 교육대상자 id 조회\n    setEmployeeIds();\n\n    // 포인트 합계 계산\n    sumPoint();\n  });\n\n  // 간편배정 시 추가할 강의목록 (현재 매칭된 교육과정 외 강의목록을 불러온다.)\n  function getCoursesToAdd () {\n    window.axios.get('/simple_assignment/courses', {\n      params: {\n        edu_id: $('#edu_id').val()\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.courses;\n      // console.log(newData);\n\n      if (newData.length > 0) {\n        // btnSaveAdminOffices.prop('disabled', false);\n        var table = $('#js--formAddCourse').find('#table_courses').DataTable();\n\n        table.clear().draw();\n        table.rows.add(newData);\n        table.columns.adjust().draw();\n      } else {\n        // btnSaveOfficeBranches.prop('disabled', true);\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  }\n\n  // 교육대상자 id 조회\n  function setEmployeeIds () {\n    var employeeIds = $(':checkbox:checked', tableEmployee.rows({\n      filter: 'applied'\n    }).nodes()).map(function () {\n      return $(this).data('id');\n    }).get().join(', ');\n    $('input[name=\\'upload_employee_ids\\']').val(employeeIds);\n  }\n\n  function sumPoint () {\n    var pointTotal = 0;\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      if (checked && $(this).val() !== '') {\n        pointTotal += parseInt($(this).val());\n      }\n    });\n\n    $('.badge').text(pointTotal);\n    return pointTotal;\n  }\n\n  /**\n   * 윈도우 팝업창에서의 저장 작업 완료 시 호출된다.\n   * @data: 갱신여부를 반환한다. true 일 경우 세션정보를 갱신한다.\n   */\n  window.winpop_listener = function (data) {\n    getSessionList(data);\n  };\n\n  /**\n   * 세션목록 조회\n   * 처음 강의를 열었을 때와 세션정보가 변경되는 경우만 세션 정보를 갱신한다.\n   */\n  function getSessionList (refresh) {\n    var selectedCourseId = $('.panel-group').data('selected-course-id');\n    var $selectedPanel = $('.panel[data-id=' + selectedCourseId + ']');\n\n    if ($selectedPanel.data('metadata').sessionLoaded === undefined || refresh) {\n      window.axios.get('/course/' + selectedCourseId)\n        .then(function (res) {\n          if (res.data) {\n            $selectedPanel.find('.session-content').html(getSessionView({\n              session_list: res.data.session_list\n            }));\n            $selectedPanel.data('metadata').sessionLoaded = true;\n\n            $('.list-group').sortable({\n              connectWith: '.list-group-item',\n              start: function (e, ui) {\n                $(this).attr('data-previndex', ui.item.index());\n              },\n              update: function (e, ui) {\n                // var newIndex = ui.item.index();\n                // var oldIndex = window.$(this).attr('data-previndex');\n                // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n                $(this).removeAttr('data-previndex');\n                changeSessionOrder();\n              }\n            }).disableSelection();\n          }\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    }\n  }\n\n  /**\n   * 강의목록 조회\n   */\n  function getCourseList () {\n    var eduId = $('#edu_id').val();\n\n    $('#course-list').empty();\n\n    window.axios.get('/education/' + eduId + '/courses')\n      .then(function (res) {\n        if (res.data) {\n          $.each(res.data.edu_course_list, function (index, data) {\n            $('#course-list').append(getCourseView(data));\n            $('.panel').last().data('metadata', data);\n          });\n\n          $('#course-list').sortable({\n            connectWith: '.panel',\n            start: function (e, ui) {\n              $(this).attr('data-previndex', ui.item.index());\n            },\n            update: function (e, ui) {\n              // var newIndex = ui.item.index();\n              // var oldIndex = window.$(this).attr('data-previndex');\n              // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n              $(this).removeAttr('data-previndex');\n              changeCourseOrder();\n            }\n          }).disableSelection();\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  function getEduInfo (eduId) {\n    window.axios.get('/education/' + eduId + '/pointweight')\n      .then(function (res) {\n        if (res.data) {\n          const eduInfo = res.data.education[0];\n\n          $('input[name=\\'course_name\\']').val(eduInfo.name);\n          window.tinymce.activeEditor.setContent('');\n          window.tinymce.get('input-course-desc').setContent(eduInfo.desc);\n          $('input[name=\\'complete_point\\']').val(eduInfo.point_complete);\n          $('input[name=\\'quiz_point\\']').val(eduInfo.point_quiz);\n          $('input[name=\\'test_point\\']').val(eduInfo.point_final);\n          $('input[name=\\'reeltime_point\\']').val(eduInfo.point_reeltime);\n          $('input[name=\\'reps_point\\']').val(eduInfo.point_repetition);\n          $('input[name=\\'speed_point\\']').val(eduInfo.point_speed);\n          $('#can-replay').prop('checked', eduInfo.can_replay === 1);\n\n          $('#edu_id').val(eduInfo.id);\n          $('#edu_id').data('existed', 'Y');\n\n          // 포인트 합계 계산\n          sumPoint();\n\n          // 태그 입력\n          if (res.data.tags) {\n            for (var key in res.data.tags) {\n              $('#eduTags').tagit('createTag', res.data.tags[key].name);\n            }\n          }\n\n          // 강의 목록 조회\n          getCourseList();\n          // 모달창 종료\n          $('#addEdu').modal('hide');\n\n          // $(function () {\n          //   $('#js--formAddEdu').modal('hide');\n          // });\n\n          // 'name': $('input[name=\\'course_name\\']').val(),\n          // 'desc': window.tinymce.activeEditor.getContent({format: 'raw'}),\n          // 'complete_point': $('input[name=\\'complete_point\\']').val(),\n          // 'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n          // 'test_point': $('input[name=\\'test_point\\']').val(),\n          // 'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n          // 'speed_point': $('input[name=\\'speed_point\\']').val(),\n          // 'reps_point': $('input[name=\\'reps_point\\']').val(),\n          // 'start_dt': $('input[name=\\'start_dt\\']').val(),\n          // 'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n          // 'assigment_id': assignmentId,\n          // 'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n          // 'edu_id': $('#edu_id').val(),\n          // 'log_bind_user_id': $('#log_bind_user_id').val(),\n          // 'training_edu_id': $('#training_edu_id').val(),\n          // 'can_replay': $('#can-replay').prop('checked') ? 1 : 0\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  tableCheckAll.bind('click', function () {\n    $(':checkbox', tableEmployee.rows({\n      search: 'applied'\n    }).nodes()).prop('checked', this.checked);\n  });\n\n  tableCheckCourseAll.bind('click', function () {\n    $(':checkbox', tableCourses.rows({\n      search: 'applied'\n    }).nodes()).prop('checked', this.checked);\n  });\n\n  btnApplyEdu.bind('click', function (e) {\n    e.preventDefault();\n\n    var eduId = $('input:first:checked', tableEducations.rows({\n      search: 'applied'\n    }).nodes()).data('id');\n    if (eduId !== undefined) {\n      if (window.confirm('적용하시겠습니까?')) {\n        getEduInfo(eduId);\n      }\n    } else {\n      window.alert('교육과정을 선택하세요.');\n    }\n  });\n\n  navListItems.click(function (e) {\n    e.preventDefault();\n    var $target = $($(this).attr('href'));\n    var $item = $(this).closest('li');\n\n    if (!$item.hasClass('disabled')) {\n      navListItems.closest('li').removeClass('active');\n      $item.addClass('active');\n      allWells.hide();\n      $target.show();\n    }\n  });\n\n  if (activatedStep > 1) {\n    var activatedPanel = 'ul.setup-panel li a:eq(' + (activatedStep - 1).toString() + ')';\n    $(activatedPanel).click();\n  } else {\n    $('ul.setup-panel li.active a').trigger('click');\n  }\n\n  function activateStep (step) {\n    var currSelector = 'ul.setup-panel li:eq(' + (parseInt(step) - 1) + ')';\n    var nextSelector = 'ul.setup-panel li a[href=\"#step-' + step + '\"]';\n\n    $(currSelector).removeClass('disabled');\n    $(nextSelector).trigger('click');\n\n    // updateProgress(step);\n  }\n\n  // 1. 교육생 설정\n  $('.step1 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    if (validateStep1()) {\n      if ($('#edu_id').val()) {\n        if (!window.confirm('엑셀 업로드 시 이전 배정내역은 모두 취소되며,\\n배정을 취소하는 경우 학습이력이 모두 초기화 됩니다.\\n그래도 계속 하시겠습니까?')) return false;\n      } else {\n        if (!window.confirm('저장하시겠습니까?')) return false;\n      }\n      activateStep(2);\n      saveStep1Data();\n    }\n  });\n  $('.step2 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(1);\n  });\n  // 2. 교육과정 개설\n  $('.step2 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    if (validateStep2()) {\n      if (!window.confirm('저장하시겠습니까?')) return false;\n      saveStep2Data();\n      activateStep(3);\n    }\n  });\n  $('.step3 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(2);\n  });\n  // 3. 강의 개설\n  $('.step3 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(4);\n    // updateProgress(3);\n  });\n  $('.step4 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(3);\n  });\n\n  $('.panel-collapse').on('hide.bs.collapse', function () {\n    $('.panel-collapse-clickable').find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\n  });\n\n  $('.panel-collapse').on('show.bs.collapse', function () {\n    $('.panel-collapse-clickable').find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\n  });\n\n  btnDeleteSimpleAssign.on('click', deleteAssignment);\n  btnSaveSimpleAssign.on('click', function () {\n    // updateProgress($('ul.setup-panel li.active').index() + 1);\n    var step = $('ul.setup-panel li.active').index() + 1;\n\n    $('.step' + step + ' > .next > a').trigger('click');\n    // if (!window.confirm('저장하시겠습니까?')) return false;\n    // switch (step) {\n    // case 1:\n    //   if (validateStep1()) {\n    //     saveStep1Data();\n    //   }\n    //   break;\n    // case 2:\n    //   if (validateStep2()) {\n    //     saveStep2Data();\n    //   }\n    //   break;\n    // default:\n    //   break;\n    // }\n  });\n\n  function updateProgress (step) {\n    window.axios.post('/simple_assignment/progress', {\n      step: step,\n      id: assignmentId\n    })\n      .then(function (response) {\n        activatedStep(step);\n        return true;\n      })\n      .catch(function (error) {\n        console.log(error);\n        return false;\n      });\n  }\n\n  /**\n   * 교육 대상자를 저장한다.\n   */\n  function saveStep1Data () {\n    btnSaveSimpleAssign.prop('disabled', true);\n\n    var formData = new window.FormData();\n    formData.append('upload_type', $('input[name=\\'upload_type\\']').val());\n    formData.append('upload_employee_ids', $('input[name=\\'upload_employee_ids\\']').val());\n    formData.append('file-excel', document.getElementById('UploadExcelFile').files[0]);\n    formData.append('group_name', '간편배정');\n    formData.append('redirect', false);\n    formData.append('id', assignmentId);\n    formData.append('log_bind_user_id', $('#log_bind_user_id').val());\n    formData.append('edu_id', $('#edu_id').val());\n    formData.append('start_dt', $('input[name=\\'start_dt\\']').val());\n    formData.append('finish_dt', $('input[name=\\'finish_dt\\']').val());\n    formData.append('training_edu_id', $('#training_edu_id').val());\n\n    window.axios.post('/assignment/upload', formData)\n      .then(function (res) {\n        if (res.data) {\n          btnSaveSimpleAssign.prop('disabled', false);\n\n          if (res.data.success !== false) {\n            $('#log_bind_user_id').val(res.data.logBindUserId);\n            window.alert('교육생을 저장하였습니다.');\n          } else {\n            window.alert('교육생을 저장하지 못하였습니다.');\n            console.log(res.data.message);\n          }\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 교육과정 정보, 포인트 및 교육기간 정보를 저장한다.\n   */\n  function saveStep2Data () {\n    var data = {\n      'name': $('input[name=\\'course_name\\']').val(),\n      'desc': window.tinymce.get('input-course-desc').getContent({\n        format: 'raw'\n      }),\n      'complete_point': $('input[name=\\'complete_point\\']').val(),\n      'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n      'test_point': $('input[name=\\'test_point\\']').val(),\n      'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n      'speed_point': $('input[name=\\'speed_point\\']').val(),\n      'reps_point': $('input[name=\\'reps_point\\']').val(),\n      'start_dt': $('input[name=\\'start_dt\\']').val(),\n      'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n      'assigment_id': assignmentId,\n      'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n      'edu_id': $('#edu_id').val(),\n      'edu_tags': $('#eduTags').tagit('assignedTags'),\n      'is_existed_edu': $('#edu_id').data('existed'),\n      'log_bind_user_id': $('#log_bind_user_id').val(),\n      'training_edu_id': $('#training_edu_id').val(),\n      'can_replay': $('#can-replay').prop('checked') ? 1 : 0,\n      'can_advance': $('#can-advance').prop('checked') ? 1 : 0\n    };\n\n    // console.log(data);\n    // return false;\n\n    window.axios.post('/education', data)\n      .then(function (res) {\n        // console.log(res);\n        if (res.data) {\n          $('#training_edu_id').val(res.data.trainingEduId);\n          $('#edu_id').val(res.data.eduId);\n          window.alert('교육과정을 저장하였습니다.');\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  function deleteAssignment () {\n    if (!window.confirm('정말 삭제하시겠습니까?')) return false;\n\n    var params = {\n      id: assignmentId,\n      log_bind_user_id: $('#log_bind_user_id').val(),\n      edu_id: $('#edu_id').val()\n    };\n\n    window.axios.delete('/simple_assignment', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('배정내역을 삭제하지 못하였습니다.');\n        } else {\n          window.alert('교육과정을 삭제하였습니다.');\n          window.location.href = '/simple_assignment';\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 1. 교육 대상자 선택\n   */\n  function validateStep1 () {\n    var currentTabId = $('ul.select-employee li.active').children().attr('id');\n    var data = null;\n\n    $('input[name=\\'upload_type\\']').val(currentTabId);\n\n    switch (currentTabId) {\n    case 'employee': // 등록된 직원\n      data = $(':checkbox:checked', tableEmployee.rows({\n        filter: 'applied'\n      }).nodes()).map(function () {\n        return $(this).data('id');\n      }).get().join(', ');\n\n      if (!data) {\n        window.alert('직원을 선택하세요.');\n        return false;\n      }\n\n      $('input[name=\\'upload_employee_ids\\']').val(data);\n      break;\n\n    case 'excel': // 파일업로드\n      if (document.getElementById('UploadExcelFile').files.length === 0) {\n        $('#UploadExcelFile').focus();\n        window.alert('파일을 선택하세요.');\n        return false;\n      }\n      break;\n\n    default:\n      break;\n    }\n\n    return true;\n  }\n\n  /**\n   * 2. 교육과정 입력\n   */\n  function validateStep2 () {\n    var $eduName = $('input[name=\\'course_name\\']');\n    var $eduDescription = $('#input-course-desc').val(); // window.tinymce.activeEditor.getContent();\n\n    if ($eduName.val() === '') {\n      window.alert('교육과정명을 입력하세요.');\n      $eduName.focus();\n      return false;\n    }\n\n    if ($eduDescription === '') {\n      window.alert('교육과정에 대한 설명을 입력하세요.');\n      window.tinymce.execCommand('mceFocus', false, 'input-course-desc');\n      return false;\n    }\n\n    var pointIsValid = true;\n    var pointTotal = 0;\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      // console.log('$(this).val()', checked, $(this).val());\n      if (checked) {\n        if ($(this).val() === '') {\n          window.alert($(this).prop('placeholder') + ' 포인트 점수를 입력하세요.');\n          $(this).focus();\n          pointIsValid = false;\n          return false;\n        } else {\n          pointTotal += parseInt($(this).val());\n        }\n      }\n    });\n\n    // console.log('pointTotal', pointTotal, pointIsValid);\n    if (!pointIsValid) return false;\n    if (pointTotal !== 100) {\n      window.alert('포인트의 합계는 100점이 되어야 합니다.');\n      return false;\n    }\n\n    return true;\n  }\n\n  $('.input-group-addon').children('input:checkbox').on('change', function () {\n    var input = $(this).parent().parent().find('.point-item');\n\n    input.prop('disabled', !$(this).prop('checked'));\n\n    if ($(this).prop('checked')) {\n      input.focus();\n    };\n  });\n\n  $('.point-item').on('keyup', _.debounce(function () {\n    var sum = 0;\n\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      if (checked && $(this).val() !== '' && $(this).val() !== '0') {\n        var point = parseInt($(this).val());\n        sum += point;\n      } else {\n        // $(this).prop('disabled', true);\n        // $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n      }\n    });\n\n    if (sum > 0) {\n      $('.badge').text(sum);\n    }\n\n    if (sum > 100) {\n      window.alert('100점을 초과하였습니다.');\n      return false;\n    }\n  }, 300));\n\n  function getCourseView (data) {\n    return courseView(data);\n  }\n\n  function getSessionView (data) {\n    return sessionView(data);\n  }\n\n  /**\n   * 세션관련정보를 삭제한다.\n   * 주의사항:\n   * 세션과 관련된 일체를 실제 삭제하는 기능이므로, 꼭 필요한 경우에만 사용하도록 할 필요가 있다.\n   * 1. 세션정보(course_list) 삭제\n   * 2. 퀴즈 보기(quiz_option) 삭제\n   * 3. 퀴즈(quiz) 를 삭제한다.\n   * 4. 퀴즈 보기 그룹(quiz_group) 삭제\n   */\n  function deleteSession (params) {\n    window.axios.delete('/course/courselist', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.');\n        } else {\n          window.alert('세션을 삭제하였습니다.');\n          window.location.reload();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * DB 에서 세션 순서를 변경한다.\n   */\n  function makeSessionOrderChangeRequest (session) {\n    return window.axios({\n      method: 'put',\n      url: '/course/courselist',\n      data: {\n        title: session.children('a').data('title'),\n        course_list_id: session.children('a').data('id'),\n        course_list_order: session.index()\n      }\n    });\n  }\n\n  /**\n   * 세션순서를 변경한다.\n   */\n  function changeSessionOrder () {\n    var promises = [];\n    var items = window.$('.session-content > .list-group-item');\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeSessionOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises)\n    .then(window.axios.spread(function (acct, perms) {\n      if (acct.data.success) {\n        window.alert('세션순서를 변경하였습니다.');\n      }\n    }));\n  }\n\n  /**\n   * DB 에서 강의 순서를 변경한다.\n   */\n  function makeCourseOrderChangeRequest (course) {\n    return window.axios({\n      method: 'put',\n      url: '/education/coursegroup',\n      data: {\n        id: course.data('group-id'), // course_group 의 id\n        order: course.index()\n      }\n    });\n  }\n\n  /**\n   * 강의순서를 변경한다.\n   */\n  function changeCourseOrder () {\n    var promises = [];\n    var items = $('#course-list > .panel');\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeCourseOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises)\n    .then(window.axios.spread(function (acct, perms) {\n      if (acct.data.success) {\n        window.alert('강의순서를 변경하였습니다.');\n      }\n    }));\n\n    // window.axios.all(promises).then(function (results) {\n    //   results.forEach(function (response) {\n    //     console.log(response);\n    //   });\n    // });\n  }\n\n  function toggleIcon (e) {\n    $(e.target)\n      .prev('.panel-heading')\n      .find('.more-less')\n      .toggleClass('glyphicon-plus glyphicon-minus');\n\n    // panel-group 에 현재 편집중인 강의 id 를 입력한다.\n    var $panelGroup = $(e.target).parents().find('.panel-group');\n    var selectedCourseId = $(e.target).parents().closest('.panel').data('id');\n\n    if ($panelGroup.data('selected-course-id') !== selectedCourseId) {\n      $panelGroup.data('selected-course-id', selectedCourseId);\n      getSessionList();\n    }\n  }\n\n  function addCourse () {\n    var $modal = $('#registerCourse');\n    var data = {\n      course_name: $modal.find('input[name=\\'course_name\\']').val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find('input[name=\\'teacher_name\\']').val(),\n      edu_id: $('#edu_id').val()\n    };\n\n    window.axios.post('/course', data)\n      .then(function (res) {\n        if (res.data) {\n          if ($('#course-list').children().length === 0) {\n            var currSelector = 'ul.setup-panel li:eq(3)'; // 4. 메세지\n            $(currSelector).removeClass('disabled');\n            updateProgress(4);\n          }\n          $('#course-list').append(getCourseView(res.data));\n          $('.panel').last().data('metadata', res.data);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function updateCourse () {\n    var $modal = $('#modifyCourse');\n    var selectedCourseId = $('.panel-group').data('selected-course-id');\n    var data = {\n      course_id: selectedCourseId,\n      course_name: $modal.find('input[name=\\'course_name\\']').val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find('input[name=\\'teacher_name\\']').val(),\n      course_rate: 0,\n      teacher_rate: 0\n    };\n\n    window.axios.put('/course', data)\n      .then(function (res) {\n        if (res.data) {\n          // console.log(res.data);\n          $('.panel[data-id=' + res.data.course_id + ']').replaceWith(getCourseView(res.data));\n          $('.panel[data-id=' + res.data.course_id + ']').data('metadata', res.data);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function onModifyCourseModalOpen (e) {\n    var data = $(e.relatedTarget).parents().closest('.panel').data('metadata');\n    var $modal = $(this);\n\n    // console.log(data);\n\n    $modal.find('input').val('').end();\n    window.tinymce.activeEditor.setContent('');\n    $modal.find('input[name=\\'course_name\\']').val(data.course_name);\n    $modal.find('input[name=\\'teacher_name\\']').val(data.teacher_name);\n    window.tinymce.get('course_desc').setContent(data.course_desc);\n    $modal.find('[autofocus]').focus();\n  }\n\n  $('#registerCourse').submit(function (e) {\n    e.preventDefault();\n\n    addCourse();\n\n    window.tinymce.execCommand('mceFocus', false, 'course_desc');\n    $(this).modal('toggle');\n  });\n  $('#modifyCourse').submit(function (e) {\n    e.preventDefault();\n\n    updateCourse();\n\n    window.tinymce.execCommand('mceFocus', false, 'course_desc');\n    $(this).modal('toggle');\n  });\n\n  $('.panel-group').on('hidden.bs.collapse', toggleIcon);\n  $('.panel-group').on('shown.bs.collapse', toggleIcon);\n  $('#registerCourse').on('hidden.bs.modal', function () {\n    $(this).find('input').val('').end();\n    window.tinymce.activeEditor.setContent('');\n  });\n  $('#registerCourse').on('shown.bs.modal', function () {\n    $(this).find('[autofocus]').focus();\n  });\n  $('#modifyCourse').on('shown.bs.modal', onModifyCourseModalOpen);\n  // $('#modifyCourse').on('hidden.bs.modal', onModifyCourseModalClose);\n\n  // 비디오 생성하기\n  $('.panel-group').on('click', '.btn-create-video', function (e) {\n    e.preventDefault();\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/video?course_id=' + courseId, 'Video', windowOption);\n  });\n  // 퀴즈 생성하기\n  $('.panel-group').on('click', '.btn-create-quiz', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/quiz?course_id=' + courseId + '&type=QUIZ', 'Quiz', windowOption);\n  });\n  // 파이널테스트 생성하기\n  $('.panel-group').on('click', '.btn-create-final', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/quiz?course_id=' + courseId + '&type=FINAL', 'Final', windowOption);\n  });\n  // 파이널테스트 생성하기\n  $('.panel-group').on('click', '.btn-create-checklist', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/checklist?course_id=' + courseId + '&type=CHECK', 'Checklist', windowOption);\n  });\n  // 세션을 삭제한다.\n  $('.panel-group').on('click', '.btn-delete-session', function (e) {\n    e.preventDefault();\n\n    if (!window.confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var $self = $(this);\n    var params = {};\n    params.course_list_id = $(this).parent('span').data('course-list-id');\n    params.course_list_type = $(this).parent('span').data('type');\n\n    var courselistType = $(this).parent('span').data('type');\n    switch (courselistType) {\n    case 'QUIZ':\n    case 'FINAL':\n      params.quiz_group_id = $(this).data('quiz-group');\n      break;\n    case 'VIDEO':\n      params.video_id = $(this).data('video-id');\n      break;\n    case 'CHECKLIST':\n      params.checklist_group_id = $(this).data('checklist-group');\n      break;\n    default:\n      break;\n    }\n\n    window.axios.delete('/course/courselist', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.');\n        } else {\n          window.alert('세션을 삭제하였습니다.');\n          $self.parents('li').remove();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n\n  // 세션 수정하기\n  $('.panel-group').on('click', '.btn-modify-session', function (e) {\n    e.preventDefault();\n\n    var dataCourseId = $(this).parent('span').data('course-id');\n    var dataCourseListId = $(this).parent('span').data('course-list-id');\n    var dataVideoId = $(this).data('video-id');\n    var dataQuizGroupId = $(this).data('quiz-group');\n    var dataChecklistGroupId = $(this).data('checklist-group');\n    var dataType = $(this).parent('span').data('type'); // VIDEO/QUIZ/FINAL\n\n    if (dataType === 'VIDEO') {\n      Util.createWindowPopup('/course/modify/video?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&video_id=' + dataVideoId, 'Video', windowOption);\n    } else if (dataType === 'QUIZ' || dataType === 'FINAL') {\n      Util.createWindowPopup('/course/modify/quiz?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&type=' + dataType + '&quiz_group_id=' + dataQuizGroupId, 'Quiz', windowOption);\n    } else if (dataType === 'CHECKLIST') {\n      Util.createWindowPopup('/course/modify/checklist?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&type=' + dataType + '&checklist_group_id=' + dataChecklistGroupId, 'Checklist', windowOption);\n    }\n  });\n\n  // 체크리스트 보기\n  $('.panel-group').on('click', '.btn-preview-checklist', function (e) {\n    e.preventDefault();\n    var courseListId = window.$(this).parent('span').data('course-list-id');\n    if (!courseListId) {\n      courseListId = window.$(this).data('id');\n    }\n    Util.createWindowPopup('/course/checklist?course_list_id=' + courseListId, 'Checklist', windowOption);\n  });\n\n  // 퀴즈 풀어보기\n  $('.panel-group').on('click', '.btn-solve-quiz', function (e) {\n    e.preventDefault();\n\n    var quizGroupId = window.$(this).attr('data-quiz-group');\n    var dataTitle = window.$(this).attr('data-title');\n    var dataType = window.$(this).attr('data-type');\n\n    Util.createWindowPopup('/course/quiz?id=' + quizGroupId + '&title=' + dataTitle + '&type=' + dataType, 'Quiz', windowOption);\n  });\n\n  // 비디오 보기\n  $('.panel-group').on('click', '.btn-watch-video', function (e) {\n    e.preventDefault();\n\n    // 비디오 아이디를 추출\n    var videoId = window.$(this).attr('data-video-id');\n    Util.createWindowPopup('/course/video?id=' + videoId, 'Video', windowOption);\n  });\n\n  $('.panel-group').on('click', '.btn-delete-course', function () {\n    if (window.confirm('선택하신 강의를 삭제하시겠습니까?')) {\n      var selectedCourseId = $('.panel-group').data('selected-course-id');\n\n      window.axios.delete('/course/deactivate', {\n        params: {\n          id: selectedCourseId\n        }\n      })\n        .then(function (res) {\n          if (res.data.success) {\n            $('.panel[data-id=' + selectedCourseId + ']').remove();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  });\n\n  btnSendMessage.on('click', function (e) {\n    e.preventDefault();\n\n    var currentTabId = $('ul.select-employee li.active').children().attr('id');\n    var checkedEmployeeIds;\n    switch (currentTabId) {\n    case 'employee':\n      checkedEmployeeIds = window.$(':checkbox:checked',\n          tableEmployee.rows({\n            filter: 'applied'\n          }).nodes()).map(\n          function () {\n            return tableEmployee.row(window.$(this).parents('tr')).data()[4];\n          }\n        ).get().join(',');\n      break;\n    case 'employee-assigned':\n        // checkedEmployeeIds = window.$(':checkbox:checked',\n        //   tableAssignedEmployee.rows({filter: 'applied'}).nodes()).map(\n        //     function () {\n        //       return tableAssignedEmployee.row(window.$(this).parents('tr')).data()['user_phone'];\n        //     }\n        //   ).get().join(',');\n      break;\n    default:\n      break;\n    }\n\n    if (!checkedEmployeeIds) {\n      window.alert('직원을 선택하세요.');\n      return false;\n    }\n\n    var message = messageInput.val().trim();\n    if (message === '') {\n      window.alert('메세지를 입력하세요.');\n      messageInput.focus();\n      return false;\n    }\n\n    if (!window.confirm('메세지를 보내시겠습니까?')) {\n      return false;\n    }\n\n    window.axios({\n      method: 'post',\n      url: '/api/v1/sms/send',\n      data: {\n        phones: checkedEmployeeIds,\n        msg: message\n      }\n    })\n      .then(\n        function (res) {\n          if (res.data.success === true) {\n            window.alert('메세지를 전송하였습니다.');\n          } else {\n            window.alert('알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.');\n          }\n        });\n  });\n\n  messageInput.on('keyup', function (e) {\n    var message = window.$(e.currentTarget).val();\n    var messageBytes = Util.getBytes(message);\n    var remain = 90 - messageBytes;\n\n    // console.log(message);\n    // console.log(Util.getBytes(message));\n    // console.log(remain);\n\n    if (remain < 0) {\n      window.alert('90 Bytes 를 초과할 수 없습니다.');\n      // message = message.substring(0, 90);\n      message = Util.cutBytes(message, 90);\n      window.$(e.currentTarget).val(message);\n      window.$(e.currentTarget).focus();\n      messageBytes = Util.getBytes(message);\n    }\n\n    window.$('.remain-bytes').html(messageBytes + ' / 90 바이트');\n  });\n});\n"],"sourceRoot":"/source/"}