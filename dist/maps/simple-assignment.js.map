{"version":3,"sources":["simple-assignment.js"],"names":["window","requirejs","activatedStep","sessionTemplate","setEmployeeIds","employeeIds","filter","nodes","map","val","$","response","newData","data","courses","pointTotal","checked","find","children","parseInt","table","rows","add","columns","adjust","draw","catch","error","console","getSessionList","tableEmployee","this","get","join","$selectedPanel","parent","selectedCourseId","prop","text","refresh","undefined","sessionLoaded","axios","then","res","getCourseList","html","getSessionView","eduId","session_list","sortable","start","edu_course_list","attr","append","getCourseView","index","update","e","ui","removeAttr","changeSessionOrder","getEduInfo","eduInfo","log","err","empty","sumPoint","education","name","tinymce","activeEditor","setContent","desc","point_complete","point_quiz","point_final","point_reeltime","point_repetition","point_speed","can_replay","id","tableCheckAll","search","modal","preventDefault","$target","activateStep","step","currSelector","nextSelector","removeClass","trigger","btnSaveSimpleAssign","assignmentId","saveStep1Data","formData","FormData","format","document","getElementById","files","post","success","logBindUserId","alert","message","saveStep2Data","deleteAssignment","confirm","getContent","log_bind_user_id","edu_id","reeltime_point","speed_point","delete","params","finish_dt","assigment_id","href","training_edu_id","validateStep1","trainingEduId","location","currentTabId","validateStep2","$eduName","$eduDescription","length","pointIsValid","focus","input","execCommand","each","sum","point","title","session","sessionView","makeSessionOrderChangeRequest","method","addCourse","url","$modal","course_name","course_desc","teacher_name","updateProgress","items","last","promises","push","all","results","forEach","course_id","course_rate","$panelGroup","target","parents","closest","onModifyCourseModalOpen","relatedTarget","submit","updateCourse","toggleIcon","on","teacher_rate","put","replaceWith","courseId","Util","createWindowPopup","end","navListItems","allWells","_","modalAddCourses","tableCheckCourseAll","initDataTable","defaultContent","lengthMenu","buttons","btnDeleteSimpleAssign","className","btnSendMessage","btnApplyEdu","visible","messageInput","courseView","tableEducations","getCoursesToAdd","btnAttachCourses","checkedCourses","Handlebars","compile","courseTemplate","initDateTimePicker","tableCourses","row","click","startDt","numberToadd","course_ids","$btnChangeEduPeriod","moment","i","winpop_listener","$item","addClass","show","bind","activatedPanel","hasClass","hide","toString","debounce","course_list_id","course_list_type","courselistType","windowOption","$self","dataVideoId","dataType","courseListId","checklist_group_id","quizGroupId","dataTitle","remove","videoId","dataQuizGroupId","dataChecklistGroupId","dataCourseId","dataCourseListId","checkedEmployeeIds","msg","trim","phones"],"mappings":"AAAA,YAEAA,QAAOC,WAKL,SACA,+BACA,iCACA,SAAIC,EAAAA,EAAkBC,GAmMtB,QAASC,KACPJ,OAAIK,MAAAA,IAAAA,8BACFC,QACCC,OAASC,EAAAA,WAAIC,SAGhBC,KAAE,SAAAC,GACH,GAAAC,GAAAD,EAAAE,KAAAC,OAGC,IAAIC,EAAAA,OAAJ,EAAA,CAEE,GAAIC,GAAUN,EAAE,sBAAoBO,KAAA,kBAAsBC,WAExDH,GAAAA,QAAcI,OACfC,EAAAC,KAAAC,IAAAV,GAJHQ,EAAAG,QAAAC,SAAAC,UAjBCC,MAAM,SAAUC,GA4BnBC,QAAAD,MAAAA,KAKEE,QAAAA,KADF,GAAAxB,GAAAK,EAAA,oBAAAoB,EAAAT,MAxBIf,OAAQ,YA4BZC,SAAAC,IAAA,WA1BI,MAAOE,GAAEqB,MAAMlB,KAAK,QACnBmB,MAAMC,KAAK,KACdvB,GAAE,qCAAuCD,IAAIJ,GA8B7C,QAAI6B,KA1BJ,GAAInB,GAAa,CAqCTL,OATRA,GAAA,eAAIwB,KAAerB,WACJmB,EAAbD,MAAiBI,SAAaC,KAAAA,sBACtBlB,SAAA,kBAAemB,KAAA,YACL,KAAd3B,EAAcqB,MAAAtB,QACZyB,GAAAA,SAAoBxB,EAAAqB,MAAAtB,UAxB5BC,EAAE,UAAU4B,KAAKvB,GA6BTL,EAgBFkB,QAAAA,GAAAW,GACD,GAzBHH,GAAA1B,EAAA,gBAAAG,KAAA,sBA0BDqB,EAAAxB,EAAA,kBAAA0B,EAAA,UA3BqDI,KAAlDN,EAAerB,KAAK,YAAY4B,eAA+BF,IA8BrEvC,OAAA0C,MAAAV,IAAA,WAAAI,GA5BOO,KAAK,SAAUC,GACVA,EAAI/B,OA8BPgC,EAAiB5B,KAAA,oBAAA6B,KAAAC,GACpBC,aAAQJ,EAAA/B,KAAZoC,gBAEEf,EAAFrB,KAAA,YAAA4B,eAAA,EAEOC,EAAAA,eAAUQ,UAELrC,YAAM,mBACZsC,MAAWtC,SAAKuC,EAAAA,GACZ1C,EAAAqB,MAAAsB,KAAgBC,iBAAOC,EAAc1C,KAAvC2C,UADFC,OAAA,SAAAC,EAAAC,GAHNjD,EAAAqB,MAAA6B,WAAA,kBAYDC,OAEQC,sBAIDpC,MAAMqC,SAAUnB,GA/BhBhB,QAAQoC,IAAIC,KAwCZvD,QAAEmC,KACFnC,GAAAA,GAAEA,EAAA,WAAAD,KA9BRC,GAAE,gBAAgBwD,QAkCZxD,OAAEgC,MAAAV,IAAWnB,cAAgBmC,EAA7B,YA/BHL,KAAK,SAAUC,GAiCZA,EAAA/B,MACAsD,EAAAA,KAAAA,EAAAA,KAAAA,gBAAAA,SAAAA,EAAAA,GACAzD,EAAA,gBAAA4C,OAAAC,EAAA1C,IACAgC,EAAAA,UAAAA,OAAAA,KAAAA,WAAAA,OAIAnB,MAAA,SAAAuC,GACArC,QAAAoC,IAAAC,KAIA,QAAAH,GAAAd,GACAhD,OAAA0C,MAAAV,IAAA,cAAAgB,EAAA,gBACAL,KAAA,SAAAC,GACA,GAAAA,EAAA/B,KAAA,CACA,GAAAkD,GAAAnB,EAAA/B,KAAAuD,UAAA,EAEA1D,GAAA,6BAAAD,IAAAsD,EAAAM,MACArE,OAAAsE,QAAAC,aAAAC,WAAA,IACAxE,OAAAsE,QAAAtC,IAAA,qBAAAwC,WAAAT,EAAAU,MACA/D,EAAA,gCAAAD,IAAAsD,EAAAW,gBACAhE,EAAA,4BAAAD,IAAAsD,EAAAY,YACAjE,EAAA,4BAAAD,IAAAsD,EAAAa,aACAlE,EAAA,gCAAAD,IAAAsD,EAAAc,gBACAnE,EAAA,4BAAAD,IAAAsD,EAAAe,kBACApE,EAAA,6BAAAD,IAAAsD,EAAAgB,aACDrE,EAAA,eAAA2B,KAAA,UAAA,IAAA0B,EAAAiB,YAGDpD,EAAAA,WAAAnB,IAAAsD,EAAAkB,IAjDJvE,EAAA,WAAAG,KAAA,UAAA,KAqDFqE,IAEIC,IAFJzE,EAAA,WAAA0E,MAAA,WA4BIC,MAAAA,SAAFpB,GACIqB,QAAAA,IAAY5E,KAmDd6E,QAAAA,GAAAC,GACD,GAAAC,GAAA,yBAAAtE,SAAAqE,GAAA,GAAA,IANHE,EAAA,mCAAAF,EAAA,IASE9B,GAAE2B,GAAFM,YAAA,YACAJ,EAAAA,GAAAK,QAAA,SAgFI,QAAIhD,GAAU4C,GACZK,OAAAA,MAAAA,KAAAA,+BAnCJL,KAAMA,EAqCFP,GAAAa,IAEE9F,KAAAA,SAAAW,GAEAX,MADDE,GAAMsF,IACLxF,IAED0B,MAAA,SAAAC,GAGJD,MAFEE,SAAAoC,IAAArC,IAEI,IA9BX,QAASoE,KAsCTF,EAAAxD,KAA0B,YAAA,EAEtB,IAAA2D,GAAU,GAAAhG,QAAAiG,QACVD,GAAA1C,OAAQtD,cAAeuE,EAAAA,6BAAwB9D,OAC7CyF,EAAAA,OAAQ,sBAAAxF,EAAA,qCAAAD,OADqCuF,EAFtC1C,OAAA,aAAA6C,SAAAC,eAAA,mBAAAC,MAAA,IAKTL,EAAA1C,OAAA,aAAoB,QACpB0C,EAAA1C,OAAc5C,YAAE,GAChBsF,EAAA1C,OAAc5C,KAAEoF,GAChBE,EAAA1C,OAAA,mBAAoB5C,EAAA,qBAAFD,OAClBuF,EAAA1C,OAAA,SAAiB5C,EAAA,WAAAD,OACjBuF,EAAA1C,OAAc5C,WAAEA,EAAA,0BAVPD,OAWTuF,EAAA1C,OAAc,YAAA5C,EAAA,2BAXLD,OAYTuF,EAAA1C,OAAa5C,kBAAEA,EAAA,oBAZND,OAcTT,OAAA0C,MAAA4D,KAAA,qBAAyBN,GACzBrD,KAAA,SAAYC,GACZA,EAAA/B,OACAgF,EAAsBxD,KAAA,YAAF,IAEN,IAAdO,EAAA/B,KAAgB0F,SAChB7F,EAAA,qBAAiBD,IAAgB4B,EAAlBxB,KAAuB2F,eApBxCxG,OAAAyG,MAAA,mBAuBAzG,OAAAyG,MAAA,qBACA7E,QAAAoC,IAAApB,EAAA/B,KAAA6F,aAKIhF,MAAIkB,SAAUjB,GACZjB,QAAEsD,IAAArC,KAQT,QAAAgF,KAtCC,GAAI9F,IAwCNwD,KAASuC,EAAAA,6BAAoBnG,MAC3BgE,KAAKzE,OAAO6G,QAAQtC,aAAiBuC,YAtCjCZ,OAAQ,QAyCVjB,eADWvE,EAAA,gCAAAD,MAEXsG,WAAAA,EAAAA,4BAFWtG,MAGXuG,WAAUtG,EAAA,4BAAFD,MAHVwG,eAAAvG,EAAA,gCAAAD,MAlCEyG,YAAexG,EAAE,6BAA+BD,MAwClDT,WAAamH,EAAAA,4BAA6B1G,MACxC2G,SAAQA,EAAAA,0BAAAA,MADVC,UAGQ3G,EAAA,2BAAoBD,MACxB6G,aAAczG,EACZb,oBAAaU,EAAA,qCAAbD,MACDuG,OAAMtG,EAAA,WAAAD,MACLT,eAAaU,EAAA,WAAbG,KAAA,WACAb,iBAAgBuH,EAAhB,qBAAuB9G,MACxB+G,gBAAA9G,EAAA,oBAAAD,MATLuE,WAWStE,EAAA,eAAiB2B,KAAA,WAAA,EAAA,EACtBT,YAAYD,EAAZ,gBAAAU,KAAA,WAAA,EAAA,EAnCJrC,QAAO0C,MAAM4D,KAAK,aAAczF,GA0ClC8B,KAAS8E,SAAAA,GAEH5G,EAAOA,OAxCLH,EAAE,oBAAoBD,IAAImC,EAAI/B,KAAK6G,eA0CvChH,EAAA,WAAAD,IAAAmC,EAAA/B,KAAFmC,OAxCMhD,OAAOyG,MAAM,qBA2CF/E,MAAA,SAAAuC,GACfpD,QAAOH,IAAEuD,KAIR,QAAEjC,KAvCL,IAAKhC,OAAO6G,QAAQ,gBAAiB,OAAO,CA0CxC7G,IAAAA,IACAiF,GAAAa,EACDiB,iBAAArG,EAAA,qBAAAD,MAvCDuG,OAAQtG,EAAE,WAAWD,MAGvBT,QAAO0C,MAAMyE,OAAO,sBAyCpBC,OAAKA,IACHzE,KAAIwD,SAASC,GACTzF,EAAAE,KAAA0F,SAGHvG,OAAAyG,MAAA,kBACDzG,OAAA2H,SAAAJ,KAAA,sBAHEvH,OAAOyG,MAAM,wBAMf/E,MAAA,SAAAC,GAzBFC,QAAAoC,IAAArC,KANF,QAAS8F,KAwCT,GAAAG,GAASC,EAAT,gCAA0B3G,WAAAmC,KAAA,MACpByE,EAAAA,IAIF9H,QAzCFU,EAAE,6BAA+BD,IAAImH,GAyCnC5H,GACA8H,IAAAA,WAOA,KANAjH,EAAOH,EAAA,oBAAPoB,EAAAT,MACDf,OAAA,YAtCIC,SAASC,IAAI,WAwCduH,MAAAA,GAAAA,MAAAA,KAAoB,QACtB/H,MAAOyG,KAAM,OAnCX,MAsCHzG,QAAAyG,MAAA,eAtCU,CA0CT/F,GAAA,qCAAgCD,IAAAI,EAChC,MAEA,KAAA,QACE,GAA0B,IAA1BsF,SAAIC,eAAsB,mBAAAC,MAAA2B,OAGxBC,MAFAjI,GAAAA,oBAAakI,QACbxH,OAAE+F,MAAMyB,eACRD,EAQN,OAAA,EAjCF,QAASJ,KAwCP,GAAAC,GAAApH,EAAA,6BACDqH,EAAArH,EAAA,sBAAAD,KAEC,IAAsBS,KAAtB4G,EAAArH,MAGA0H,MAFAnI,QAAImI,MAAU,iBAtCZL,EAASI,SAwCL7F,CAGJ8F,IAAA,KAAAA,EApCA,MAqCDnI,QAAAyG,MAAA,uBAPHzG,OAAAsE,QAAA8D,YAAA,YAAA,EAAA,sBA9BW,CAGT,IAAIH,IAAe,EAwCjBlH,EAAesH,CAiBf,OAhBA3H,GAAA,eAAcA,KAAA,WAGZ4H,GAFEtH,EAAWN,MAAAyB,SAAAlB,KAAX,sBAAqDC,SAAK,kBAAAmB,KAAA,WAErDkG,CAFT,GAGO,KAHP7H,EAGOqB,MAAAtB,MALT,MAMIT,QAAAyG,MAAA/F,EAAAqB,MAAAM,KAAA,eAAA,mBACA3B,EAAAqB,MAAAmG,QACDD,GAAA,GARH,CAWIK,IAASnH,SAAAT,EAAAqB,MAAAtB,YAMXwH,IACD,MAAAlH,IACAf,OAtBHyG,MAAA,4BAhBW,IAiFP5F,QAAAA,GAAMA,GACJ2H,MAAAA,GAAOC,GADH,QAAA1F,GAAAlC,GAHY,MAApB6H,GAAA7H,GA2CD,QAAA8H,GAAAF,GA3CC,MAAOzI,QAAO0C,OA6ChBkG,OAASC,MACPC,IAAIC,qBACJlI,MACEmI,MAAAA,EAAaD,SAAY,KAAAlI,KAAA,SACzBoI,eAAajJ,EAAOsE,SAAQC,KAAf1D,KAA4BiG,MACzCoC,kBAAqBjI,EAAKuC,WASpB9C,QAAAA,KAIFA,IAAAA,GAHEyI,MACDC,EAAApJ,OAAAU,EAAA,uCAEC8C,EAAU6F,EAAZ7F,EAAwB4F,EAAApB,OAAYpF,IACrC0G,EAAAC,KAAAZ,EAAA3I,OAAAU,EAAA0I,EAAA5F,KAIFxD,QAdH0C,MAAA8G,IAAAF,GAAA3G,KAAA,SAAA8G,GAeDA,EAAAC,QAAA,SAAA/I,GA7CKiB,QAAQoC,IAAIrD,OAmDdgJ,QAAAA,GAAWvH,GACX4G,EAAAA,EAAAA,QACAC,KAAAA,kBACAC,KAAAA,cACAU,YAAa,iCA3Cf,IAAIC,GAAcnJ,EAAEgD,EAAEoG,QAAQC,UAAU9I,KAAK,gBA+C7CjB,EAAiBU,EAAAgD,EAAjBoG,QACGnH,UAAKqH,QAAA,UAAenJ,KAAA,KAEjBgJ,GAAAhJ,KAAA,wBAAAuB,IACA1B,EAAEG,KAAA,qBAA6B8I,GAC/BjJ,KAKH,QAVHmI,KAWD,GAAAE,GAAArI,EAAA,mBA/CKG,GAiDNmI,YAASiB,EAAAA,KAAAA,6BAA4BxJ,MACnCwI,YAAeiB,OAAAA,QAAeH,aAAU9I,aACxCiI,aAAeH,EAAf9H,KAAA,8BAAAR,MA/CEuG,OAAQtG,EAAE,WAAWD,MAmDvBsI,QAAO9H,MAAKqF,KAAA,UAAAzF,GACZkI,KAAO9H,SAAK2B,GACZ5C,GAAOsE,EAAAA,KAAP,CACAyE,GAAA,IAAO9H,EAAK,gBAAeiH,WAA3BF,OAAA,CA9CQtH,EA+CT,2BA/CyBiF,YAAY,YAiDpCwD,EAAmBgB,GA9CbzJ,EAAE,gBAAgB4C,OAAOC,EAAcX,EAAI/B,OAiDjDgI,EAAAA,UAAAA,OAAAA,KAAAA,WAAAA,EAAAA,SAGEnH,MAAM0D,SAAMzD,GANhBC,QAAAoC,IAAArC,KAWEyI,QAAAA,KA/CA,GAAIrB,GAASrI,EAAE,iBAiDfV,EAAeoI,EAAAA,gBAAwBvH,KAAO,sBAC5CA,GANJ8I,UAAAvH,EAxCI4G,YAAaD,EAAO9H,KAAK,6BAA+BR,MAiD1DwI,YAAFjJ,OAAqBsE,QAAAC,aAAsB8F,aACzCnB,aAAgBoB,EAAGrJ,KAAA,8BAArBR,MACEmJ,YAAA,EACEW,aAAW,EAGbvK,QAAA0C,MAAA8H,IAAF,UAAwB3J,GACpB8B,KAAM1B,SAAK2B,GADfA,EAAA/B,OAIAH,EAAA,kBAAAkC,EAAA/B,KAAA8I,UAAA,KAAAc,YAAAlH,EAAAX,EAAA/B,OA/CQH,EAAE,kBAAoBkC,EAAI/B,KAAK8I,UAAY,KAAK9I,KAAK,WAAY+B,EAAI/B,SAmDzEwE,MAAAA,SAAF1D,GACI+I,QAAAA,IAAWhK,KAIjBA,QAAEuJ,GAA4BvG,GAC5BA,GAAE2B,GAAAA,EAAAA,EAAAA,eAAF0E,UAAA9I,KAAA,UAAAJ,KAAA,YA/CIkI,EAASrI,EAAEqB,KAkDf4I,GAAKC,KAAAA,SAAAA,IAAkB,IAAAC,MAJzB7K,OAAAsE,QAAAC,aAAAC,WAAA,IAMAuE,EAAA9H,KAAA,6BAAAR,IAAAI,EAAAmI,aACED,EAAA9H,KAAA,8BAA4BR,IAA9BI,EAAmDqI,cACjDxF,OAAE2B,QAAAA,IAAF,eAAAb,WAAA3D,EAAAoI,aA/CAF,EAAO9H,KAAK,eAAeiH,QAp1B7B,GAAI4C,GAAiB9K,OAAAU,EACjBqK,EAAa/K,OAAAgL,EAHblF,EAAepF,EAAE,kBAAkBD,MAKnCwK,EAAAA,EAAkBvK,mBAAtBD,MAHIqK,EAAepK,EAAE,uBAKjBwE,EAAAA,EAAAA,kBAEJ+F,EAAAvK,EAAA,cAEEwE,EACExE,EAAI,cAFRwK,EAAAxK,EAAA,sBAAAO,KAAA,cAOEa,EACI6I,EAAQQ,cAAMC,EAAAA,oBAKlBC,aAIAC,EAAAA,GAAS,GAAA,IAAA,IAXX,EAAA,GAAA,GAAA,GAAA,SAkBEA,EAASX,EAAAQ,cAAAzK,EAAA,sBAAAO,KAAA,mBALXM,UAOIgK,KAAAA,KAAAA,eAA0B,qCAC1B1F,KAAAA,cAAwB2F,UAAA,WACxBC,KAAAA,eAAmBD,UAAA,WACnBE,KAAAA,YAAgBF,UAApB,SAAAG,SAAA,IAhBEN,aAmBEO,EAAAA,GAAAA,GAAAA,IAAiB,IACjBC,EAAAA,GAAAA,GAAAA,GAAa7L,OAEjBsL,aAEEQ,EAAYnB,EAAAQ,cAAAzK,EAAA,mBAAAO,KAAA,eACZ8J,aAjBG,EAAG,GAAI,GAAI,IAAK,IAmBnB,EAAA,GAAA,GAAA,GAAA,OAhBAO,aAuBES,EAAAA,EAAAA,4BADFlG,EAAAnF,EAAA,0BAlBE+K,EAAiB/K,EAAE,qBAsBrBsL,EAAAA,EAAiB1B,gBACf0B,EAAIC,EACFvL,qBAGGkL,EACUlL,EAAA,YAvBfmL,EAAa7L,OAAOkM,WAAWC,QAAQC,GAyBvC1D,EAAIuD,OAAAA,WAAuBE,QAAAhM,GACzBH,EAAa,sHAwVlB,IAtVIU,EAAA,WACDqK,EAAK/K,OArBP2K,EAAK0B,mBAyBHrM,EAAAA,kBACEgH,EAAAA,iBAIAiE,EAAAX,GAAc,gBAAA,SAAA5G,GACZsI,MAtBNA,EAAiB1B,GAAG,QAAS,WA0BrB,GAAA2B,GACApJ,EAAAA,oBAAAA,EAAAA,MAAAA,OAAAA,YAAAA,SAAAA,IAxBF,WA0BE,MAAAyJ,GAAAC,IAAAvM,OAAAU,EAAAqB,MAAAgI,QAAA,OAAAlJ,OAAA,YAEDmB,MARDC,KAQO,KAELL,OAAgBf,KAAhBe,GACD5B,OAAAyG,MAAA,eACF,KAnCLzG,OAAA6G,QAAA,mBAuCEmF,EAAA3J,KAAqBmK,YAAM,OAE3BxM,QAAIyM,MAAAA,KAAY,8BAChBzF,OAAI0F,EAAAA,WAAgBjM,MAxBlBkM,WAAYV,IAEbtJ,KAAK,SAAUC,GA0BhBA,EAAQgK,OACRZ,EAAA3J,KAAA,YAAA,IACI,IAAAO,EAAA/B,KAAA0F,SACFvG,OAAAyG,MAAA,gBAGA5D,IAGAnC,EAAA,cAAA0E,MAAA,UAEEpF,OAAAyG,MAAA,oBACF7E,QAAAoC,IAAApB,EAAA/B,KAAA6F,gBAMAhG,EAAA,qBAAA8L,MAAA,WAlBF,GAAAI,GAAAlM,EAAAqB,MAPF0K,EAAA/L,EAAA,0BAAAD,MAGMiM,EAAchM,EAAE,yBAAyBD,KA2B7CC,IAAiB2H,KAAfqE,EAAoB,OAAA,CAEpBhM,QAAAkM,EAAA/L,KAAA,WACAH,IAAE,OAHJA,EAAA,2BAAAD,IAAAT,OAAA6M,OAAAJ,GAAAnL,IAAAoL,EAAA,KAAAxG,OAAA,oBAKA/B,MANF,KAAA,MAjBIzD,EAAE,2BAA6BD,IAAIT,OAAO6M,OAAOJ,GAASnL,IAAIoL,EAAa,KAAKxG,OAAO,oBA0BzF,MACAxF,KAAE,OACAA,EAAE,2BAAoBD,IAAAT,OAAtB6M,OAA4C3L,GAASI,IAAAoL,EAArD,KAA4ExG,OAAW,oBACvF,MACAxF,KAAE,QAHJA,EAAA,2BAAAD,IAAAT,OAAA6M,OAAAJ,GAAAnL,IAAAoL,EAAA,KAAAxG,OAAA,oBAKA/B,MANF,KAAA,OAjBIzD,EAAE,2BAA6BD,IAAIT,OAAO6M,OAAOJ,GAASnL,IAAIoL,EAAa,KAAKxG,OAAO,wBAiCxFxF,EAAA,yBAAA8L,MAAA,WAPH9L,EAAA,eAAA2H,KAAA,WAhBI3H,EAAEqB,MAAMI,SAASlB,KAAK,sBAAsBC,SAAS,kBAAkBmB,KAAK,WAAW,GA0BvF3B,EAAEqB,MAAAtB,IAAF,GACFoC,EAAAA,MAAAA,KAAAA,YAAAA,KAEDsB,MAGD/D,EAAAA,uBAAAA,MAAAA,WAxBEM,EAAE,eAAe2H,KAAK,WA0BxB3H,EAAAqB,MAAAI,SAAAlB,KAAA,sBAAAC,SAAA,kBAAAmB,KAAA,WAAA,GArHF3B,EAAAqB,MAAAM,KAAA,YAAA,KAyHA8B,MAGIiD,EAAAA,qBAAQ5G,IAAA,WADV,IAAA,GAEIwG,GAAUtG,EAAAqB,MAGR+K,EAAA,EAAUnM,GAAAA,EAAUmM,IACpBlM,IAAAA,EAAUD,QAAcG,GAC5ByE,EAAAuH,KArBEpM,EAAE,WAAWD,QA2BbW,IACAA,EAAAA,cAAAiB,KAAezB,YAAf,IAIDR,IAIF+D,MA0DWnE,OAAA+M,gBAAA,SAAAlM,GACAgB,EAAAhB,IA0HViK,EAAAA,KAAad,QAAQ,WACrBgD,EAAAA,YAAMC,EAAN5L,MACA0J,OAAAA,YACAzF,SAAQ4H,KAAR,UAAAnL,KAAAf,WA9BJkK,EAAoBiC,KAAK,QAAS,WAkClCzM,EAAIR,YAAAA,EAAmBmB,MACrB8D,OAAIiI,YACFA,SAAAA,KAAF,UAAArL,KAAAf,WAGD0K,EAAAyB,KAAA,QAAA,SAAAzJ,GAhCCA,EAAE2B,gBAmCF,IAAII,GAAAA,EAAAA,sBAAeqG,EAA2B3K,MAC9CgE,OAAIO,YAhCDnF,SAASM,KAAK,UAkCjB2B,KAAEiD,EACAC,OAAAA,QAAcE,cAhCZ9B,EAAWd,GAGbhD,OAAOyG,MAAM,kBAqCfqE,EAAIrD,MAAAA,SAAiB/D,GACnBA,EAAA2B,gBACE,IAAAC,GAAKtF,EAAO6G,EAAAA,MAAQxD,KAAA,SADtB2J,EAEOtM,EAAAqB,MAAAiI,QAAA,KAENgD,GAAAK,SAAA,cACD9H,EAAayE,QAAb,MAAArE,YAAA,UACAI,EAAAA,SAAAA,UACDgF,EAAAuC,OAVHhI,EAAA4H,UAYAhN,EAAA,EAAA,CAIA,GAAAkN,GAAA,2BAAAlN,EAAA,GAAAqN,WAAA,GACE7M,GAAA0M,GAAAZ,YAEA9L,GAAA,8BAAqBkF,QAAA,QAcrBlF,GAAA,sBAAA4J,GAAA,QAAA,SAAA5G,GAEA,GALFA,EAAA2B,iBAKEoC,IAAA,CACEpC,GAAAA,EAAAA,WAAF5E,OACA8E,IAAAA,OAAAsB,QAAA,6EAAA,OAAA,MA/BI,KAAK7G,OAAO6G,QAAQ,aAAc,OAAO,CAmC3CtB,GAAA,GADJQ,OAKErF,EAAAA,0BAAE4J,GAAF,QAAoC,SAAK3E,GAD3CjC,EAAA2B,iBA9BEE,EAAa,KAoCb7E,EAAA,sBAAA4J,GAAA,QAAA,SAAA5G,GA/BA,GAgCAA,EAAA2B,iBAhCIwC,IAAiB,CAkCnB,IAAA7H,OAAUwF,QAAO,aAAgBI,OAAQ,CAC3Ce,KACApB,EAAA,MAGA7E,EAAA,0BAAA4J,GAAA,QAAA,SAAA5G,GACAA,EAAA2B,iBACAE,EAAA,KAGA7E,EAAA,sBAAA4J,GAAA,QAAA,SAAA5G,GACAA,EAAA2B,iBACAE,EAAA,KAGA7E,EAAA,0BAAA4J,GAAA,QAAA,SAAA5G,GAnBFA,EAAA2B,iBAZEE,EAAa,KAoCXC,EAAAA,mBAD+C8E,GAAA,mBAAA,WAE/CrF,EAAAA,6BAAIa,KAAAA,KAAAA,YAAAA,wBAAAA,SAAAA,4BAIFpF,EAAA,mBAAA4J,GAAA,mBAAA,WACD5J,EAPH,6BAQ0BO,KAAA,KAAA0E,YAAA,0BAAAsH,SAAA,0BAGvB1B,EAXHjB,GAAA,QAAA1D,GAYDf,EAAAyE,GAAA,QAAA,WAED,GAAA9E,GAAA9E,EAAA,4BAAA8C,QAAA,CAjCE9C,GAAE,QAAU8E,EAAO,gBAAgBI,QAAQ,WAyQ3ClF,EAAA,sBAAmBG,SAAnB,kBAAAyJ,GAAA,SAAA,WACD,GAAAnC,GAAAzH,EAAAqB,MAAAI,SAAAA,SAAAlB,KAAA,cAEDkH,GAAA9F,KAAA,YAAA3B,EAAAqB,MAAAM,KAAA,YArCM3B,EAAEqB,MAAMM,KAAK,YACf8F,EAAMD,UAIVxH,EAAE,eAAe4J,GAAG,QAASU,EAAEwC,SAAS,WACtC,GAAIlF,GAAM,CAiBV,IAwBAtI,EAAAA,eAAamH,KAAO,WAApB,GACUC,EAAAA,MAAAA,SAAAA,KAAAA,sBAAAA,SAAAA,kBAAAA,KAAAA,YAEkB,KAApB1G,EAAUC,MAAAA,OAAU,MAAAD,EAAAqB,MAAAtB,MAAA,CACxB,GAAKE,GAASE,SAAK0F,EAAAA,MAAS9F,MAC1BT,IAAOyG,KALb6B,EAAA,GAcD5H,EAAA,UAAA4B,KAAAgG,GAtCKA,EAAM,IA2CZ,MA1CItI,QAAOyG,MAAM,mBA0CRkC,GAELC,MA2JHlI,EALD,mBAAAyJ,OAAA,SAAAzG,GAMAA,EAAA2B,iBAEE3B,IAEA1D,OAAI0K,QAAWhK,YAAA,YAAa,EAA5B,eACAiK,EAAAA,MAAKC,MAAAA,YAEPlK,EAAA,iBAAAyJ,OAAA,SAAAzG,GACEA,EAAA2B,iBA9CA+E,IAkDEpK,OAAAsE,QAAA8D,YAAA,YAAA,EAAA,eACD1H,EAAAqB,MAAAqD,MAAA,YAGD1E,EAAA,gBAAA4J,GAAA,qBAAAD,GACAjD,EAAAA,gBAAOqG,GAAAA,oBAAgCpD,GACvCjD,EAAAA,mBAAOsG,GAAAA,kBAAkC,WA/CzChN,EAAEqB,MAAMd,KAAK,SAASR,IAAI,IAAIoK,MAiD9B7K,OAAI2N,QAAAA,aAAiBnJ,WAAe,MAEpC9D,EAAA,mBAAA4J,GAAA,iBAAA,WACA5J,EAAAqB,MAAKd,KAAA,eAALiH,UAEExH,EAAA,iBAAA4J,GAAA,iBAAAL,GAIFvJ,EAAA,gBAAK4J,GAAL,QAAA,oBAAA,SAAA5G,GACE0D,EAAAA,gBACA,IAAAsD,GAAAhK,EAAAqB,MAAAsB,KAAA,iBACFsH,GAAAC,kBAAA,kCAAAF,EAAA,QAAAkD,KA7CFlN,EAAE,gBAAgB4J,GAAG,QAAS,mBAAoB,SAAU5G,GAiD1D1D,EAAAA,gBAA0C,IAGvC2C,GAAKjC,EAAAqB,MAAUpB,KAAU,iBACxBgK,GAAAC,kBAAmBrE,iCAASmE,EAAA,aAAA,OAAAkD,KAG1B5N,EAAAA,gBAAAsK,GAAa,QAAA,oBAAb,SAAA5G,GACAmK,EAAAA,gBAEH,IACAnM,GAAMhB,EAAAqB,MAAUJ,KAAO,iBACtBC,GAAAA,kBAAA,iCAAA8I,EAAA,cAAA,QAAAkD,KA/CNlN,EAAE,gBAAgB4J,GAAG,QAAS,wBAAyB,SAAU5G,GAmDjEA,EAAA2B,gBAEE3B,IAAE2B,GAAAA,EAAFtD,MAAAsB,KAAA,iBAjDAsH,GAAKC,kBAAkB,sCAAwCF,EAAW,cAAe,YAAakD,KAqDtGlN,EAAA,gBAAIoN,GAAcpN,QAAQG,sBAA1B,SAAA6C,GAGA,GAFAA,EAAA2B,kBAEI0I,OAAAA,QAAa,iCAjDf,OAAO,CAqDR,IAFDF,GAEWE,EAAAA,MACTpD,IA7CF,QA8CCvD,EAAMqG,eAAiB/M,EAAAqB,MAAAI,OAAa,QAAAtB,KAAA,kBACnC8J,EAAKC,iBAAkBlK,EAAAqB,MAAAI,OAAA,QAAAtB,KAAA,QAf3BH,EAAAqB,MAAAI,OAAA,QAAAtB,KAAA,SAmBA,IAAA,OACE,IAAA,QACEwE,EAAAA,cAAF3E,EAAAqB,MAAAlB,KAAA,aACA,MACA,KAAKmN,QACHA,EAAAA,SAAehO,EAAAA,MAASa,KAAMA,WAC/B,MACD8J,KAAKC,YANPxD,EAAA6G,mBAAAvN,EAAAqB,MAAAlB,KAAA,mBAaEb,OAAIkO,MAAAA,OAAclO,sBAClBoH,OAAI+G,IAhDDxL,KAAK,SAAUhC,GAmDbiK,EAAAA,KAAkBrE,SAGzBvG,OAAAyG,MAAA,gBACEoH,EAAA9D,QAAmB,MAArBqE,UAXApO,OAAAyG,MAAA,mDAcE/E,MAAA,SAAAC,GACI0M,QAAAA,IAAUrO,OAKdU,EAAA,gBAAWmG,GAAQ,QAAA,sBAAuB,SAAAnD,GACxCA,EAAA2B,gBAEArF,IAAAA,GAAamH,EAAbpF,MAAoBI,OAAA,QAApBtB,KAA0C,aACxCuG,EAAQ1G,EAAAqB,MAAAI,OAAA,QAAAtB,KAAA,kBACNoE,EAAI7C,EAAAA,MAAAA,KAAAA,YADEkM,EAAA5N,EAAAqB,MAAAlB,KAAA,cADV0N,EAKuB7N,EAAAqB,MAAAlB,KAAA,mBACnBkN,EAAQlN,EAAK0F,MAAAA,OAAS,QAAA1F,KAAA,OAErB,WAAAkN,EACFpD,EACAjJ,kBAAgBC,kCAAO6M,EAAA,mBAAAC,EAAA,aAAAX,EAAA,QAAAF,GACtB,SAAAhM,GAAA,UAAAmM,EACDpD,EAZHC,kBAAA,iCAAA4D,EAAA,mBAAAC,EAAA,SAAAV,EAAA,kBAAAO,EAAA,OAAAV,GAaD,cAAAG,GAjBHpD,EAAAC,kBAAA,sCAAA4D,EAAA,mBAAAC,EAAA,SAAAV,EAAA,uBAAAQ,EAAA,YAAAX,KAuBElN,EAAA,gBAAIkH,GAAelH,QAAE,yBAAgCQ,SAAWmC,GAChEK,EAAA2B,gBACA,IAAA2I,GAAQpG,OAARlH,EAAAqB,MAAAI,OAAA,QAAAtB,KAAA,iBACAmN,KACEU,EAAAA,OAAAA,EAAqB1O,MAAOU,KAAE,OACPiK,EAAnBC,kBAGA,oCAAYoD,EAAA,YAAAJ,KAKlBlN,EAAA,gBAAK4J,GAAA,QAAL,kBAAA,SAAA5G,GACIA,EAAA2B,gBAEA,IAAA6I,GAAAlO,OAAAU,EAAAqB,MAAAsB,KAAA,mBACA8K,EAAAnO,OAAAU,EAAAqB,MAAAsB,KAAA,cACA0K,EAAA/N,OAAAU,EAAAqB,MAAAsB,KAAA,YAEFsH,GAAAC,kBAAA,mBAAAsD,EAAA,UAAAC,EAAA,SAAAJ,EAAA,OAAAH,KAnDJlN,EAAE,gBAAgB4J,GAAG,QAAS,mBAAoB,SAAU5G,GAwD1DA,EAAA2B,gBAGC,IAAAgJ,GAAArO,OAAAU,EAAAqB,MAAAsB,KAAA,gBAtDDsH,GAAKC,kBAAkB,oBAAsByD,EAAS,QAAST,KA0D7D5N,EAAAA,gBAAasK,GAAA,QAAb,qBAAA,WACAsB,GAAAA,OAAAA,QAAa1D,sBAAb,CACA,GAAA9F,GAAA1B,EAAA,gBAAAG,KAAA,qBArDAb,QAAO0C,MAAMyE,OAAO,sBAwDlBC,QACFnC,GAAO7C,KAGTpC,KAAO0C,SAAME,GACHA,EAAA/B,KADG0F,SAEN7F,EAAA,kBAFM0B,EAAA,KAAAgM,WAKTO,MAAKjI,SAAAA,GAFD9E,QAAAoC,IAAArC,QAUA3B,EAAOyG,GAAP,QAAa,SAAA/C,GACdA,EAAA2B,gBA1DT,IA3gCFqJ,GA2gCE9G,EAAAlH,EAAA,gCAAAQ,WAAAmC,KAAA,KAKE,QAAQuE,GACR,IAAK,WACH8G,EAAqB1O,OAAOU,EAAE,oBAC1BoB,EAAcT,MACZf,OAAQ,YACPC,SAASC,IACZ,WACE,MAAOsB,GAAcyK,IAAIvM,OAAOU,EAAEqB,MAAMgI,QAAQ,OAAOlJ,OAAO,KAEhEmB,MAAMC,KAAK,KAcjB,IAAKyM,EAEH,MADA1O,QAAOyG,MAAM,eACN,CAGT,IAAIC,GAAUkF,EAAanL,MAAMmO,MACjC,OAAgB,KAAZlI,GACF1G,OAAOyG,MAAM,eACbmF,EAAa1D,SACN,KAGJlI,OAAO6G,QAAQ,sBAIpB7G,QAAO0C,OACLkG,OAAQ,OACRE,IAAK,mBACLjI,MACEgO,OAAQH,EACRC,IAAKjI,KAGN/D,KACC,SAAUC,IACiB,IAArBA,EAAI/B,KAAK0F,QACXvG,OAAOyG,MAAM,iBAEbzG,OAAOyG,MAAM","file":"simple-assignment.js","sourcesContent":["'use strict';\n\nwindow.requirejs([\n  'common',\n  'text!../course.template.html',\n  'text!../session.template.html'\n], function (Util, courseTemplate, sessionTemplate) {\n  var $ = undefined || window.$;\n  var _ = undefined || window._;\n  var assignmentId = $('#assignment_id').val();\n  var activatedStep = $('#activated_step').val();\n  var navListItems = $('ul.setup-panel li a');\n  var allWells = $('.setup-content');\n\n  var modalAddCourses = $('#addCourse');\n\n  var tableCheckAll = $('#check-all');\n  var tableCheckCourseAll = $('#js--formAddCourse').find('#check-all');\n  // var tableCourse = Util.initDataTable($('#table_course'));\n  var tableEmployee = Util.initDataTable($('#table_employee'), {\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ]\n  });\n  var tableCourses = Util.initDataTable($('#js--formAddCourse').find('#table_courses'), {\n    'columns': [\n      { 'data': null, defaultContent: '<input type=\"checkbox\",value=\"\">' },\n      { 'data': 'course_name', className: 'center' },\n      { 'data': 'teacher_name', className: 'center' },\n      { 'data': 'course_id', className: 'center', visible: false }\n    ],\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ],\n    buttons: []\n  });\n  var tableEducations = Util.initDataTable($('#js--formAddEdu').find('#table_edu'), {\n    'lengthMenu': [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, '전체']\n    ],\n    buttons: []\n  });\n  var btnDeleteSimpleAssign = $('#js-delete-simple-assign');\n  var btnSaveSimpleAssign = $('#js-save-simple-assign');\n  var btnSendMessage = $('.btn-send-message');\n  var btnApplyEdu = $('#btnApplyEdu');\n  var btnAttachCourses = $('#btnAttachCourses');\n\n  var messageInput = $('.message');\n  var courseView = window.Handlebars.compile(courseTemplate);\n  var sessionView = window.Handlebars.compile(sessionTemplate);\n  var windowOption = 'scrollbars=yes, toolbar=no, location=no, status=no, menubar=no, resizable=yes, width=1040, height=760, left=0, top=0';\n\n  $(function () {\n    allWells.hide();\n\n    // DateTimePicker 설정\n    Util.initDateTimePicker(\n      $('.date#start_dt'),\n      $('.date#end_dt')\n    );\n\n    modalAddCourses.on('show.bs.modal', function (e) {\n      getCoursesToAdd();\n    });\n\n    btnAttachCourses.on('click', function () {\n      var checkedCourses =\n        $(':checkbox:checked', tableCourses.rows({filter: 'applied'}).nodes()).map(\n          function () {\n            return tableCourses.row(window.$(this).parents('tr')).data()['course_id'];\n          }\n        ).get().join(', ');\n\n      if (checkedCourses === '') {\n        window.alert('강의를 선택하세요.');\n        return false;\n      }\n      if (!window.confirm('강의를 추가하시겠습니까?')) return false;\n\n      btnAttachCourses.prop('disabled', true);\n\n      window.axios.post('/simple_assignment/courses', {\n        edu_id: $('#edu_id').val(),\n        course_ids: checkedCourses\n      })\n      .then(function (res) {\n        if (res.data) {\n          btnAttachCourses.prop('disabled', false);\n          if (res.data.success !== false) {\n            window.alert('강의를 추가하였습니다.');\n\n            // 강의목록 새로고침\n            getCourseList();\n\n            // 모달창 종료\n            $('#addCourse').modal('hide');\n          } else {\n            window.alert('강의를 추가하지 못하였습니다.');\n            console.log(res.data.message);\n          }\n        }\n      });\n    });\n\n    $('.education-period').click(function () {\n      var $btnChangeEduPeriod = $(this);\n      var startDt = $('input[name=\\'start_dt\\']').val();\n      var numberToadd = $('#education-add-number').val();\n\n      if (numberToadd === '') return false;\n\n      switch ($btnChangeEduPeriod.data('period')) {\n      case 'hour':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'h').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'day':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'd').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'week':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'w').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'month':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'M').format('YYYY-MM-DD HH:mm'));\n        break;\n      case 'year':\n        $('input[name=\\'finish_dt\\']').val(window.moment(startDt).add(numberToadd, 'y').format('YYYY-MM-DD HH:mm'));\n        break;\n\n      default:\n        break;\n      }\n    });\n\n    $('#deselect-point-items').click(function () {\n      $('.point-item').each(function () {\n        $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n        $(this).val(0);\n        $(this).prop('disabled', true);\n      });\n      sumPoint();\n    });\n\n    $('#select-point-items').click(function () {\n      $('.point-item').each(function () {\n        $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', true);\n        // $(this).val(0);\n        $(this).prop('disabled', false);\n      });\n      sumPoint();\n    });\n\n    $('ul.setup-panel li').map(function () {\n      let $item = $(this);\n\n      for (var i = 2; i <= activatedStep; i++) {\n        if (i === $item.index() + 1) {\n          activateStep(i);\n        }\n      }\n    });\n\n    if ($('#edu_id').val()) {\n      getCourseList();\n      $('#btnGetEdu').prop('disabled', true);\n    }\n\n    // 교육대상자 id 조회\n    setEmployeeIds();\n\n    // 포인트 합계 계산\n    sumPoint();\n  });\n\n  // 간편배정 시 추가할 강의목록 (현재 매칭된 교육과정 외 강의목록을 불러온다.)\n  function getCoursesToAdd () {\n    window.axios.get('/simple_assignment/courses', {\n      params: {\n        edu_id: $('#edu_id').val()\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.courses;\n      // console.log(newData);\n\n      if (newData.length > 0) {\n        // btnSaveAdminOffices.prop('disabled', false);\n        var table = $('#js--formAddCourse').find('#table_courses').DataTable();\n\n        table.clear().draw();\n        table.rows.add(newData);\n        table.columns.adjust().draw();\n      } else {\n        // btnSaveOfficeBranches.prop('disabled', true);\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  }\n\n  // 교육대상자 id 조회\n  function setEmployeeIds () {\n    var employeeIds = $(':checkbox:checked', tableEmployee.rows({\n      filter: 'applied'\n    }).nodes()).map(function () {\n      return $(this).data('id');\n    }).get().join(', ');\n    $('input[name=\\'upload_employee_ids\\']').val(employeeIds);\n  }\n\n  function sumPoint () {\n    var pointTotal = 0;\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      if (checked && $(this).val() !== '') {\n        pointTotal += parseInt($(this).val());\n      }\n    });\n\n    $('.badge').text(pointTotal);\n    return pointTotal;\n  }\n\n  /**\n   * 윈도우 팝업창에서의 저장 작업 완료 시 호출된다.\n   * @data: 갱신여부를 반환한다. true 일 경우 세션정보를 갱신한다.\n   */\n  window.winpop_listener = function (data) {\n    getSessionList(data);\n  };\n\n  /**\n   * 세션목록 조회\n   * 처음 강의를 열었을 때와 세션정보가 변경되는 경우만 세션 정보를 갱신한다.\n   */\n  function getSessionList (refresh) {\n    var selectedCourseId = $('.panel-group').data('selected-course-id');\n    var $selectedPanel = $('.panel[data-id=' + selectedCourseId + ']');\n\n    if ($selectedPanel.data('metadata').sessionLoaded === undefined || refresh) {\n      window.axios.get('/course/' + selectedCourseId)\n        .then(function (res) {\n          if (res.data) {\n            $selectedPanel.find('.session-content').html(getSessionView({\n              session_list: res.data.session_list\n            }));\n            $selectedPanel.data('metadata').sessionLoaded = true;\n\n            $('.list-group').sortable({\n              connectWith: '.list-group-item',\n              start: function (e, ui) {\n                $(this).attr('data-previndex', ui.item.index());\n              },\n              update: function (e, ui) {\n                // var newIndex = ui.item.index();\n                // var oldIndex = window.$(this).attr('data-previndex');\n                // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n                $(this).removeAttr('data-previndex');\n                changeSessionOrder();\n              }\n            }).disableSelection();\n          }\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    }\n  }\n\n  /**\n   * 강의목록 조회\n   */\n  function getCourseList () {\n    var eduId = $('#edu_id').val();\n\n    $('#course-list').empty();\n\n    window.axios.get('/education/' + eduId + '/courses')\n      .then(function (res) {\n        if (res.data) {\n          $.each(res.data.edu_course_list, function (index, data) {\n            $('#course-list').append(getCourseView(data));\n            $('.panel').last().data('metadata', data);\n          });\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  function getEduInfo (eduId) {\n    window.axios.get('/education/' + eduId + '/pointweight')\n      .then(function (res) {\n        if (res.data) {\n          const eduInfo = res.data.education[0];\n\n          $('input[name=\\'course_name\\']').val(eduInfo.name);\n          window.tinymce.activeEditor.setContent('');\n          window.tinymce.get('input-course-desc').setContent(eduInfo.desc);\n          $('input[name=\\'complete_point\\']').val(eduInfo.point_complete);\n          $('input[name=\\'quiz_point\\']').val(eduInfo.point_quiz);\n          $('input[name=\\'test_point\\']').val(eduInfo.point_final);\n          $('input[name=\\'reeltime_point\\']').val(eduInfo.point_reeltime);\n          $('input[name=\\'reps_point\\']').val(eduInfo.point_repetition);\n          $('input[name=\\'speed_point\\']').val(eduInfo.point_speed);\n          $('#can-replay').prop('checked', eduInfo.can_replay === 1);\n\n          $('#edu_id').val(eduInfo.id);\n          $('#edu_id').data('existed', 'Y');\n\n          // 포인트 합계 계산\n          sumPoint();\n          // 강의 목록 조회\n          getCourseList();\n          // 모달창 종료\n          $('#addEdu').modal('hide');\n\n          // $(function () {\n          //   $('#js--formAddEdu').modal('hide');\n          // });\n\n          // 'name': $('input[name=\\'course_name\\']').val(),\n          // 'desc': window.tinymce.activeEditor.getContent({format: 'raw'}),\n          // 'complete_point': $('input[name=\\'complete_point\\']').val(),\n          // 'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n          // 'test_point': $('input[name=\\'test_point\\']').val(),\n          // 'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n          // 'speed_point': $('input[name=\\'speed_point\\']').val(),\n          // 'reps_point': $('input[name=\\'reps_point\\']').val(),\n          // 'start_dt': $('input[name=\\'start_dt\\']').val(),\n          // 'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n          // 'assigment_id': assignmentId,\n          // 'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n          // 'edu_id': $('#edu_id').val(),\n          // 'log_bind_user_id': $('#log_bind_user_id').val(),\n          // 'training_edu_id': $('#training_edu_id').val(),\n          // 'can_replay': $('#can-replay').prop('checked') ? 1 : 0\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  tableCheckAll.bind('click', function () {\n    $(':checkbox', tableEmployee.rows({\n      search: 'applied'\n    }).nodes()).prop('checked', this.checked);\n  });\n\n  tableCheckCourseAll.bind('click', function () {\n    $(':checkbox', tableCourses.rows({\n      search: 'applied'\n    }).nodes()).prop('checked', this.checked);\n  });\n\n  btnApplyEdu.bind('click', function (e) {\n    e.preventDefault();\n\n    var eduId = $('input:first:checked', tableEducations.rows({\n      search: 'applied'\n    }).nodes()).data('id');\n    if (eduId !== undefined) {\n      if (window.confirm('적용하시겠습니까?')) {\n        getEduInfo(eduId);\n      }\n    } else {\n      window.alert('교육과정을 선택하세요.');\n    }\n  });\n\n  navListItems.click(function (e) {\n    e.preventDefault();\n    var $target = $($(this).attr('href'));\n    var $item = $(this).closest('li');\n\n    if (!$item.hasClass('disabled')) {\n      navListItems.closest('li').removeClass('active');\n      $item.addClass('active');\n      allWells.hide();\n      $target.show();\n    }\n  });\n\n  if (activatedStep > 1) {\n    var activatedPanel = 'ul.setup-panel li a:eq(' + (activatedStep - 1).toString() + ')';\n    $(activatedPanel).click();\n  } else {\n    $('ul.setup-panel li.active a').trigger('click');\n  }\n\n  function activateStep (step) {\n    var currSelector = 'ul.setup-panel li:eq(' + (parseInt(step) - 1) + ')';\n    var nextSelector = 'ul.setup-panel li a[href=\"#step-' + step + '\"]';\n\n    $(currSelector).removeClass('disabled');\n    $(nextSelector).trigger('click');\n\n    // updateProgress(step);\n  }\n\n  // 1. 교육생 설정\n  $('.step1 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    if (validateStep1()) {\n      if ($('#edu_id').val()) {\n        if (!window.confirm('엑셀 업로드 시 이전 배정내역은 모두 취소되며,\\n배정을 취소하는 경우 학습이력이 모두 초기화 됩니다.\\n그래도 계속 하시겠습니까?')) return false;\n      } else {\n        if (!window.confirm('저장하시겠습니까?')) return false;\n      }\n      activateStep(2);\n      saveStep1Data();\n    }\n  });\n  $('.step2 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(1);\n  });\n  // 2. 교육과정 개설\n  $('.step2 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    if (validateStep2()) {\n      if (!window.confirm('저장하시겠습니까?')) return false;\n      saveStep2Data();\n      activateStep(3);\n    }\n  });\n  $('.step3 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(2);\n  });\n  // 3. 강의 개설\n  $('.step3 > .next > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(4);\n    // updateProgress(3);\n  });\n  $('.step4 > .previous > a').on('click', function (e) {\n    e.preventDefault();\n    activateStep(3);\n  });\n\n  $('.panel-collapse').on('hide.bs.collapse', function () {\n    $('.panel-collapse-clickable').find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\n  });\n\n  $('.panel-collapse').on('show.bs.collapse', function () {\n    $('.panel-collapse-clickable').find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\n  });\n\n  btnDeleteSimpleAssign.on('click', deleteAssignment);\n  btnSaveSimpleAssign.on('click', function () {\n    // updateProgress($('ul.setup-panel li.active').index() + 1);\n    var step = $('ul.setup-panel li.active').index() + 1;\n\n    $('.step' + step + ' > .next > a').trigger('click');\n    // if (!window.confirm('저장하시겠습니까?')) return false;\n    // switch (step) {\n    // case 1:\n    //   if (validateStep1()) {\n    //     saveStep1Data();\n    //   }\n    //   break;\n    // case 2:\n    //   if (validateStep2()) {\n    //     saveStep2Data();\n    //   }\n    //   break;\n    // default:\n    //   break;\n    // }\n  });\n\n  function updateProgress (step) {\n    window.axios.post('/simple_assignment/progress', {\n      step: step,\n      id: assignmentId\n    })\n      .then(function (response) {\n        activatedStep(step);\n        return true;\n      })\n      .catch(function (error) {\n        console.log(error);\n        return false;\n      });\n  }\n\n  /**\n   * 교육 대상자를 저장한다.\n   */\n  function saveStep1Data () {\n    btnSaveSimpleAssign.prop('disabled', true);\n\n    var formData = new window.FormData();\n    formData.append('upload_type', $('input[name=\\'upload_type\\']').val());\n    formData.append('upload_employee_ids', $('input[name=\\'upload_employee_ids\\']').val());\n    formData.append('file-excel', document.getElementById('UploadExcelFile').files[0]);\n    formData.append('group_name', '간편배정');\n    formData.append('redirect', false);\n    formData.append('id', assignmentId);\n    formData.append('log_bind_user_id', $('#log_bind_user_id').val());\n    formData.append('edu_id', $('#edu_id').val());\n    formData.append('start_dt', $('input[name=\\'start_dt\\']').val());\n    formData.append('finish_dt', $('input[name=\\'finish_dt\\']').val());\n    formData.append('training_edu_id', $('#training_edu_id').val());\n\n    window.axios.post('/assignment/upload', formData)\n      .then(function (res) {\n        if (res.data) {\n          btnSaveSimpleAssign.prop('disabled', false);\n\n          if (res.data.success !== false) {\n            $('#log_bind_user_id').val(res.data.logBindUserId);\n            window.alert('교육생을 저장하였습니다.');\n          } else {\n            window.alert('교육생을 저장하지 못하였습니다.');\n            console.log(res.data.message);\n          }\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 교육과정 정보, 포인트 및 교육기간 정보를 저장한다.\n   */\n  function saveStep2Data () {\n    var data = {\n      'name': $('input[name=\\'course_name\\']').val(),\n      'desc': window.tinymce.activeEditor.getContent({\n        format: 'raw'\n      }),\n      'complete_point': $('input[name=\\'complete_point\\']').val(),\n      'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n      'test_point': $('input[name=\\'test_point\\']').val(),\n      'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n      'speed_point': $('input[name=\\'speed_point\\']').val(),\n      'reps_point': $('input[name=\\'reps_point\\']').val(),\n      'start_dt': $('input[name=\\'start_dt\\']').val(),\n      'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n      'assigment_id': assignmentId,\n      'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n      'edu_id': $('#edu_id').val(),\n      'is_existed_edu': $('#edu_id').data('existed'),\n      'log_bind_user_id': $('#log_bind_user_id').val(),\n      'training_edu_id': $('#training_edu_id').val(),\n      'can_replay': $('#can-replay').prop('checked') ? 1 : 0,\n      'can_advance': $('#can-advance').prop('checked') ? 1 : 0\n    };\n\n    // console.log(data);\n    // return false;\n\n    window.axios.post('/education', data)\n      .then(function (res) {\n        // console.log(res);\n        if (res.data) {\n          $('#training_edu_id').val(res.data.trainingEduId);\n          $('#edu_id').val(res.data.eduId);\n          window.alert('교육과정을 저장하였습니다.');\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  function deleteAssignment () {\n    if (!window.confirm('정말 삭제하시겠습니까?')) return false;\n\n    var params = {\n      id: assignmentId,\n      log_bind_user_id: $('#log_bind_user_id').val(),\n      edu_id: $('#edu_id').val()\n    };\n\n    window.axios.delete('/simple_assignment', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('배정내역을 삭제하지 못하였습니다.');\n        } else {\n          window.alert('교육과정을 삭제하였습니다.');\n          window.location.href = '/simple_assignment';\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 1. 교육 대상자 선택\n   */\n  function validateStep1 () {\n    var currentTabId = $('ul.select-employee li.active').children().attr('id');\n    var data = null;\n\n    $('input[name=\\'upload_type\\']').val(currentTabId);\n\n    switch (currentTabId) {\n    case 'employee': // 등록된 직원\n      data = $(':checkbox:checked', tableEmployee.rows({\n        filter: 'applied'\n      }).nodes()).map(function () {\n        return $(this).data('id');\n      }).get().join(', ');\n\n      if (!data) {\n        window.alert('직원을 선택하세요.');\n        return false;\n      }\n\n      $('input[name=\\'upload_employee_ids\\']').val(data);\n      break;\n\n    case 'excel': // 파일업로드\n      if (document.getElementById('UploadExcelFile').files.length === 0) {\n        $('#UploadExcelFile').focus();\n        window.alert('파일을 선택하세요.');\n        return false;\n      }\n      break;\n\n    default:\n      break;\n    }\n\n    return true;\n  }\n\n  /**\n   * 2. 교육과정 입력\n   */\n  function validateStep2 () {\n    var $eduName = $('input[name=\\'course_name\\']');\n    var $eduDescription = $('#input-course-desc').val(); // window.tinymce.activeEditor.getContent();\n\n    if ($eduName.val() === '') {\n      window.alert('교육과정명을 입력하세요.');\n      $eduName.focus();\n      return false;\n    }\n\n    if ($eduDescription === '') {\n      window.alert('교육과정에 대한 설명을 입력하세요.');\n      window.tinymce.execCommand('mceFocus', false, 'input-course-desc');\n      return false;\n    }\n\n    var pointIsValid = true;\n    var pointTotal = 0;\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      // console.log('$(this).val()', checked, $(this).val());\n      if (checked) {\n        if ($(this).val() === '') {\n          window.alert($(this).prop('placeholder') + ' 포인트 점수를 입력하세요.');\n          $(this).focus();\n          pointIsValid = false;\n          return false;\n        } else {\n          pointTotal += parseInt($(this).val());\n        }\n      }\n    });\n\n    // console.log('pointTotal', pointTotal, pointIsValid);\n    if (!pointIsValid) return false;\n    if (pointTotal !== 100) {\n      window.alert('포인트의 합계는 100점이 되어야 합니다.');\n      return false;\n    }\n\n    return true;\n  }\n\n  $('.input-group-addon').children('input:checkbox').on('change', function () {\n    var input = $(this).parent().parent().find('.point-item');\n\n    input.prop('disabled', !$(this).prop('checked'));\n\n    if ($(this).prop('checked')) {\n      input.focus();\n    };\n  });\n\n  $('.point-item').on('keyup', _.debounce(function () {\n    var sum = 0;\n\n    $('.point-item').each(function () {\n      var checked = $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked');\n      if (checked && $(this).val() !== '' && $(this).val() !== '0') {\n        var point = parseInt($(this).val());\n        sum += point;\n      } else {\n        // $(this).prop('disabled', true);\n        // $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n      }\n    });\n\n    if (sum > 0) {\n      $('.badge').text(sum);\n    }\n\n    if (sum > 100) {\n      window.alert('100점을 초과하였습니다.');\n      return false;\n    }\n  }, 300));\n\n  function getCourseView (data) {\n    return courseView(data);\n  }\n\n  function getSessionView (data) {\n    return sessionView(data);\n  }\n\n  /**\n   * 세션관련정보를 삭제한다.\n   * 주의사항:\n   * 세션과 관련된 일체를 실제 삭제하는 기능이므로, 꼭 필요한 경우에만 사용하도록 할 필요가 있다.\n   * 1. 세션정보(course_list) 삭제\n   * 2. 퀴즈 보기(quiz_option) 삭제\n   * 3. 퀴즈(quiz) 를 삭제한다.\n   * 4. 퀴즈 보기 그룹(quiz_group) 삭제\n   */\n  function deleteSession (params) {\n    window.axios.delete('/course/courselist', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.');\n        } else {\n          window.alert('세션을 삭제하였습니다.');\n          window.location.reload();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * DB 에서 세션 순서를 변경한다.\n   */\n  function makeSessionOrderChangeRequest (session) {\n    return window.axios({\n      method: 'put',\n      url: '/course/courselist',\n      data: {\n        title: session.children('a').data('title'),\n        course_list_id: session.children('a').data('id'),\n        course_list_order: session.index()\n      }\n    });\n  }\n\n  /**\n   * 세션순서를 변경한다.\n   */\n  function changeSessionOrder () {\n    var promises = [];\n    var items = window.$('.session-content > .list-group-item');\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeSessionOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises).then(function (results) {\n      results.forEach(function (response) {\n        console.log(response);\n      });\n    });\n  }\n\n  function toggleIcon (e) {\n    $(e.target)\n      .prev('.panel-heading')\n      .find('.more-less')\n      .toggleClass('glyphicon-plus glyphicon-minus');\n\n    // panel-group 에 현재 편집중인 강의 id 를 입력한다.\n    var $panelGroup = $(e.target).parents().find('.panel-group');\n    var selectedCourseId = $(e.target).parents().closest('.panel').data('id');\n\n    if ($panelGroup.data('selected-course-id') !== selectedCourseId) {\n      $panelGroup.data('selected-course-id', selectedCourseId);\n      getSessionList();\n    }\n  }\n\n  function addCourse () {\n    var $modal = $('#registerCourse');\n    var data = {\n      course_name: $modal.find('input[name=\\'course_name\\']').val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find('input[name=\\'teacher_name\\']').val(),\n      edu_id: $('#edu_id').val()\n    };\n\n    window.axios.post('/course', data)\n      .then(function (res) {\n        if (res.data) {\n          if ($('#course-list').children().length === 0) {\n            var currSelector = 'ul.setup-panel li:eq(3)'; // 4. 메세지\n            $(currSelector).removeClass('disabled');\n            updateProgress(4);\n          }\n          $('#course-list').append(getCourseView(res.data));\n          $('.panel').last().data('metadata', res.data);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function updateCourse () {\n    var $modal = $('#modifyCourse');\n    var selectedCourseId = $('.panel-group').data('selected-course-id');\n    var data = {\n      course_id: selectedCourseId,\n      course_name: $modal.find('input[name=\\'course_name\\']').val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find('input[name=\\'teacher_name\\']').val(),\n      course_rate: 0,\n      teacher_rate: 0\n    };\n\n    window.axios.put('/course', data)\n      .then(function (res) {\n        if (res.data) {\n          // console.log(res.data);\n          $('.panel[data-id=' + res.data.course_id + ']').replaceWith(getCourseView(res.data));\n          $('.panel[data-id=' + res.data.course_id + ']').data('metadata', res.data);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function onModifyCourseModalOpen (e) {\n    var data = $(e.relatedTarget).parents().find('.panel').data('metadata');\n    var $modal = $(this);\n\n    $modal.find('input').val('').end();\n    window.tinymce.activeEditor.setContent('');\n    $modal.find('input[name=\\'course_name\\']').val(data.course_name);\n    $modal.find('input[name=\\'teacher_name\\']').val(data.teacher_name);\n    window.tinymce.get('course_desc').setContent(data.course_desc);\n    $modal.find('[autofocus]').focus();\n  }\n\n  $('#registerCourse').submit(function (e) {\n    e.preventDefault();\n\n    addCourse();\n\n    window.tinymce.execCommand('mceFocus', false, 'course_desc');\n    $(this).modal('toggle');\n  });\n  $('#modifyCourse').submit(function (e) {\n    e.preventDefault();\n\n    updateCourse();\n\n    window.tinymce.execCommand('mceFocus', false, 'course_desc');\n    $(this).modal('toggle');\n  });\n\n  $('.panel-group').on('hidden.bs.collapse', toggleIcon);\n  $('.panel-group').on('shown.bs.collapse', toggleIcon);\n  $('#registerCourse').on('hidden.bs.modal', function () {\n    $(this).find('input').val('').end();\n    window.tinymce.activeEditor.setContent('');\n  });\n  $('#registerCourse').on('shown.bs.modal', function () {\n    $(this).find('[autofocus]').focus();\n  });\n  $('#modifyCourse').on('shown.bs.modal', onModifyCourseModalOpen);\n  // $('#modifyCourse').on('hidden.bs.modal', onModifyCourseModalClose);\n\n  // 비디오 생성하기\n  $('.panel-group').on('click', '.btn-create-video', function (e) {\n    e.preventDefault();\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/video?course_id=' + courseId, 'Video', windowOption);\n  });\n  // 퀴즈 생성하기\n  $('.panel-group').on('click', '.btn-create-quiz', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/quiz?course_id=' + courseId + '&type=QUIZ', 'Quiz', windowOption);\n  });\n  // 파이널테스트 생성하기\n  $('.panel-group').on('click', '.btn-create-final', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/quiz?course_id=' + courseId + '&type=FINAL', 'Final', windowOption);\n  });\n  // 파이널테스트 생성하기\n  $('.panel-group').on('click', '.btn-create-checklist', function (e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr('data-course-id');\n    Util.createWindowPopup('/course/create/checklist?course_id=' + courseId + '&type=CHECK', 'Checklist', windowOption);\n  });\n  // 세션을 삭제한다.\n  $('.panel-group').on('click', '.btn-delete-session', function (e) {\n    e.preventDefault();\n\n    if (!window.confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var $self = $(this);\n    var params = {};\n    params.course_list_id = $(this).parent('span').data('course-list-id');\n    params.course_list_type = $(this).parent('span').data('type');\n\n    var courselistType = $(this).parent('span').data('type');\n    switch (courselistType) {\n    case 'QUIZ':\n    case 'FINAL':\n      params.quiz_group_id = $(this).data('quiz-group');\n      break;\n    case 'VIDEO':\n      params.video_id = $(this).data('video-id');\n      break;\n    case 'CHECKLIST':\n      params.checklist_group_id = $(this).data('checklist-group');\n      break;\n    default:\n      break;\n    }\n\n    window.axios.delete('/course/courselist', {\n      params: params\n    })\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.');\n        } else {\n          window.alert('세션을 삭제하였습니다.');\n          $self.parents('li').remove();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n\n  // 세션 수정하기\n  $('.panel-group').on('click', '.btn-modify-session', function (e) {\n    e.preventDefault();\n\n    var dataCourseId = $(this).parent('span').data('course-id');\n    var dataCourseListId = $(this).parent('span').data('course-list-id');\n    var dataVideoId = $(this).data('video-id');\n    var dataQuizGroupId = $(this).data('quiz-group');\n    var dataChecklistGroupId = $(this).data('checklist-group');\n    var dataType = $(this).parent('span').data('type'); // VIDEO/QUIZ/FINAL\n\n    if (dataType === 'VIDEO') {\n      Util.createWindowPopup('/course/modify/video?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&video_id=' + dataVideoId, 'Video', windowOption);\n    } else if (dataType === 'QUIZ' || dataType === 'FINAL') {\n      Util.createWindowPopup('/course/modify/quiz?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&type=' + dataType + '&quiz_group_id=' + dataQuizGroupId, 'Quiz', windowOption);\n    } else if (dataType === 'CHECKLIST') {\n      Util.createWindowPopup('/course/modify/checklist?course_id=' + dataCourseId + '&course_list_id=' + dataCourseListId + '&type=' + dataType + '&checklist_group_id=' + dataChecklistGroupId, 'Checklist', windowOption);\n    }\n  });\n\n  // 체크리스트 보기\n  $('.panel-group').on('click', '.btn-preview-checklist', function (e) {\n    e.preventDefault();\n    var courseListId = window.$(this).parent('span').data('course-list-id');\n    if (!courseListId) {\n      courseListId = window.$(this).data('id');\n    }\n    Util.createWindowPopup('/course/checklist?course_list_id=' + courseListId, 'Checklist', windowOption);\n  });\n\n  // 퀴즈 풀어보기\n  $('.panel-group').on('click', '.btn-solve-quiz', function (e) {\n    e.preventDefault();\n\n    var quizGroupId = window.$(this).attr('data-quiz-group');\n    var dataTitle = window.$(this).attr('data-title');\n    var dataType = window.$(this).attr('data-type');\n\n    Util.createWindowPopup('/course/quiz?id=' + quizGroupId + '&title=' + dataTitle + '&type=' + dataType, 'Quiz', windowOption);\n  });\n\n  // 비디오 보기\n  $('.panel-group').on('click', '.btn-watch-video', function (e) {\n    e.preventDefault();\n\n    // 비디오 아이디를 추출\n    var videoId = window.$(this).attr('data-video-id');\n    Util.createWindowPopup('/course/video?id=' + videoId, 'Video', windowOption);\n  });\n\n  $('.panel-group').on('click', '.btn-delete-course', function () {\n    if (window.confirm('선택하신 강의를 삭제하시겠습니까?')) {\n      var selectedCourseId = $('.panel-group').data('selected-course-id');\n\n      window.axios.delete('/course/deactivate', {\n        params: {\n          id: selectedCourseId\n        }\n      })\n        .then(function (res) {\n          if (res.data.success) {\n            $('.panel[data-id=' + selectedCourseId + ']').remove();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  });\n\n  btnSendMessage.on('click', function (e) {\n    e.preventDefault();\n\n    var currentTabId = $('ul.select-employee li.active').children().attr('id');\n    var checkedEmployeeIds;\n    switch (currentTabId) {\n    case 'employee':\n      checkedEmployeeIds = window.$(':checkbox:checked',\n          tableEmployee.rows({\n            filter: 'applied'\n          }).nodes()).map(\n          function () {\n            return tableEmployee.row(window.$(this).parents('tr')).data()[4];\n          }\n        ).get().join(',');\n      break;\n    case 'employee-assigned':\n        // checkedEmployeeIds = window.$(':checkbox:checked',\n        //   tableAssignedEmployee.rows({filter: 'applied'}).nodes()).map(\n        //     function () {\n        //       return tableAssignedEmployee.row(window.$(this).parents('tr')).data()['user_phone'];\n        //     }\n        //   ).get().join(',');\n      break;\n    default:\n      break;\n    }\n\n    if (!checkedEmployeeIds) {\n      window.alert('직원을 선택하세요.');\n      return false;\n    }\n\n    var message = messageInput.val().trim();\n    if (message === '') {\n      window.alert('메세지를 입력하세요.');\n      messageInput.focus();\n      return false;\n    }\n\n    if (!window.confirm('메세지를 보내시겠습니까?')) {\n      return false;\n    }\n\n    window.axios({\n      method: 'post',\n      url: '/api/v1/sms/send',\n      data: {\n        phones: checkedEmployeeIds,\n        msg: message\n      }\n    })\n      .then(\n        function (res) {\n          if (res.data.success === true) {\n            window.alert('메세지를 전송하였습니다.');\n          } else {\n            window.alert('알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.');\n          }\n        });\n  });\n});\n"],"sourceRoot":"/source/"}