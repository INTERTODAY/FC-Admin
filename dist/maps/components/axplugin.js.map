{"version":3,"sources":["components/axplugin.js"],"names":["window","define","timerid","loadAquaAxPlugin","append","NPLAYER_SETUP_URL","AX_VERSION","AquaAxPlugin","InitAuth","console","log","this","setInterval","bind","setAquaAxPlugin","param","mediaURL","OpenMedia","url","setSubtitleFont","fontName","fontSize","g","b","a","x","y","text","player","setSubtitleColor","setSubtitlePosition","setSubtitleText","dupPlayerStop","stop","setTimeout","alert","msg","isDup","getPlayerDuration","duration","parseInt","getDuration","getPlaybackRate","playbackrate","getCurrentPlaybackRate","getCurrentPosition","pos","getCurrentPlaybackTime"],"mappings":"AACA,YACAA,QAAOC,UAAW,WAAlBD,GACME,IAAAA,CAuBJ,QAEEC,iBAAkB,WAGhB,GAHFA,OAAAA,EAAAA,QAAkBC,OAAA,2EAAYJ,OAAAK,kBAAA,YAAAL,OAAAM,WAAA,2DAGgB,KAAjCN,OAAOO,aAAaC,SAC7BC,MADFA,SAAIC,IAAOV,kBACTS,CADFE,MAGOT,QAAAU,YACLD,KAAKT,OAALW,KAAeD,MAGfH,KACDA,QAAAC,IAAA,oBAAAC,KAAAT,UAIDY,gBAAWd,SAAOO,EAAPQ,GACTf,WAAA,KAAOO,OAAAA,aAAPC,WACAR,OAAOO,aAAaC,UAApBO,EACAf,OAAOO,aAAaS,WACpBhB,OAAOO,aAAaU,SAApBC,EACAlB,OAAOO,aAAPU,aACK,IAMPjB,gBAAcmB,SAAAA,EAAgBC,EAAUC,EAAxCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACA3B,OAAO4B,OAAOC,gBAAdT,EAAwCI,GACxCxB,OAAO4B,OAAOE,iBAAAA,EAAoBL,EAAGC,EAArCF,GACAxB,OAAO4B,OAAOG,oBAAdN,EAAAC,GAhCG1B,OAAA4B,OAAAG,gBAAAJ,IAoCHK,cAAUhC,WACVA,GAAAA,GAAO4B,OAAOK,eACdC,QAAAA,OAAWD,OACTjC,WAAOmC,WADTnC,OAAAmC,MAAAC,IAGAC,KAzCGA,GAAA,GA6CHC,kBAAetC,WACf,GAAAuC,GAAQC,OAASD,OAAWE,aA9CzB,OAAAD,UAAA,IAAAD,IAkDHG,gBAAIC,WACJ,GAAAA,GAAiBA,OAAAA,OAAeC,wBAnD7B,OAAAJ,UAAA,IAAAG,IAuDHE,mBAAiBjB,WACjB,GAAAkB,GAAQN,OAASM,OAAMC,wBACxB,OAAAP,UAAA,IAAAM","file":"components/axplugin.js","sourcesContent":["\n'use strict';\nwindow.define([], function () {\n  var timerid = 0;\n  var isDup = false;\n\n  function getE (L) {\n    return document.getElementById(L);\n  }\n\n  function chkObj () {\n    console.log('timerid', this.timerid);\n    var L = getE('AquaAxPlugin');\n\n    console.log('AquaAxPlugin', L.object);\n    console.log(L.checkAquaAxVersion(window.AX_VERSION), window.AX_VERSION);\n    console.log('cleared interval : ' + timerid);\n\n    if (L.object) {\n      if (L.checkAquaAxVersion(window.AX_VERSION) === true) {\n        clearInterval(this.timerid);\n        window.location.reload();\n      }\n    }\n  }\n\n  return {\n\n    loadAquaAxPlugin: function () {\n      window.$('html').append('<OBJECT CLASSID=\"clsid:81C08477-A103-4FDC-B7A6-953940EAD67F\"  codebase=\"' + window.NPLAYER_SETUP_URL + '#version=' + window.AX_VERSION + '\" width=\"0\" height=\"0\" ID=\"AquaAxPlugin\" ></OBJECT>');\n\n      if (typeof window.AquaAxPlugin.InitAuth !== 'undefined') {\n        console.log('plugin loaded');\n        return true;\n      } else {\n        this.timerid = setInterval(\n          this.chkObj.bind(this),\n        1000);\n        console.log('plugin checking..', this.timerid);\n      }\n    },\n\n    setAquaAxPlugin: function (url, param) {\n      if (typeof window.AquaAxPlugin.InitAuth !== 'undefined') {\n        window.AquaAxPlugin.authParam = param;\n        window.AquaAxPlugin.InitAuth();\n        window.AquaAxPlugin.mediaURL = url;\n        window.AquaAxPlugin.OpenMedia();\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    setMegaSubtitle: function (fontName, fontSize, r, g, b, a, x, y, text) {\n      window.player.setSubtitleFont(fontName, fontSize);\n      window.player.setSubtitleColor(r, g, b, a);\n      window.player.setSubtitlePosition(x, y);\n      window.player.setSubtitleText(text);\n    },\n\n    dupPlayerStop: function () {\n      var msg = window.NPLAYER_DUP_MSG;\n      window.player.stop();\n      setTimeout(function () {\n        window.alert(msg);\n      }, 200);\n      isDup = true;\n    },\n\n    getPlayerDuration: function () {\n      var duration = window.player.getDuration();\n      return (parseInt(duration * 1000));\n    },\n\n    getPlaybackRate: function () {\n      var playbackrate = window.player.getCurrentPlaybackRate();\n      return (parseInt(playbackrate * 1000));\n    },\n\n    getCurrentPosition: function () {\n      var pos = window.player.getCurrentPlaybackTime();\n      return (parseInt(pos * 1000));\n    }\n  };\n});\n\n"],"sourceRoot":"/source/"}