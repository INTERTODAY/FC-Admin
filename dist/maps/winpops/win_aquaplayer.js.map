{"version":3,"sources":["winpops/win_aquaplayer.js"],"names":["window","requirejs","Util","player","axios","get","$","resize","visible","mode","response","encparam","data","initNPlayerUI","controlBox","bindEvent","console","log","setPlayerStart","mygentAuthCall","setMediaInfo","proxy_init","open","setNPlayer","indicateInstall","indicateUpdate","genkey","getMediaURL","state","encodeURI","url","starthtml5State","Stophtml5State","NPlayer","OpenState","Opened","setVisible","Closed","PlayState","Playing","Paused","Stopped","name","catch","error","desc","ec","getFullscreen","height"],"mappings":"AAAA,YACAA,QAAOC,WASH,SACA,UACA,aANA,WAQE,gBALJ,SAAUC,GAQNF,GAEEG,GAFFH,EAAOI,GAAMC,OAAIC,CAHnBA,GAAE,WASEH,EAAAA,QAASI,SAEPC,OAAAA,MAASH,IAF0B,2BAGnCI,KAAAA,SAAMC,GAHR,GAAAC,GAAAD,EAAAE,KAAAD,QAQAX,GAAOa,GAAAA,QAAcV,QAArB,SAPEW,WAAY,uBASdX,SAAOY,EACLC,KAAQC,UAGNjB,QAAAA,IAAOkB,GAEPlB,OAAAA,cAAkBG,GAElBH,EAAAA,UAAOmB,QAAe,WACpBnB,QAAAA,IAAOoB,SAPXpB,OAAOqB,WAAW,WAUdlB,OAAOmB,gBAAK,GAAAtB,OAAZuB,WAAApB,GAIDH,OAAOwB,eAdV,SAckCC,GAhBpCzB,OAAAoB,aArBU,iEAqBVM,EAmBOX,IAAAA,GAAUf,OAAA2B,aAAoB,EACnCX,GAAYM,MACJM,IAARC,UAAAC,MAEE3B,IACAH,OAAO+B,gBAAP/B,OAAAyB,kBAGAzB,EAAAA,UAAOgC,mBAAsBC,SAAQC,GANvC,OAOElB,QAAAC,IAAA,oBAPFW,GAFF,IAAA5B,QAAAiC,QAAAC,UAAAC,OAIIhC,EAAOiC,YAAW,GAStBjC,OAAOY,iBACLC,MACA,KAAAhB,QAAAiC,QAAAC,UAAAG,OACArC,OAAKA,eAAesC,OAAUC,QAA9BL,UAAAG,WAKElC,EAAAA,UAAOiC,mBAAP,SAAAR,GANF,OAOEZ,QAAAC,IAAA,oBAPMW,GASR,IAAK5B,QAAOiC,QAAQK,UAAUE,QAC5BrC,EAAOiC,YAAW,EAClB,MAbJ,KAAApC,QAAAiC,QAAAK,UAAAG,QAQItC,EAAOiC,YAAW,EAStBjC,MAEEa,KAAAA,QAAY0B,QAAOJ,UAAnBE,OAFFrC,EAAAiC,YAAA,MASDO,EAAM5B,UAAU6B,gBAAO,SAAAF,EAAAG,GACtB7B,QAAQ4B,IAAMA,iBA3EhB5B,QAAAC,IAAAyB,EAAA,MAAAG,KA+EA7C,EAAQO,UAAO,QAAY,SAAAuC,GACvB3C,QAAUc,IAAEd,QAAO4C,OAGrBzC,MAAE,SAAU0C,GACbhC,QAAA4B,MAAAA,OALHtC,EAAEN,QAAQO,OAAO,WACXJ,GAAYA,EAAO4C,gBACrBzC,EAAE,UAAU0C,OAAO1C,EAAEN,QAAQgD,UAE7B1C,EAAE,UAAU0C,OAAO1C,EAAEN,QAAQgD,SAAW1C,EAAE,iBAAiB0C","file":"winpops/win_aquaplayer.js","sourcesContent":["'use strict';\nwindow.requirejs(\n  [\n    'common',\n    'nplayer',\n    'nplayer_ui',\n    'cdnproxy',\n    'nplayer_conf'\n  ],\n  function (Util) {\n    var $ = $ || window.$;\n    var player;\n    var fileURL = 'http://pcst.aquan.dev.edu1004.kr/orangenamu/dev/cdnetworks.mp4';\n\n    $(function () {\n      $(window).resize();\n\n      window.axios.get('/api/v1/player/encparam')\n      .then(function (response) {\n        var encparam = response.data.encparam;\n\n        // console.log('encparam =', encparam);\n\n        player = new window.NPlayer('video', {\n          controlBox: 'nplayer_control.html',\n          visible: false,\n          mode: 'html5'\n        });\n\n        console.log(player);\n\n        window.initNPlayerUI(player);\n\n        player.bindEvent('Ready', function () {\n          console.log('Ready');\n          window.proxy_init(function () {\n            // 1. video start set\n            window.setPlayerStart(true);\n            // 2. nplayer instance set\n            window.setNPlayer(player);\n            // 4. media info set\n            window.mygentAuthCall(function (genkey) {\n              window.setMediaInfo(fileURL, genkey);\n\n              var url = window.getMediaURL(false);\n              player.open({\n                'URL': encodeURI(url)\n              });\n            }, encparam);\n          }, window.indicateInstall, window.indicateUpdate);\n        });\n\n        player.bindEvent('OpenStateChanged', function (state) {\n          console.log('OpenStateChanged');\n          switch (state) {\n          case window.NPlayer.OpenState.Opened:\n            player.setVisible(true);\n            window.starthtml5State();\n            break;\n          case window.NPlayer.OpenState.Closed:\n            window.Stophtml5State(window.NPlayer.OpenState.Closed);\n            break;\n          }\n        });\n\n        player.bindEvent('PlayStateChanged', function (state) {\n          console.log('PlayStateChanged');\n          switch (state) {\n          case window.NPlayer.PlayState.Playing:\n            player.setVisible(true);\n            break;\n\n          case window.NPlayer.PlayState.Stopped:\n            player.setVisible(false);\n            break;\n\n          case window.NPlayer.PlayState.Paused:\n            player.setVisible(true);\n            break;\n          }\n        });\n\n        player.bindEvent('GuardCallback', function (name, desc) {\n          console.log('GuardCallback');\n          console.log(name + ' : ' + desc);\n        });\n\n        player.bindEvent('Error', function (ec) {\n          console.log('Error', ec);\n        });\n      })\n      .catch(function (error) {\n        console.error(error);\n      });\n    });\n\n    $(window).resize(function () {\n      if (player && !!player.getFullscreen()) {\n        $('#video').height($(window).height());\n      } else {\n        $('#video').height($(window).height() - $('.wrapper_foot').height());\n      }\n    });\n  }\n);\n"],"sourceRoot":"/source/"}