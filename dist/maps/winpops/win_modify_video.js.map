{"version":3,"sources":["winpops/win_modify_video.js"],"names":["requirejs","_btn_modify_video","video_title","focus","video_code","$","val","alert","displayVideo","video_provider","video_player","html","_confirm","_btn_play_video","bind","e","which","keyCode","validateForm","preventDefault","params","name","value","serializeArray","this","data","push","dataType","success","attr","window","parent","close","response","opener","winpop_listener","onbeforeunload","event","confirm"],"mappings":"AAAA,YAEAA,YACE,UAGA,SAAIC,GAgEF,QAAKC,KAEHA,GAAAA,GAAYC,EAAZ,gBACAC,EAAAC,EAAA,cAEF,OAAKD,GAAWE,QAAXF,EAAWE,QAMhBC,MAAO,kBAERH,EAAAD,SALU,IAFPI,MAAM,mBACNH,EAAWD,SACJ,GAUX,QAASK,KAQP,GAAAJ,GAAQK,EAAAA,eAARH,MACEG,EAAAJ,EAAA,mBAAAC,MACEI,EAAaC,EAAb,gBAGF,KAAAP,EACEM,OAAAA,CANJ,QAAQD,GAUN,IAAA,UACEC,EAAAC,KAAA,wEAAAP,EAAA,6CAEL,MARG,KAAK,QAUTM,EAAAC,KAAA,+CAAAP,EAAA,gJAvGA,GAAIQ,GAAiBP,EAAA,iBADjBQ,EAAkBR,EAAE,eAGtBO,GAAY,CAEbP,GAFD,WACEG,MAKAH,EAAA,eAAAS,KACEN,WAAAA,SAAAA,GADU,MAFdO,EAAAC,OAAAD,EAAAE,UAMAJ,MAAAA,EAAgBC,KAAK,QAAS,SAAUC,GAIxCd,MAGEA,EAAKiB,KACH,QAAO,SAAPH,GADF,GAFAA,EAAEI,kBAEGD,IAML,OAAIE,CAEFC,KAAAA,QAAM,aACNC,OAAOjB,CAETe,IAAAA,GAAYf,EAAA,QAAAkB,gBACVF,GAAAA,MACAC,KAAAA,iBAFFA,MAAAjB,EAAAmB,MAAAC,KAAA,oBAKAL,EAAAM,MACAL,KAAA,WAJEC,MAAOjB,EAAEmB,MAAMC,KAAK,cAWpBE,EAAAA,MACAC,IAAAA,EAAAA,QAASC,KAAA,UACPtB,KAAAA,MACAkB,KAAAL,EACAU,YAAOC,mDACPnB,SAAAA,OACAkB,QAAOE,SAAPC,GACD1B,MAAA,iBAlCLuB,OAAAC,OAAAG,OAAAC,iBAAA,GAgCMvB,GAAW,EAMjBkB,OAAAE,aAqDAF,OAAOM,eAAiB,SAAUC,GAChC,GAAIzB,EACF,MAAO0B,SAAQ","file":"winpops/win_modify_video.js","sourcesContent":["'use strict';\n\nrequirejs([\n  'jquery'\n], function ($) {\n\n  var _btn_modify_video = $('#modify-video');\n  var _btn_play_video = $('#play-video');\n  var _confirm = true; // 윈도우 종료 시 창을 닫을지 여부\n\n  $(function () {\n    displayVideo();\n  });\n\n  $('#video-code').bind('keypress', function (e) {\n    var key = e.which || e.keyCode;\n    if (key === 13)\n      displayVideo();\n  });\n\n  _btn_play_video.bind('click', function (e) {\n    displayVideo();\n  });\n\n  _btn_modify_video.bind('click', function (e) {\n    e.preventDefault();\n\n    if (!validateForm())\n      return false;\n\n    if (!confirm(\"저장하시겠습니까?\"))\n      return false;\n\n    var params = $(\"form\").serializeArray();\n    params.push({\n      name: 'course_list_id',\n      value: $(this).data('course-list-id')\n    });\n    params.push({\n      name: 'video_id',\n      value: $(this).data('video-id')\n    });\n\n    // console.log(params);\n    // return false;\n\n    $.ajax({\n      url: $(\"form\").attr('action'),\n      type: 'PUT',\n      data: params,\n      contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n      dataType: 'html',\n      success: function (response) {\n        alert('비디오를 저장하였습니다.');\n        // window.parent.opener.location.reload(); // 부모폼을 reload 한다.\n        window.parent.opener.winpop_listener(true);\n        _confirm = false;\n        window.close();\n      }\n    });\n  });\n\n  /**\n   * 폼 validate\n   */\n  function validateForm() {\n\n    var video_title = $('#video-title');\n    var video_code = $('#video-code');\n\n    if (!video_title.val()) {\n      alert('비디오 강좌명을 입력하세요.');\n      video_title.focus();\n      return false;\n    }\n    if (!video_code.val()) {\n      alert('비디오 코드를 입력하세요.');\n      video_code.focus();\n      return false;\n    }\n\n    return true;\n\n  }\n\n  /**\n   * 비디오를 표시한다.\n   */\n  function displayVideo() {\n    var video_code = $('#video-code').val();\n    var video_provider = $('#video-provider').val();\n    var video_player = $('#video-player');\n\n    if (!video_code)\n      return false;\n\n    switch (video_provider) {\n      case 'YOUTUBE':\n        video_player.html('<iframe width=\"100%\" height=\"600\" src=\"https://www.youtube.com/embed/' + video_code + '\"' +\n          'frameborder=\"0\" allowfullscreen></iframe>');\n        break;\n      case 'VIMEO':\n        video_player.html('<iframe src=\"https://player.vimeo.com/video/' + video_code + '\"?title=0&byline=0&portrait=0\" ' +\n          'width=\"100%\" height=\"600\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  /**\n   * 윈도우 팝업창 종료 시 발생\n   * \n   */\n  window.onbeforeunload = function (event) {\n    if (_confirm)\n      return confirm(\"진행중인 작업이 모두 사라집니다. 계속하시겠습니까?\");\n  };\n\n});"],"sourceRoot":"/source/"}