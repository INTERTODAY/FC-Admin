{"version":3,"sources":["winpops/win_modify_video.js"],"names":["requirejs","_btn_modify_video","video_title","focus","video_code","$","val","alert","displayVideo","video_provider","video_player","html","_confirm","_btn_play_video","bind","e","which","keyCode","validateForm","preventDefault","params","serializeArray","push","name","value","this","data","dataType","success","attr","window","response","parent","opener","location","reload","close","onbeforeunload","event","confirm"],"mappings":"AAAA,YAEAA,YACI,UAGA,SAAIC,GAyDA,QAAKC,KAEDA,GAAAA,GAAYC,EAAAA,gBACZC,EAAAC,EAAA,cAEJ,OAAKD,GAAWE,QAAXF,EAAWE,QAMhBC,MAAO,kBAEVH,EAAAD,SALc,IAFPI,MAAM,mBACNH,EAAWD,SACJ,GAUf,QAASK,KAQL,GAAAJ,GAAQK,EAAAA,eAARH,MACIG,EAAAJ,EAAA,mBAAAC,MACII,EAAAA,EAAaC,gBAGjB,KAAAP,EACIM,OAAAA,CANR,QAAQD,GAUJ,IAAA,UACIC,EAAAC,KAAA,wEAAAP,EAAA,6CAEX,MARO,KAAK,QAUbM,EAAAC,KAAA,+CAAAP,EAAA,gJAhGA,GAAIQ,GAAiBP,EAAA,iBADjBQ,EAAkBR,EAAE,eAGtBO,GAAY,CAEbP,GAFD,WACIG,MAKAH,EAAA,eAAYS,KACRN,WAAAA,SAAAA,GADQ,MAFhBO,EAAAC,OAAAD,EAAAE,UAMAJ,MAAAA,EAAgBC,KAAK,QAAS,SAAUC,GAIxCd,MAGIA,EAAKiB,KAAL,QACW,SAAPH,GADJ,GAFAA,EAAEI,kBAEGD,IAMDE,OAAAA,CAEJA,KAAAA,QAAY,aAJR,OAAO,CAOX,IAAAA,GAAAf,EAAA,QAAAgB,gBAJAD,GAAOE,MAAOC,KAAM,iBAAkBC,MAAOnB,EAAEoB,MAAMC,KAAK,oBAM1DrB,EAAOiB,MAAAC,KAAA,WAAAC,MAAAnB,EAAAoB,MAAAC,KAAA,cAKHC,EAAAA,MACAC,IAAAA,EAAAA,QAASC,KAAA,UACLtB,KAAAA,MACAuB,KAAAA,EACAlB,YAAAA,mDACAkB,SAAAA,OACHF,QAAA,SAAAG,GAXLxB,MAAA,iBAhBJuB,OAAAE,OAAAC,OAAAC,SAAAC,SAyBYvB,GAAW,EAMvBkB,OAAAM,aAqDAN,OAAOO,eAAiB,SAAUC,GAC9B,GAAI1B,EACA,MAAO2B,SAAQ","file":"winpops/win_modify_video.js","sourcesContent":["'use strict';\n\nrequirejs([\n    'jquery'\n], function($) {\n\n    var _btn_modify_video = $('#modify-video');\n    var _btn_play_video = $('#play-video');\n    var _confirm = true; // 윈도우 종료 시 창을 닫을지 여부\n\n    $(function () {\n        displayVideo();\n    });\n\n    $('#video-code').bind('keypress', function (e) {\n        var key = e.which || e.keyCode;\n        if (key === 13)\n            displayVideo();\n    });\n    \n    _btn_play_video.bind('click', function (e) {        \n        displayVideo();\n    });\n\n    _btn_modify_video.bind('click', function (e) {\n        e.preventDefault();\n\n        if (!validateForm())\n            return false;\n\n        if (!confirm(\"저장하시겠습니까?\"))\n            return false;\n\n        var params = $(\"form\").serializeArray();\n        params.push({ name: 'course_list_id', value: $(this).data('course-list-id') });\n        params.push({ name: 'video_id', value: $(this).data('video-id') });\n\n        // console.log(params);\n        // return false;\n\n        $.ajax({\n            url: $(\"form\").attr('action'),\n            type: 'PUT',\n            data: params,\n            contentType: 'application/x-www-form-urlencoded; charset=UTF-8', \n            dataType: 'html',\n            success: function (response) {\n                alert('비디오를 저장하였습니다.'); \n                window.parent.opener.location.reload(); // 부모폼을 reload 한다.\n                _confirm = false;\n                window.close();\n            }\n        });\n    });\n\n    /**\n     * 폼 validate\n     */\n    function validateForm() {\n\n        var video_title = $('#video-title');\n        var video_code = $('#video-code');\n\n        if (!video_title.val()) {\n            alert('비디오 강좌명을 입력하세요.');\n            video_title.focus();\n            return false;\n        }\n        if (!video_code.val()) {\n            alert('비디오 코드를 입력하세요.');\n            video_code.focus();            \n            return false;\n        }        \n\n        return true;\n\n    }\n\n    /**\n     * 비디오를 표시한다.\n     */\n    function displayVideo () {\n        var video_code = $('#video-code').val();\n        var video_provider = $('#video-provider').val();\n        var video_player = $('#video-player');\n\n        if (!video_code)\n            return false;\n        \n        switch (video_provider) {\n            case 'YOUTUBE':       \n                video_player.html('<iframe width=\"100%\" height=\"600\" src=\"https://www.youtube.com/embed/' + video_code + '\"' +\n                    'frameborder=\"0\" allowfullscreen></iframe>');\n                break;\n            case 'VIMEO':               \n                video_player.html('<iframe src=\"https://player.vimeo.com/video/' + video_code + '\"?title=0&byline=0&portrait=0\" ' +\n                    'width=\"100%\" height=\"600\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');\n                break;\n        \n            default:\n                break;\n        }         \n    }\n\n    /**\n     * 윈도우 팝업창 종료 시 발생\n     * \n     */\n    window.onbeforeunload = function (event) {\n        if (_confirm)\n            return confirm(\"진행중인 작업이 모두 사라집니다. 계속하시겠습니까?\");\n    };    \n\n});"],"sourceRoot":"/source/"}