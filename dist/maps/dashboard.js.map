{"version":3,"sources":["dashboard.js"],"names":["requirejs","Util","initDataTable","$","columns","className","data","buttons","text","extend","exportOptions","order","eduId","then","newData","response","table","change","this","val","axios","get","params","edu_id","user_id","e","DataTable","list","element","index","error","value","relatedTarget","catch","console","html","length","edu_name","edu_start_dt","edu_end_dt","complete","complete_course_count","total_course_count","quiz_correction","correct_count","total_count","final_correction","reeltime","played_seconds","duration","speed","user_period","edu_period","repetition","point_complete","point_quiz","point_final","point_reeltime","point_speed","point_repetition","toFixed","append"],"mappings":"AAGA,YACAA,YAKI,UAEAC,SAAKC,GACHC,EAAA,WAD2CF,EAA7CC,cAAAC,EAAA,wBAgBAC,UACKF,KAAAA,cAAgBG,UAAiB,WACpCC,KAAU,YAD0BD,UAAA,WAEpCE,KACE,YAAAF,UAAA,WACEG,KAAM,SAAAH,UAAA,WACNI,KAAQ,WAFVJ,UAAA,WAGEA,KAAAA,kBAAWA,UAHb,WAIEK,KAAAA,mBAAeL,UAAA,WACbD,KAAAA,WAASC,UAAA,WADIC,KAAA,QAAAD,UAAA,WAIjBC,KAAA,aAAAD,UAAA,WACEG,KAAM,cAAAH,UAAA,UAENA,QAAAA,GAAW,WACIJ,EAAAC,cAAAC,EAAA,iBAJjBQ,QATO,EAAA,SAFXJ,UAIMC,KAAM,gCAmBdC,OAAA,OACEJ,UAAA,qBACIO,eAjBIR,SAAW,EAAG,EAAG,EAAG,MAoBlBI,KAAA,oCAITK,OAAK,QACAC,UAAUC,qBACVC,eAlBEZ,SAAW,EAAG,EAAG,EAAG,UAQ9BD,EAAE,wBAAwBc,OAAO,WAqBjC,GAAAL,GAAAT,EAAAe,MAAAC,KAlBEC,OAAMC,IAAI,uBACRC,QAqBFC,OAAAX,KAGIY,KAAAA,SAAWC,GADL,GAAAX,GAAAC,EAAAT,KAAAA,KAITO,EAAKV,EAAA,uBAAoBuB,WAExBV,GAAIW,QAAOZ,OACXC,EAAIY,KAAAA,IAAUd,GACdE,EAAKZ,QAAIyB,SAAWA,SAElBD,MAAAA,SAAWE,GACXF,QAAAA,MAAWE,OAQX3B,EAAA,wBACQwB,GAAKE,gBAAgBE,SAAaF,GArB9CT,MAAMC,IAAI,4BA4BNO,QACAA,QAAAA,EAAWH,EAAAO,eAAX1B,KAAA,cA7BJO,KAiCCoB,SAAMlB,GACLmB,EAAAA,iCAAAC,KAAA,GAGF,KAAA,GArCAR,GAAAZ,EAAAT,KAAAqB,KADFC,EAAA,GAsCEC,EAAA,EAAAA,EAAAF,EAAAS,OAAAP,IAAA,CA3BID,EAAU,OACVA,GAAW,OAASD,EAAKE,GAAOQ,SAAW,QAC3CT,GAAW,sBAAwBD,EAAKE,GAAOS,aAAe,MAAQX,EAAKE,GAAOU,WAAa,QAC/FX,GAAW,sBAAwBD,EAAKE,GAAOW,SAASC,sBAAwB,MAAQd,EAAKE,GAAOW,SAASE,mBAAqB,QAClId,GAAW,sBAAwBD,EAAKE,GAAOc,gBAAgBC,cAAgB,MAAQjB,EAAKE,GAAOc,gBAAgBE,YAAc,QACjIjB,GAAW,sBAAwBD,EAAKE,GAAOiB,iBAAiBF,cAAgB,MAAQjB,EAAKE,GAAOiB,iBAAiBD,YAAc,QACnIjB,GAAW,sBAAwBD,EAAKE,GAAOkB,SAASC,eAAiB,MAAQrB,EAAKE,GAAOkB,SAASE,SAAW,QACjHrB,GAAW,sBAAwBD,EAAKE,GAAOqB,MAAMC,YAAc,MAAQxB,EAAKE,GAAOqB,MAAME,WAAa,QAC1GxB,GAAW,uBAAyD,GAAhCD,EAAKE,GAAOwB,WAAWtB,MAAa,IAAM,OAAS,OAUvFH,IAAW,uBAPHD,EAAKE,GAAOW,SAAST,MAAQJ,EAAKE,GAAOyB,eACzC3B,EAAKE,GAAOc,gBAAgBZ,MAAQJ,EAAKE,GAAO0B,WAChD5B,EAAKE,GAAOiB,iBAAiBf,MAAQJ,EAAKE,GAAO2B,YACjD7B,EAAKE,GAAOkB,SAAShB,MAAQJ,EAAKE,GAAO4B,eACzC9B,EAAKE,GAAOqB,MAAMnB,MAAQJ,EAAKE,GAAO6B,YACtC/B,EAAKE,GAAOwB,WAAWtB,MAAQJ,EAAKE,GAAO8B,kBAENC,QAAQ,GAAK,QAC1DhC,GAAW,QACXzB,EAAE,iCAAiC0D,OAAOjC,MAG7CK,MAAM,SAAUH,GACfI,QAAQJ,MAAMA","file":"dashboard.js","sourcesContent":["/**\n * Created by yijaejun on 30/11/2016.\n */\n'use strict';\nrequirejs(\n  [\n    'common'\n  ],\nfunction (Util) {\n  $(function () {\n    // datatable 설정\n    Util.initDataTable($('#table-point-by-edu'), {\n      'columns': [\n        { 'data': 'branch_name', className: 'center' },\n        { 'data': 'duty_name', className: 'center' },\n        { 'data': 'user_name', className: 'center' },\n        { 'data': 'period', className: 'center' },\n        { 'data': 'complete', className: 'center' },\n        { 'data': 'quiz_correction', className: 'center' },\n        { 'data': 'final_correction', className: 'center' },\n        { 'data': 'reeltime', className: 'center' },\n        { 'data': 'speed', className: 'center' },\n        { 'data': 'repetition', className: 'center' },\n        { 'data': 'point_total', className: 'right' }\n      ],\n      'order': [[ 10, 'desc' ]]\n    });\n    // 누적 포인트 현황\n    Util.initDataTable($('#table_point'), {\n      'order': [[ 3, 'desc' ]],\n      buttons: [\n        {\n          text: '<i class=\"fa fa-copy\"></i> 복사',\n          extend: 'copy',\n          className: 'btn-sm btn-default',\n          exportOptions: {\n            columns: [ 0, 1, 2, 3 ]\n          }\n        },\n        {\n          text: '<i class=\"fa fa-download\"></i> 엑셀',\n          extend: 'excel',\n          className: 'btn-sm btn-default',\n          exportOptions: {\n            columns: [ 0, 1, 2, 3 ]\n          }\n        }\n      ]\n    });\n  });\n\n  // 교육과정 선택 변경\n  $('#select-point-by-edu').change(function () {\n    var eduId = $(this).val();\n\n    axios.get('/dashboard/edupoint', {\n      params: {\n        edu_id: eduId\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.data;\n      var table = $('#table-point-by-edu').DataTable();\n\n      table.clear().draw();\n      table.rows.add(newData); // Add new data\n      table.columns.adjust().draw(); // Redraw the DataTable\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n\n  /**\n   * 포인트 상세내역 모달창\n   *\n   */\n  $('#modal-point-details').on('show.bs.modal', function (e) {\n    axios.get('/dashboard/point/details', {\n      params: {\n        user_id: $(e.relatedTarget).data('user-id')\n      }\n    })\n    .then(function (response) {\n      $('#table_point_details > tbody ').html('');\n      var list = response.data.list;\n      var element = '';\n      for (var index = 0; index < list.length; index++) {\n        element = '<tr>';\n        element += '<td>' + list[index].edu_name + '</td>';\n        element += '<td class=\"center\">' + list[index].edu_start_dt + ' ~ ' + list[index].edu_end_dt + '</td>';\n        element += '<td class=\"center\">' + list[index].complete.complete_course_count + ' / ' + list[index].complete.total_course_count + '</td>';\n        element += '<td class=\"center\">' + list[index].quiz_correction.correct_count + ' / ' + list[index].quiz_correction.total_count + '</td>';\n        element += '<td class=\"center\">' + list[index].final_correction.correct_count + ' / ' + list[index].final_correction.total_count + '</td>';\n        element += '<td class=\"center\">' + list[index].reeltime.played_seconds + ' / ' + list[index].reeltime.duration + '</td>';\n        element += '<td class=\"center\">' + list[index].speed.user_period + ' / ' + list[index].speed.edu_period + '</td>';\n        element += '<td class=\"center\">' + (list[index].repetition.value == 1 ? '예' : '아니오') + '</td>';\n\n        var point_sum =\n                list[index].complete.value * list[index].point_complete +\n                list[index].quiz_correction.value * list[index].point_quiz +\n                list[index].final_correction.value * list[index].point_final +\n                list[index].reeltime.value * list[index].point_reeltime +\n                list[index].speed.value * list[index].point_speed +\n                list[index].repetition.value * list[index].point_repetition;\n\n        element += '<td class=\"center\">' + point_sum.toFixed(2) + '</td>';\n        element += '</tr>';\n        $('#table_point_details > tbody ').append(element);\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n}); // end of func\n"],"sourceRoot":"/source/"}