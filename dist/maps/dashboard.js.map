{"version":3,"sources":["dashboard.js"],"names":["requirejs","Util","initDataTable","$","columns","className","data","buttons","text","extend","exportOptions","order","table","eduId","get","params","change","DataTable","console","error","clear","draw","this","val","axios","edu_id","user_id","e","newData","response","list","element","period","adjust","catch","index","on","days","user_period","then","html","length","repetition","point_sum","complete","edu_start_dt","append","edu_end_dt","speed","complete_course_count","total_course_count","quiz_correction","correct_count","total_count","final_correction","reeltime","played_seconds","duration","edu_period","value","point_complete","point_quiz","point_final","point_reeltime","point_speed","point_repetition","toFixed"],"mappings":"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","file":"dashboard.js","sourcesContent":["/**\n * Created by yijaejun on 30/11/2016.\n */\n'use strict';\nrequirejs(\n  [\n    'common'\n  ],\nfunction (Util) {\n  $(function () {\n    // datatable 설정\n    Util.initDataTable($('#table-point-by-edu'), {\n      'columns': [\n        { 'data': 'branch_name', className: 'center' },\n        { 'data': 'duty_name', className: 'center' },\n        { 'data': 'user_name', className: 'center' },\n        { 'data': 'period', className: 'center' },\n        { 'data': 'complete', className: 'center' },\n        { 'data': 'quiz_correction', className: 'center' },\n        { 'data': 'final_correction', className: 'center' },\n        { 'data': 'reeltime', className: 'center' },\n        { 'data': 'speed', className: 'center' },\n        { 'data': 'repetition', className: 'center' },\n        { 'data': 'point_total', className: 'right' }\n      ],\n      'order': [[ 10, 'desc' ]]\n    });\n    // 누적 포인트 현황\n    Util.initDataTable($('#table_point'), {\n      'order': [[ 3, 'desc' ]],\n      buttons: [\n        {\n          text: '<i class=\"fa fa-copy\"></i> 복사',\n          extend: 'copy',\n          className: 'btn-sm btn-default',\n          exportOptions: {\n            columns: [ 0, 1, 2, 3 ]\n          }\n        },\n        {\n          text: '<i class=\"fa fa-download\"></i> 엑셀',\n          extend: 'excel',\n          className: 'btn-sm btn-default',\n          exportOptions: {\n            columns: [ 0, 1, 2, 3 ]\n          }\n        }\n      ]\n    });\n  });\n\n  // 교육과정 선택 변경\n  $('#select-point-by-edu').change(function () {\n    var table = $('#table-point-by-edu').DataTable();\n\n    if ($(this).prop('selectedIndex') === 0) {\n      table.clear().draw();\n      return false;\n    }\n    var eduId = $(this).val();\n\n    axios.get('/dashboard/edupoint', {\n      params: {\n        edu_id: eduId\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.data;\n      // var table = $('#table-point-by-edu').DataTable();\n\n      table.clear().draw();\n      table.rows.add(newData); // Add new data\n      table.columns.adjust().draw(); // Redraw the DataTable\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n\n  /**\n   * 포인트 상세내역 모달창\n   *\n   */\n  $('#modal-point-details').on('show.bs.modal', function (e) {\n    axios.get('/dashboard/point/details', {\n      params: {\n        user_id: $(e.relatedTarget).data('user-id')\n      }\n    })\n    .then(function (response) {\n      $('#table_point_details > tbody ').html('');\n      var list = response.data.list;\n      var element = '';\n      var period;\n      var days;\n\n      for (var index = 0; index < list.length; index++) {\n        element = '<tr>';\n        element += '<td>' + list[index].edu_name + '</td>';\n\n        if (list[index].edu_start_dt === null) {\n          period = '시작전';\n        } else if (list[index].edu_end_dt === null) {\n          period = list[index].edu_start_dt + ' ~ ' + '미완료';\n        } else {\n          period = list[index].edu_start_dt + ' ~ ' + list[index].edu_end_dt;\n        }\n        days = list[index].speed.user_period === null ? 0 : list[index].speed.user_period;\n\n        element += '<td class=\"center\">' + period + '</td>';\n        // element += '<td class=\"center\">' + list[index].edu_start_dt + ' ~ ' + list[index].edu_end_dt + '</td>';\n        element += '<td class=\"center\">' + list[index].complete.complete_course_count + ' / ' + list[index].complete.total_course_count + '</td>';\n        element += '<td class=\"center\">' + list[index].quiz_correction.correct_count + ' / ' + list[index].quiz_correction.total_count + '</td>';\n        element += '<td class=\"center\">' + list[index].final_correction.correct_count + ' / ' + list[index].final_correction.total_count + '</td>';\n        element += '<td class=\"center\">' + list[index].reeltime.played_seconds + ' / ' + list[index].reeltime.duration + '</td>';\n        element += '<td class=\"center\">' + days + ' / ' + list[index].speed.edu_period + '</td>';\n        // element += '<td class=\"center\">' + list[index].speed.user_period + ' / ' + list[index].speed.edu_period + '</td>';\n        element += '<td class=\"center\">' + (list[index].repetition.value === 1 ? '예' : '아니오') + '</td>';\n\n        var point_sum =\n          list[index].complete.value * list[index].point_complete +\n          list[index].quiz_correction.value * list[index].point_quiz +\n          list[index].final_correction.value * list[index].point_final +\n          list[index].reeltime.value * list[index].point_reeltime +\n          list[index].speed.value * list[index].point_speed +\n          list[index].repetition.value * list[index].point_repetition;\n\n        element += '<td class=\"center\">' + point_sum.toFixed(2) + '</td>';\n        element += '</tr>';\n        $('#table_point_details > tbody ').append(element);\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n}); // end of func\n"],"sourceRoot":"/source/"}