{"version":3,"sources":["assignment_details.js"],"names":["requirejs","Util","btnAssignEducation","$","btnDeleteAssignment","formRegistAssignment","formModifyAssignment","tableEmployee","initDataTable","tableAssignedEmployee","columns","checkAllEmployee","checkAllAssignedEmployee","data","className","initDateTimePicker","find","confirm","id","group_id","axios","bind","params","val","alert","console","this","delete","then","res","success","catch","error","response","location","on","form","html","reload","log","change","eduId","edu_id","datetimepicker","children","newData","table","add","rows","nodes","prop","checked","get","DataTable","clear","draw","adjust"],"mappings":"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","file":"assignment_details.js","sourcesContent":["/**\n * Created by yijaejun on 30/11/2016.\n */\n'use strict';\nrequirejs(['common'],\nfunction (Util) {\n  var btnAssignEducation = $('.btn-assign-education');\n  var btnDeleteAssignment = $('#delete-assignment');\n  var formRegistAssignment = $('#allocationEdu');\n  var formModifyAssignment = $('#modifyAssignment');\n  var tableEmployee = Util.initDataTable($('#table-employee'));\n  var tableAssignedEmployee = Util.initDataTable($('#table-employee-assigned'),\n    {\n      'columns': [\n        { 'data': null, defaultContent: '<input type=\"checkbox\",value=\"\">' },\n        { 'data': 'branch_name', className: 'center' },\n        { 'data': 'duty_name', className: 'center' },\n        { 'data': 'user_name', className: 'center' },\n        { 'data': 'user_phone', className: 'center' },\n        { 'data': 'user_id', className: 'center', visible: false }\n      ]\n    }\n  );\n  var checkAllEmployee = $('#check-all');\n  var checkAllAssignedEmployee = $('#check-all-assigned');\n\n  $(function () {\n    // DateTimePicker 설정\n    Util.initDateTimePicker(\n      formRegistAssignment.find('#start_dt'),\n      formRegistAssignment.find('#end_dt')\n    );\n    Util.initDateTimePicker(\n      formModifyAssignment.find('#start_dt'),\n      formModifyAssignment.find('#end_dt')\n    );\n    // datatable 설정\n    Util.initDataTable($('#table_assignment_details'));\n    Util.initDataTable($('#table_assignment_history'));\n  });\n\n  btnAssignEducation.bind('click', function () {\n    $('#allocationEdu .user_group_id').val($('.description.group_id').val());\n    $('#allocationEdu .bind_group_id').val($('.description.bind_group_id').val());\n  });\n\n  btnDeleteAssignment.bind('click', function () {\n    if (!confirm('교육생 그룹을 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var params = {\n      id: $(this).data('id'),\n      group_id: $(this).data('group-id')\n    };\n\n    axios.delete('/assignment', {\n      params: params\n    })\n    .then(function (res) {\n      if (!res.data.success) {\n        alert('교육생 그룹을 삭제하지 못했습니다. 관리자에게 문의하세요.');\n      } else {\n        alert('교육생 그룹을 삭제하였습니다.');\n      }\n      location.href = '/assignment';\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n  });\n\n  // 배정이력 삭제하기\n  $('#table_assignment_history').on('click', '.btn-delete-assignment', function () {\n    if (!confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var params = {\n      id: $(this).data('logassigneduid')\n    };\n\n    axios.delete('/assignment_history',\n      {\n        params: params\n      })\n      .then(function (response) {\n        if (!response.data.success) {\n          alert('배정이력을 삭제하지 못했습니다.');\n        } else {\n          alert('배정이력을 삭제하였습니다.');\n        }\n        location.reload();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n\n  $('.btn-modify-assignment').bind('click', function () {\n    var form = $('#modifyAssignment');\n\n    form.find('.user_group_id').val($('.description.group_id').val());\n    form.find('.bind_group_id').val($('.description.bind_group_id').val());\n    form.find('#start_dt').datetimepicker().children('input').val($(this).data('start'));\n    form.find('#end_dt').datetimepicker().children('input').val($(this).data('end'));\n    form.find('#log_assign_edu_id').val($(this).data('logassigneduid'));\n    form.find('#eduName').html($(this).data('eduname'));\n  });\n\n  checkAllEmployee.bind('click', function () {\n    $(':checkbox', tableEmployee.rows().nodes()).prop('checked', this.checked);\n  });\n\n  checkAllAssignedEmployee.bind('click', function () {\n    $(':checkbox', tableAssignedEmployee.rows().nodes()).prop('checked', this.checked);\n  });\n\n  // 교육과정 선택 변경\n  $('#select-education').change(function () {\n    var eduId = $(this).val();\n\n    axios.get('/assignment/employees', {\n      params: {\n        edu_id: eduId\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.data;\n      var table = $('#table-employee-assigned').DataTable();\n\n      table.clear().draw();\n      table.rows.add(newData); // Add new data\n      table.columns.adjust().draw(); // Redraw the DataTable\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n});\n"],"sourceRoot":"/source/"}