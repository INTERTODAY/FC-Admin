{"version":3,"sources":["employee.js"],"names":["requirejs","$","Util","select2","initDataTable","text","extend","columns","className","exportOptions","btnBranchClearInputs","btnDutySave","formDuty","btnDeleteDuty","btnDeleteBranch","dutyList","btnDutyClearInputs","_self","attr","e","_userid","_target","_branch","val","find","_name","_phone","_email","trigger","_duty","prop","preventDefault","this","data","html","bind","confirm","id","on","then","response","alert","location","reload","console","error","success","catch","log","axios","params","delete"],"mappings":"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","file":"employee.js","sourcesContent":["/**\n * Created by yijaejun on 30/11/2016.\n */\n'use strict';\nrequirejs([\n  'common'\n],\nfunction (Util) {\n  $(function () {\n    $('#createEmployee #select_branch').select2();\n    $('#modifyEmployee #select_branch').select2();\n  });\n\n  // datatable 설정\n  Util.initDataTable($('#table-branch'), {\n    buttons: []\n  });\n  Util.initDataTable($('#table-employee'), {\n    buttons:\n    [\n      {\n        text: '<i class=\"fa fa-copy\"></i> 복사',\n        extend: 'copy',\n        className: 'btn-sm btn-default',\n        exportOptions: {\n          columns: [ 0, 1, 2, 3, 4 ]\n        }\n      },\n      {\n        text: '<i class=\"fa fa-download\"></i> 엑셀',\n        extend: 'excel',\n        className: 'btn-sm btn-default',\n        exportOptions: {\n          columns: [ 0, 1, 2, 3, 4 ]\n        }\n      }\n    ]\n  });\n\n  var btnBranchClearInputs = $('.branch-right-buttons > #clear-input');\n  var btnBranchSave = $('.branch-right-buttons > .btn-submit');\n  var formBranch = $('#frm_create_branch');\n  var btnDeleteBranch = $('#btnDisableBranch');\n  var dutyList = $('.duty-list > a');\n  var btnDutyClearInputs = $('.duty-right-buttons > #clear-input');\n  var btnDutySave = $('.duty-right-buttons > .btn-submit');\n  var formDuty = $('#frm_create_duty');\n  var btnDeleteDuty = $('#btnDisableDuty');\n\n  // 직원정보 수정 페이지 호출\n  $('#table-employee').on('click', '.btn-modify-userinfo', function (e) {\n    var _self = $(this);\n    var _name = _self.attr('data-user-name');\n    var _branch = _self.attr('data-user-branch');\n    var _duty = _self.attr('data-user-duty');\n    var _phone = _self.attr('data-user-phone');\n    var _email = _self.attr('data-user-email');\n    var _userid = _self.attr('data-user-id');\n    var _target = $('#frm_modify_employee');\n\n    _target.find('#name').val(_name);\n    _target.find('#tel').val(_phone);\n    _target.find('#email').val(_email);\n    _target.find('.employee_id').val(_userid);\n    _target.find('#select_branch').val(_branch).trigger('change'); // select2 의 선택방식은 다르다.\n    _target.find('#select_duty').val(_duty);\n  });\n\n  // $('.btn-modify-userinfo').bind('click', function () {\n  //   var _self = $(this);\n  //   console.log(_self);\n  //   var _name = _self.attr('data-user-name');\n  //   var _branch = _self.attr('data-user-branch');\n  //   var _duty = _self.attr('data-user-duty');\n  //   var _phone = _self.attr('data-user-phone');\n  //   var _email = _self.attr('data-user-email');\n  //   var _userid = _self.attr('data-user-id');\n  //   var _target = $('#frm_modify_employee');\n\n  //   _target.find('#name').val(_name);\n  //   _target.find('#tel').val(_phone);\n  //   _target.find('#email').val(_email);\n  //   _target.find('.employee_id').val(_userid);\n  //   _target.find('#select_branch').val(_branch).trigger('change'); // select2 의 선택방식은 다르다.\n  //   _target.find('#select_duty').val(_duty);\n  // });\n\n  // 지점 ..등록모드에서 수정모드로 변경\n  // 2nd 페이지에서 이벤트 안먹히는 증상 (http://stackoverflow.com/questions/25414778/jquery-onclick-not-working-in-datatables-2nd-page-or-rows-past-11)\n  $('#table-branch').on('click', '.branch-list-item', function (e) {\n    e.preventDefault();\n    $('.branch-input > input[name=\\'id\\']').val($(this).data('id'));\n    $('.branch-input > input[name=\\'name\\']').val($(this).data('name'));\n    formBranch.attr('action', '/employee/modify/branch');\n    btnBranchSave.html('수정');\n    btnDeleteBranch.prop('disabled', false);\n  });\n\n  // 지점 .. 수정모드에서 등록모드로 변경\n  btnBranchClearInputs.bind('click', function () {\n    $('.branch-input > input[name=\\'id\\']').val('');\n    $('.branch-input > input[name=\\'name\\']').val('');\n    formBranch.attr('action', '/employee/create/branch');\n    btnBranchSave.html('등록');\n    btnDeleteBranch.prop('disabled', true);\n  });\n\n  // 직책 ..등록모드에서 수정모드로 변경\n  dutyList.bind('click', function (e) {\n    e.preventDefault();\n    $('.duty-input > input[name=\\'id\\'').val($(this).data('id'));\n    $('.duty-input > input[name=\\'name\\']').val($(this).data('name'));\n    formDuty.attr('action', '/employee/modify/duty');\n    btnDutySave.html('수정');\n    btnDeleteDuty.prop('disabled', false);\n  });\n\n  // 직책 .. 수정모드에서 등록모드로 변경\n  btnDutyClearInputs.bind('click', function () {\n    $('.duty-input > input[name=\\'id\\']').val('');\n    $('.duty-input > input[name=\\'name\\']').val('');\n\n    formDuty.attr('action', '/employee/create/duty');\n    btnDutySave.html('등록');\n    btnDeleteDuty.prop('disabled', true);\n  });\n\n  // 직원 삭제하기\n  $('#table-employee').on('click', '.btn-delete-employee', function () {\n    if (!confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var params = {\n      id: $(this).data('user-id')\n    };\n\n    axios.delete('/employee',\n      {\n        params: params\n      })\n      .then(function (response) {\n        if (!response.data.success) {\n          alert('직원을 삭제하지 못했습니다.');\n        } else {\n          alert('직원을 삭제하였습니다.');\n        }\n        location.reload();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n\n  // 지점 삭제하기\n  btnDeleteBranch.bind('click', function () {\n    if (!confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var params = {\n      id: $('.branch-input > input[name=\\'id\\'').val()\n    };\n\n    axios.delete('/employee/branch',\n      {\n        params: params\n      })\n      .then(function (response) {\n        if (!response.data.success) {\n          alert('지점을 삭제하지 못했습니다.');\n        } else {\n          alert('지점을 삭제하였습니다.');\n        }\n        location.reload();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n\n  // 직책 삭제하기\n  btnDeleteDuty.bind('click', function () {\n    if (!confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    var params = {\n      id: $('.duty-input > input[name=\\'id\\'').val()\n    };\n\n    axios.delete('/employee/duty',\n      {\n        params: params\n      })\n      .then(function (response) {\n        if (!response.data.success) {\n          alert('직책을 삭제하지 못했습니다.');\n        } else {\n          alert('직책을 삭제하였습니다.');\n        }\n        location.reload();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n});\n"],"sourceRoot":"/source/"}